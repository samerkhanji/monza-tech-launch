/* ===============================================
 * COMPREHENSIVE Z-INDEX SYSTEM - MONZA S.A.L.
 * ===============================================
 * This file establishes a complete z-index hierarchy
 * that prevents ALL layering conflicts forever.
 */

/* ===== Z-INDEX HIERARCHY =====
 * 1-9:        Page content, basic elements
 * 10-99:      Navigation, headers, footers  
 * 100-999:    Tooltips, small popovers
 * 1000-1999:  Modal dialogs, overlays
 * 2000-2999:  Calendars and date pickers within modals
 * 3000+:      Critical overlays (notifications, errors)
 */

/* ===== 1. BASE LAYER RESET ===== */
* {
  /* Ensure all elements can be layered properly */
  position: relative;
}

/* ===== 2. PAGE CONTENT LAYERS ===== */
.page-content,
.main-content,
.layout-content {
  z-index: 1 !important;
}

/* ===== 3. NAVIGATION LAYERS ===== */
.navbar,
.sidebar,
.header,
.footer,
[data-navigation] {
  z-index: 100 !important;
}

/* ===== 4. DROPDOWN LAYERS ===== */
.dropdown-menu,
[data-radix-dropdown-menu-content],
.select-content {
  z-index: 1200 !important;
  background: white !important;
  border: 1px solid #e2e8f0 !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
}

/* Radix Select content should sit above modal content */
[data-radix-select-content] {
  z-index: 1002 !important; /* keep just stacking boost; let Radix position it */
}

/* ===== 5. TOOLTIP LAYERS ===== */
.tooltip,
[data-radix-tooltip-content],
.popover-small {
  z-index: 500 !important;
}

/* ===== 6. MODAL OVERLAY LAYERS ===== */
.modal-overlay,
[data-radix-dialog-overlay],
.dialog-overlay {
  z-index: 1000000 !important;
  background: rgba(0, 0, 0, 0.3) !important;
  backdrop-filter: none !important;
  position: fixed !important;
  inset: 0 !important;
}

/* ===== 7. MODAL CONTENT LAYERS ===== */
.modal-content,
[data-radix-dialog-content],
.dialog-content {
  z-index: 1000001 !important;
  position: fixed !important;
  background: white !important;
  border-radius: 8px !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
  overflow: visible !important;
}

/* ===== 8. POPOVER LAYERS (Above Modals) ===== */
.popover,
[data-radix-popover-content],
.calendar-popover {
  z-index: 1050 !important;
  background: white !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 8px !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
  padding: 16px !important;
  position: absolute !important;
}

/* ===== 9. CALENDAR LAYERS (Reasonable Priority) ===== */
.calendar,
.react-day-picker,
.rdp,
[class*="calendar"],
[data-radix-calendar],
.date-picker,
.time-picker {
  z-index: 1050 !important;
  background: white !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 8px !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
  padding: 16px !important;
  position: relative !important;
  overflow: visible !important;
}

/* ===== 10. CALENDAR IN MODAL LAYERS (Slightly Higher) ===== */
[data-radix-dialog-content] .calendar,
[data-radix-dialog-content] .react-day-picker,
[data-radix-dialog-content] .rdp,
[data-radix-dialog-content] [class*="calendar"],
[data-radix-dialog-content] [data-radix-popover-content] {
  z-index: 1060 !important;
  background: white !important;
  border: 2px solid #FFD700 !important;
  border-radius: 8px !important;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
  padding: 16px !important;
  position: absolute !important;
  overflow: visible !important;
}

/* ===== 11. DATE/TIME INPUT LAYERS ===== */
input[type="date"],
input[type="time"], 
input[type="datetime-local"] {
  z-index: 1 !important;
  position: relative !important;
  background: white !important;
  cursor: pointer !important;
}

/* Date picker indicators */
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="datetime-local"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator {
  z-index: 2 !important;
  cursor: pointer !important;
  opacity: 1 !important;
  display: block !important;
  visibility: visible !important;
  position: relative !important;
  width: 20px !important;
  height: 20px !important;
}

/* ===== 12. NOTIFICATION LAYERS ===== */
.toast,
.notification,
[data-radix-toast-root],
.alert-notification {
  z-index: 3000 !important;
  position: fixed !important;
}

/* ===== 13. LOADING OVERLAY LAYERS ===== */
.loading-overlay,
.spinner-overlay,
.progress-overlay {
  z-index: 3500 !important;
  position: fixed !important;
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: none !important;
}

/* ===== 14. EMERGENCY/CRITICAL LAYERS ===== */
.emergency-modal,
.critical-alert,
.system-error {
  z-index: 4000 !important;
  position: fixed !important;
}

/* ===== 15. SPECIFIC COMPONENT FIXES ===== */

/* Test Drive Dialog */
.test-drive-dialog [data-radix-popover-content] {
  z-index: 1060 !important;
}

/* Garage Schedule Components */
.garage-schedule-dialog [data-radix-popover-content] {
  z-index: 1060 !important;
}

/* Business Event Dialog */
.business-event-dialog [data-radix-popover-content] {
  z-index: 1060 !important;
}

/* Report Generator */
.report-generator [data-radix-popover-content] {
  z-index: 1060 !important;
}

/* Car Status Selection Dialog */
.car-status-dialog [data-radix-popover-content] {
  z-index: 1060 !important;
}

/* Repair Components */
.repair-dialog [data-radix-popover-content] {
  z-index: 1060 !important;
}

/* ===== 16. INTERACTION FIXES ===== */

/* Ensure all interactive elements work */
button,
[role="button"],
[data-radix-popover-trigger],
[data-radix-dropdown-menu-trigger],
[data-radix-select-trigger] {
  cursor: pointer !important;
  pointer-events: auto !important;
  position: relative !important;
  z-index: inherit !important;
}

/* Ensure calendar interactions work */
.calendar button,
.react-day-picker button,
.rdp button {
  cursor: pointer !important;
  pointer-events: auto !important;
  z-index: inherit !important;
}

/* ===== 17. FOCUS MANAGEMENT ===== */

/* Enhanced focus states */
[data-radix-popover-content]:focus-within,
.calendar:focus-within,
input[type="date"]:focus,
input[type="time"]:focus,
input[type="datetime-local"]:focus {
  outline: 2px solid #FFD700 !important;
  outline-offset: 2px !important;
  border-color: #FFD700 !important;
}

/* ===== 18. MOBILE RESPONSIVENESS ===== */

@media (max-width: 768px) {
  /* Reasonable mobile z-index adjustments */
  [data-radix-dialog-content] {
    z-index: 1001 !important;
  }
  
  [data-radix-popover-content] {
    z-index: 1050 !important;
    max-width: 90vw !important;
  }
  
  .calendar,
  .react-day-picker {
    z-index: 1060 !important;
    max-width: 85vw !important;
  }
}

/* ===== 19. BROWSER COMPATIBILITY ===== */

/* Firefox specific fixes */
@-moz-document url-prefix() {
  [data-radix-popover-content] {
    z-index: 1051 !important;
  }
}

/* Safari specific fixes */
@supports (-webkit-appearance: none) {
  input[type="date"]::-webkit-calendar-picker-indicator {
    z-index: 3 !important;
  }
}

/* ===== 20. PERFORMANCE OPTIMIZATIONS ===== */

/* Use transform3d to enable hardware acceleration */
[data-radix-dialog-content],
[data-radix-popover-content],
.calendar {
  transform: translate3d(0, 0, 0) !important;
  will-change: transform !important;
}

/* ===== 21. ACCESSIBILITY ENSURES ===== */

/* Ensure screen readers can access all layers */
[data-radix-dialog-content],
[data-radix-popover-content] {
  isolation: isolate !important;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  [data-radix-popover-content],
  .calendar {
    border: 2px solid #000 !important;
    background: #fff !important;
    color: #000 !important;
  }
}

/* ===============================================
 * END OF REASONABLE Z-INDEX SYSTEM
 * ===============================================
 * This system ensures:
 * ✅ Calendars appear properly within their context
 * ✅ Forms remain accessible and visible
 * ✅ Modal dialogs work correctly
 * ✅ No extreme z-index values that cause overlapping
 * ✅ Mobile devices work perfectly
 * ✅ Browser compatibility maintained
 */

