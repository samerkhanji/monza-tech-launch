/* Date Picker Fix - Override problematic CSS */

/* Reset all problematic date input styling */
input[type="date"]::-webkit-calendar-picker-indicator {
  display: block !important;
  opacity: 1 !important;
  width: 20px !important;
  height: 20px !important;
  background: transparent !important;
  color: #666 !important;
  cursor: pointer !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  outline: none !important;
  visibility: visible !important;
  position: static !important;
  right: auto !important;
  top: auto !important;
  z-index: auto !important;
  margin-left: 4px !important;
}

/* Ensure date inputs are fully functional */
input[type="date"] {
  cursor: pointer !important;
  position: relative !important;
  background-color: white !important;
  color: #000 !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
}

/* PDI date inputs specifically */
input[type="date"].pdi-date-input,
input[type="date"].calendar-fix,
input[type="date"].mt-1,
input[type="date"].w-full {
  background-color: white !important;
  color: #000 !important;
  cursor: pointer !important;
}

/* Firefox date picker */
input[type="date"]::-moz-calendar-picker {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  cursor: pointer !important;
}

/* Enhanced focus state */
input[type="date"]:focus {
  outline: 2px solid #3b82f6 !important;
  outline-offset: 2px !important;
  border-color: #3b82f6 !important;
}

/* Hover state for better UX */
input[type="date"]:hover {
  border-color: #94a3b8 !important;
}

/* Remove spinner buttons */
input[type="date"]::-webkit-inner-spin-button,
input[type="date"]::-webkit-outer-spin-button {
  display: none !important;
  -webkit-appearance: none !important;
  margin: 0 !important;
  visibility: hidden !important;
}

/* CRITICAL FIX: Calendar popup z-index override */
input[type="date"] {
  position: relative;
  z-index: 1;
}

/* Calendar popup fix - URGENT PRIORITY */
input[type="date"]::-webkit-calendar-picker-indicator {
  position: relative;
  z-index: 2;
}

/* CRITICAL: Calendar popup must be above everything */
input[type="date"]:focus {
  z-index: 9999 !important;
}

/* Calendar popup container override */
input[type="date"]:focus::-webkit-calendar-picker-indicator {
  z-index: 10000 !important;
}

/* Form container positioning */
.form-container {
  position: relative;
  overflow: visible;
}

/* Date input wrapper */
.date-input-wrapper {
  position: relative;
  z-index: 1;
}

/* Ensure date inputs don't overlap other elements */
.date-input-wrapper input[type="date"] {
  position: relative;
  z-index: 1;
}

/* Calendar dropdown positioning */
input[type="date"]:focus {
  z-index: 9999 !important;
}

/* Form field spacing to prevent overlap */
.form-field {
  margin-bottom: 1rem;
  position: relative;
}

/* Ensure proper stacking context */
.card-content {
  position: relative;
  z-index: 1;
}

/* Date picker specific fixes */
.date-picker-container {
  position: relative;
  z-index: 1;
}

.date-picker-container input[type="date"] {
  position: relative;
  z-index: 1;
}

/* Prevent calendar from being cut off */
.date-picker-container input[type="date"]:focus {
  z-index: 9999 !important;
}

/* Form validation styling */
.form-field.error input {
  border-color: #ef4444;
  box-shadow: 0 0 0 1px #ef4444;
}

.form-field.error input:focus {
  border-color: #ef4444;
  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
}

/* Error message styling */
.error-message {
  color: #ef4444;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

/* Success message styling */
.success-message {
  color: #10b981;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

/* Work Scheduler Specific Fixes - CRITICAL */
.work-scheduler-dialog {
  position: relative;
  z-index: 1000;
}

.work-scheduler-dialog .dialog-content {
  position: relative;
  z-index: 1001;
}

/* Calendar input fixes for Work Scheduler - CRITICAL */
.work-scheduler-dialog input[type="date"],
.work-scheduler-dialog input[type="time"] {
  position: relative;
  z-index: 50;
}

.work-scheduler-dialog input[type="date"]:focus,
.work-scheduler-dialog input[type="time"]:focus {
  z-index: 100000 !important;
}

/* CRITICAL: Employee assignment section must be below calendar */
.work-scheduler-dialog .employee-assignment-section {
  position: relative;
  z-index: 1;
}

.work-scheduler-dialog .employee-assignment-grid {
  position: relative;
  z-index: 1;
}

/* CRITICAL: Calendar popup must be above everything */
.work-scheduler-dialog input[type="date"]:focus {
  z-index: 999999 !important;
}

.work-scheduler-dialog input[type="date"]:focus::-webkit-calendar-picker-indicator {
  z-index: 1000000 !important;
}

/* CRITICAL: Ensure calendar popup appears above all content */
.work-scheduler-dialog input[type="date"]:focus + * {
  z-index: 999998 !important;
}

/* CRITICAL: Override any conflicting z-index values */
.work-scheduler-dialog * {
  z-index: auto !important;
}

.work-scheduler-dialog input[type="date"]:focus {
  z-index: 999999 !important;
}

.work-scheduler-dialog input[type="date"]:focus::-webkit-calendar-picker-indicator {
  z-index: 1000000 !important;
}

/* CRITICAL: Employee assignment must stay below calendar */
.work-scheduler-dialog .employee-assignment-section {
  z-index: 1 !important;
}

.work-scheduler-dialog .employee-assignment-grid {
  z-index: 1 !important;
}

/* CRITICAL: Dialog content must have proper stacking */
[data-radix-dialog-content] {
  z-index: 10000 !important;
}

/* CRITICAL: Calendar popup must be above dialog */
[data-radix-dialog-content] input[type="date"]:focus {
  z-index: 10001 !important;
}

/* CRITICAL: Override any other z-index conflicts */
* {
  z-index: auto;
}

/* CRITICAL: Ensure calendar popup is always on top */
input[type="date"]:focus {
  z-index: 10000 !important;
}

/* CRITICAL: Calendar picker indicator */
input[type="date"]:focus::-webkit-calendar-picker-indicator {
  z-index: 10001 !important;
}

/* Employee assignment grid fixes */
.employee-assignment-grid {
  max-height: 200px;
  overflow-y: auto;
  border: 1px solid #e5e7eb;
  border-radius: 0.375rem;
  padding: 0.5rem;
}

.employee-assignment-grid .grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.5rem;
}

/* Mobile responsiveness for Work Scheduler */
@media (max-width: 768px) {
  .work-scheduler-dialog .dialog-content {
    max-width: 95vw;
    margin: 1rem;
  }
  
  .employee-assignment-grid .grid {
    grid-template-columns: 1fr;
  }
  
  .work-type-buttons {
    grid-template-columns: 1fr;
  }
  
  .priority-select {
    width: 100%;
  }
}

/* Time input specific fixes */
input[type="time"] {
  position: relative;
  z-index: 1;
}

input[type="time"]:focus {
  z-index: 9999 !important;
}

/* Dialog content overflow fixes */
.dialog-content {
  max-height: 90vh;
  overflow-y: auto;
}

/* Select dropdown fixes */
.select-content {
  z-index: 1000;
  position: relative;
}

/* Button grid fixes for work types */
.work-type-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 0.5rem;
}

@media (max-width: 640px) {
  .work-type-grid {
    grid-template-columns: 1fr;
  }
}

/* Priority badges with icons */
.priority-badge {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* Template card hover effects */
.template-card {
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}

.template-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Conflict dialog styling */
.conflict-dialog {
  background-color: #fef3c7;
  border: 1px solid #f59e0b;
  border-radius: 0.5rem;
  padding: 1rem;
  margin: 1rem 0;
}

/* Notification styling */
.notification-sent {
  background-color: #d1fae5;
  border: 1px solid #10b981;
  border-radius: 0.5rem;
  padding: 0.5rem;
  margin: 0.5rem 0;
  font-size: 0.875rem;
  color: #065f46;
}

/* CRITICAL: Additional fixes for all dialog components */
[role="dialog"] {
  z-index: 10000 !important;
}

[role="dialog"] input[type="date"]:focus {
  z-index: 10001 !important;
}

/* CRITICAL: Override any conflicting z-index from other components */
.relative {
  position: relative !important;
}

/* CRITICAL: Ensure calendar popup is always visible */
input[type="date"]:focus {
  position: relative !important;
  z-index: 10000 !important;
}

/* CRITICAL: Calendar picker popup */
input[type="date"]:focus::-webkit-calendar-picker-indicator {
  z-index: 10001 !important;
}

/* CRITICAL: Override any other z-index rules */
* {
  z-index: auto;
}

/* CRITICAL: Final override for calendar popup */
input[type="date"]:focus {
  z-index: 10000 !important;
}

/* CRITICAL: Ensure dialog backdrop doesn't interfere */
[data-radix-dialog-overlay] {
  z-index: 9999 !important;
  background: rgba(0,0,0,0.3) !important;
}

/* CRITICAL: Ensure dialog content is above backdrop */
[data-radix-dialog-content] {
  z-index: 10000 !important;
}

/* CRITICAL: Calendar popup must be above dialog content */
[data-radix-dialog-content] input[type="date"]:focus {
  z-index: 10001 !important;
}

/* ===============================================
   COMPREHENSIVE DROPDOWN & SCROLL WHEEL FIXES
   =============================================== */

/* CRITICAL: Enhanced Select Dropdown Fixes */
[data-radix-select-content] {
  z-index: 999999 !important;
  position: fixed !important;
  background: white !important;
  border: 1px solid #e2e8f0 !important;
  border-radius: 8px !important;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
  min-width: 200px !important;
  max-height: 300px !important;
  overflow-y: auto !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  /* Scroll wheel support */
  scrollbar-width: thin !important;
  scrollbar-color: #cbd5e1 #f1f5f9 !important;
}

/* Custom scrollbar for dropdowns */
[data-radix-select-content]::-webkit-scrollbar {
  width: 6px !important;
}

[data-radix-select-content]::-webkit-scrollbar-track {
  background: #f1f5f9 !important;
  border-radius: 3px !important;
}

[data-radix-select-content]::-webkit-scrollbar-thumb {
  background: #cbd5e1 !important;
  border-radius: 3px !important;
}

[data-radix-select-content]::-webkit-scrollbar-thumb:hover {
  background: #94a3b8 !important;
}

/* Enhanced Select Items */
[data-radix-select-item] {
  display: flex !important;
  align-items: center !important;
  padding: 8px 12px !important;
  cursor: pointer !important;
  pointer-events: auto !important;
  color: #1f2937 !important;
  background: white !important;
  transition: background-color 0.15s ease !important;
  /* Scroll wheel support for items */
  user-select: none !important;
  -webkit-user-select: none !important;
}

[data-radix-select-item]:hover {
  background-color: #f3f4f6 !important;
}

[data-radix-select-item]:focus {
  background-color: #e5e7eb !important;
  outline: none !important;
}

/* Enhanced Select Trigger */
[data-radix-select-trigger] {
  cursor: pointer !important;
  pointer-events: auto !important;
  background: white !important;
  border: 2px solid #d1d5db !important;
  transition: all 0.15s ease !important;
  /* Scroll wheel support */
  user-select: none !important;
  -webkit-user-select: none !important;
}

[data-radix-select-trigger]:hover {
  border-color: #6b7280 !important;
  background-color: #f9fafb !important;
}

[data-radix-select-trigger]:focus {
  border-color: #3b82f6 !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* Force dialog to allow overflow for dropdowns */
[role="dialog"] {
  overflow: visible !important;
}

[data-radix-dialog-content] {
  overflow: visible !important;
}

/* Emergency Select Portal Fix */
[data-radix-popper-content-wrapper] {
  z-index: 999999 !important;
}

/* ULTIMATE SELECT FIX - NUCLEAR OPTION */
.customs-select-trigger {
  position: relative !important;
  z-index: 1 !important;
}

.customs-select-content {
  position: fixed !important;
  z-index: 999999 !important;
  background: white !important;
  border: 1px solid #ccc !important;
  border-radius: 6px !important;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important;
  min-width: 200px !important;
  padding: 4px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  /* Enhanced scroll wheel support */
  max-height: 300px !important;
  overflow-y: auto !important;
  scrollbar-width: thin !important;
  scrollbar-color: #cbd5e1 #f1f5f9 !important;
}

.customs-select-content::-webkit-scrollbar {
  width: 6px !important;
}

.customs-select-content::-webkit-scrollbar-track {
  background: #f1f5f9 !important;
  border-radius: 3px !important;
}

.customs-select-content::-webkit-scrollbar-thumb {
  background: #cbd5e1 !important;
  border-radius: 3px !important;
}

.customs-select-content::-webkit-scrollbar-thumb:hover {
  background: #94a3b8 !important;
}

.customs-select-item {
  padding: 8px 12px !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  border-radius: 4px !important;
  margin: 2px 0 !important;
  transition: background-color 0.15s ease !important;
  /* Scroll wheel support */
  user-select: none !important;
  -webkit-user-select: none !important;
}

.customs-select-item:hover {
  background: #f1f5f9 !important;
}

.customs-select-item:focus {
  background: #e2e8f0 !important;
  outline: none !important;
}

/* ===============================================
   ENHANCED SCROLL WHEEL SUPPORT
   =============================================== */

/* Global scroll wheel improvements */
* {
  scroll-behavior: smooth !important;
}

/* Enhanced scroll wheel for all selectable elements */
select, 
[data-radix-select-content],
[data-radix-select-viewport],
.customs-select-content {
  /* Smooth scrolling */
  scroll-behavior: smooth !important;
  /* Better scroll wheel response */
  overscroll-behavior: contain !important;
  /* Prevent scroll chaining */
  scroll-snap-type: y proximity !important;
}

/* Scroll wheel support for select options */
select option,
[data-radix-select-item],
.customs-select-item {
  /* Prevent text selection during scroll */
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  /* Smooth transitions */
  transition: background-color 0.15s ease, color 0.15s ease !important;
}

/* Enhanced focus states for keyboard navigation */
select:focus,
[data-radix-select-trigger]:focus,
.customs-select-trigger:focus {
  outline: 2px solid #3b82f6 !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* ===============================================
   MOBILE & TOUCH SUPPORT
   =============================================== */

/* Touch-friendly dropdown sizes */
@media (max-width: 768px) {
  [data-radix-select-content],
  .customs-select-content {
    min-width: 250px !important;
    max-height: 250px !important;
  }
  
  [data-radix-select-item],
  .customs-select-item {
    padding: 12px 16px !important;
    min-height: 44px !important;
  }
  
  [data-radix-select-trigger] {
    min-height: 44px !important;
    padding: 12px 16px !important;
  }
}

/* Touch scroll improvements */
@media (hover: none) and (pointer: coarse) {
  [data-radix-select-content],
  .customs-select-content {
    /* Better touch scrolling */
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }
}

/* ===============================================
   ACCESSIBILITY IMPROVEMENTS
   =============================================== */

/* Screen reader support */
[data-radix-select-item][data-state="checked"] {
  background-color: #3b82f6 !important;
  color: white !important;
}

[data-radix-select-item][data-state="checked"]:hover {
  background-color: #2563eb !important;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  [data-radix-select-content],
  .customs-select-content {
    border: 2px solid #000 !important;
    background: white !important;
  }
  
  [data-radix-select-item],
  .customs-select-item {
    border-bottom: 1px solid #e5e7eb !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  [data-radix-select-item],
  .customs-select-item,
  [data-radix-select-trigger] {
    transition: none !important;
  }
}

/* ===============================================
   SPECIFIC COMPONENT FIXES
   =============================================== */

/* OrderedParts specific fixes */
.order-parts-form select,
.order-parts-form [data-radix-select-trigger] {
  z-index: 1000 !important;
}

.order-parts-form [data-radix-select-content] {
  z-index: 1001 !important;
}

/* Work Scheduler specific fixes */
.work-scheduler-dialog [data-radix-select-content] {
  z-index: 10001 !important;
}

/* Garage Schedule specific fixes */
.garage-schedule [data-radix-select-content] {
  z-index: 1000 !important;
}

/* ===============================================
   PERFORMANCE OPTIMIZATIONS
   =============================================== */

/* Hardware acceleration for smooth scrolling */
[data-radix-select-content],
.customs-select-content {
  transform: translateZ(0) !important;
  will-change: transform !important;
}

/* Optimize for frequent updates */
[data-radix-select-item],
.customs-select-item {
  contain: layout style paint !important;
}

/* ===============================================
   BROWSER SPECIFIC FIXES
   =============================================== */

/* Firefox specific fixes */
@-moz-document url-prefix() {
  [data-radix-select-content],
  .customs-select-content {
    scrollbar-width: thin !important;
    scrollbar-color: #cbd5e1 #f1f5f9 !important;
  }
}

/* Safari specific fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  [data-radix-select-content],
  .customs-select-content {
    -webkit-overflow-scrolling: touch !important;
  }
}

/* Edge specific fixes */
@supports (-ms-ime-align: auto) {
  [data-radix-select-content],
  .customs-select-content {
    -ms-overflow-style: auto !important;
  }
}

/* ===============================================
   EMERGENCY OVERRIDES
   =============================================== */

/* Force dropdown visibility in all contexts */
[data-radix-select-content][data-state="open"],
.customs-select-content[data-state="open"] {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* Override any conflicting z-index */
*[style*="z-index"] {
  z-index: auto !important;
}

/* Ensure dropdowns are always on top */
[data-radix-select-content],
.customs-select-content {
  z-index: 999999 !important;
}

/* Force pointer events */
[data-radix-select-trigger],
[data-radix-select-item],
.customs-select-trigger,
.customs-select-item {
  pointer-events: auto !important;
  cursor: pointer !important;
}
