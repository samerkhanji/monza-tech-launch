import{K as e,j as s,U as a,L as t,S as l,I as r,C as n,a as c,g as m,h as i,R as o}from"./index-BmUpYGrm.js";import{r as d}from"./vendor-vN6PtkFd.js";import{u as x}from"./userAPI-BDd2QYRO.js";import{M as h}from"./mail-BiNlmlXL.js";import{P as p}from"./phone-CUmdYfuI.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";const j=()=>{var j;const{user:u}=e(),[N,g]=d.useState([]),[v,y]=d.useState(""),[f,w]=d.useState(!0);d.useEffect(()=>{b()},[]);const b=()=>{return e=void 0,s=null,a=function*(){try{w(!0);const e=yield x.getAll();g(e)}catch(e){}finally{w(!1)}},new Promise((t,l)=>{var r=e=>{try{c(a.next(e))}catch(s){l(s)}},n=e=>{try{c(a.throw(e))}catch(s){l(s)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);c((a=a.apply(e,s)).next())});var e,s,a},C=N.filter(e=>{var s,a,t;return(null==(s=e.name)?void 0:s.toLowerCase().includes(v.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(v.toLowerCase()))||(null==(t=e.department)?void 0:t.toLowerCase().includes(v.toLowerCase()))});return"OWNER"===(null==(j=null==u?void 0:u.role)?void 0:j.toUpperCase())?f?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading employees..."})}):s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(a,{className:"h-6 w-6"}),"Employee Management"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage employee profiles and contact information"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx(t,{htmlFor:"search",children:"Search Employees"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(r,{id:"search",type:"text",placeholder:"Search by name, email, or department...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]})]}),0===C.length?s.jsx(n,{children:s.jsxs(c,{className:"p-6 text-center",children:[s.jsx(a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:v?"No employees found matching your search.":"No employee profiles found."})]})}):s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:C.map(e=>{var a;return s.jsxs(n,{className:"hover:shadow-md transition-shadow",children:[s.jsxs(m,{children:[s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-white",children:(null==(a=e.name)?void 0:a.charAt(0))||"U"})}),e.name]}),s.jsxs(o,{className:"capitalize",children:[e.role," ",e.department&&"owner"!==e.role&&`â€¢ ${e.department}`]})]}),s.jsxs(c,{className:"space-y-3",children:[e.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(h,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:e.email})]}),e.phoneNumber&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(p,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:e.phoneNumber})]}),e.notes&&s.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Notes"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]})]},e.id)})})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600",children:"Only owners can access employee management."}),s.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Current user: ",(null==u?void 0:u.name)||"Unknown"," (",(null==u?void 0:u.role)||"No role",")"]})]})})};export{j as default};
