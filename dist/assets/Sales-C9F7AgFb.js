var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(s,a,l)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,i=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&n(e,a,s[a]);if(l)for(var a of l(s))t.call(s,a)&&n(e,a,s[a]);return e},c=(e,l)=>s(e,a(l));import{u as o,j as d,k as m,K as x,C as h,g as j,h as u,R as g,a as p,I as f,Y as N,Z as y,_ as v,$ as b,a0 as w,H as S,t as C,O as z,ai as k,e as M}from"./index-BmUpYGrm.js";import{r as O}from"./vendor-vN6PtkFd.js";import{C as I}from"./index-BFmfdtnU.js";import{t as L,o as P,s as V}from"./zod-Cunv6AlR.js";import{u as D,F as E,a as $,b as A,c as q,d as R,e as F,f as H}from"./form-D18p6wVs.js";import{s as J}from"./errorHandling-Dc1u_gNS.js";import{U as T}from"./user-plus-D_7NBtOn.js";import{F as U}from"./file-text-bXPYLusF.js";import{S as B}from"./star-CR_sFOyJ.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";const G=()=>{const e=o();return d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold text-monza-black",children:"Sales Lead Sources"}),d.jsx(m,{variant:"outline",onClick:()=>{e("/analytics",{state:{defaultTab:"sales"}})},children:"View Analytics"})]})},K=P({clientName:V().min(2,"Client name is required"),leadSource:V().min(2,"Lead source is required"),carModel:V().min(1,"Car model is required"),additionalNotes:V().optional()}),Q=()=>{const{user:e}=x(),[s,a]=O.useState(!1),l=D({resolver:L(K),defaultValues:{clientName:"",leadSource:"",carModel:"",additionalNotes:""}});return d.jsxs(h,{className:"w-full",children:[d.jsxs(j,{children:[d.jsxs(u,{className:"flex items-center gap-2 text-monza-black",children:[d.jsx(T,{className:"h-5 w-5 text-monza-yellow"}),"Record New Lead Source"]}),d.jsx(g,{className:"text-monza-grey",children:"Track where potential clients are learning about our vehicles and capture their feedback"})]}),d.jsx(p,{children:d.jsx(E,c(i({},l),{children:d.jsxs("form",{onSubmit:l.handleSubmit(s=>{return r=void 0,t=null,n=function*(){a(!0);try{const a=J("salesLeads",[]),r={id:Date.now().toString(),clientName:s.clientName,leadSource:s.leadSource,carModel:s.carModel,additionalNotes:s.additionalNotes,timestamp:(new Date).toISOString(),recordedBy:(null==e?void 0:e.name)||"Unknown"};a.push(r),localStorage.setItem("salesLeads",JSON.stringify(a)),C({title:"Lead source recorded",description:`${s.clientName}'s lead source has been recorded and sent to analytics.`}),l.reset()}catch(r){C({title:"Error recording lead source",description:"There was a problem recording the lead source.",variant:"destructive"})}finally{a(!1)}},new Promise((e,s)=>{var a=e=>{try{i(n.next(e))}catch(a){s(a)}},l=e=>{try{i(n.throw(e))}catch(a){s(a)}},i=s=>s.done?e(s.value):Promise.resolve(s.value).then(a,l);i((n=n.apply(r,t)).next())});var r,t,n}),className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx($,{control:l.control,name:"clientName",render:({field:e})=>d.jsxs(A,{children:[d.jsx(q,{className:"text-monza-black",children:"Client Name"}),d.jsx(R,{children:d.jsx(f,c(i({id:"leadClientName",placeholder:"Enter client name"},e),{className:"border-monza-grey/30 focus-visible:ring-monza-yellow"}))}),d.jsx(F,{})]})}),d.jsx($,{control:l.control,name:"leadSource",render:({field:e})=>d.jsxs(A,{children:[d.jsx(q,{className:"text-monza-black",children:"Lead Source"}),d.jsx(R,{children:d.jsx(f,c(i({placeholder:"How did they hear about us?"},e),{className:"border-monza-grey/30 focus-visible:ring-monza-yellow"}))}),d.jsx(H,{className:"text-monza-grey",children:"E.g. Online Ads, Social Media, Car Show, Referral"}),d.jsx(F,{})]})})]}),d.jsx($,{control:l.control,name:"carModel",render:({field:e})=>d.jsxs(A,{children:[d.jsx(q,{className:"text-monza-black",children:"Car Model"}),d.jsxs(N,{onValueChange:e.onChange,defaultValue:e.value,children:[d.jsx(R,{children:d.jsx(y,{className:"border-monza-grey/30 focus-visible:ring-monza-yellow",children:d.jsx(v,{placeholder:"Select a car model"})})}),d.jsx(b,{children:I.map(e=>d.jsxs(w,{value:`${e.name} ${e.year}`,children:[e.name," ",e.year]},e.id))})]}),d.jsx(F,{})]})}),d.jsx($,{control:l.control,name:"additionalNotes",render:({field:e})=>d.jsxs(A,{children:[d.jsx(q,{className:"text-monza-black",children:"Notes & Client Feedback"}),d.jsx(R,{children:d.jsx(S,i({placeholder:"Include any client comments, feedback, or additional details about this lead",className:"resize-none border-monza-grey/30 focus-visible:ring-monza-yellow",rows:4},e))}),d.jsx(H,{className:"text-monza-grey",children:"Capture client comments, ratings, preferences, and any other relevant information"}),d.jsx(F,{})]})}),d.jsxs(m,{type:"submit",className:"w-full",disabled:s,children:[d.jsx(U,{className:"mr-2 h-4 w-4"}),"Record Lead Source"]})]})}))})]})},W=()=>{const[e,s]=O.useState([]),[a,l]=O.useState({clientName:"",carModel:"",comment:"",rating:5,category:"general"}),[r,t]=O.useState(!1);O.useEffect(()=>{const e=localStorage.getItem("clientComments");e&&s(JSON.parse(e))},[]);return d.jsxs("div",{className:"space-y-4",children:[r?d.jsx(h,{children:d.jsxs(p,{className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Client Name"}),d.jsx(f,{placeholder:"Enter client name",value:a.clientName,onChange:e=>l(c(i({},a),{clientName:e.target.value}))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Car Model"}),d.jsxs(N,{value:a.carModel,onValueChange:e=>l(c(i({},a),{carModel:e})),children:[d.jsx(y,{children:d.jsx(v,{placeholder:"Select car model"})}),d.jsx(b,{children:I.map(e=>d.jsxs(w,{value:`${e.name} ${e.year}`,children:[e.name," ",e.year]},e.id))})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Category"}),d.jsxs(N,{value:a.category,onValueChange:e=>l(c(i({},a),{category:e})),children:[d.jsx(y,{children:d.jsx(v,{})}),d.jsxs(b,{children:[d.jsx(w,{value:"design",children:"Design"}),d.jsx(w,{value:"performance",children:"Performance"}),d.jsx(w,{value:"features",children:"Features"}),d.jsx(w,{value:"price",children:"Price"}),d.jsx(w,{value:"service",children:"Service"}),d.jsx(w,{value:"general",children:"General"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Rating"}),d.jsxs(N,{value:a.rating.toString(),onValueChange:e=>l(c(i({},a),{rating:parseInt(e)})),children:[d.jsx(y,{children:d.jsx(v,{})}),d.jsx(b,{children:[1,2,3,4,5].map(e=>d.jsxs(w,{value:e.toString(),children:[e," Star",e>1?"s":""]},e))})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium",children:"Comment"}),d.jsx(S,{placeholder:"Enter client's feedback about the car",value:a.comment,onChange:e=>l(c(i({},a),{comment:e.target.value})),rows:3})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(m,{onClick:()=>{if(!a.clientName||!a.carModel||!a.comment)return void C({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});const r=[c(i({id:Date.now().toString()},a),{timestamp:(new Date).toISOString()}),...e];s(r),localStorage.setItem("clientComments",JSON.stringify(r)),C({title:"Comment Added",description:`${a.clientName}'s comment has been recorded.`}),l({clientName:"",carModel:"",comment:"",rating:5,category:"general"}),t(!1)},className:"flex-1",children:"Save Comment"}),d.jsx(m,{variant:"outline",onClick:()=>t(!1),children:"Cancel"})]})]})}):d.jsxs(m,{onClick:()=>t(!0),className:"w-full",children:[d.jsx(z,{className:"mr-2 h-4 w-4"}),"Add Client Comment"]}),d.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===e.length?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(k,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"No client comments yet. Add the first one!"})]}):e.map(e=>{return d.jsx(h,{className:"border-l-4 border-l-monza-yellow",children:d.jsxs(p,{className:"p-4",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-monza-black",children:e.clientName}),d.jsx("p",{className:"text-sm text-monza-grey",children:e.carModel})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(M,{className:(a=e.category,{design:"bg-purple-100 text-purple-800",performance:"bg-red-100 text-red-800",features:"bg-blue-100 text-blue-800",price:"bg-green-100 text-green-800",service:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"}[a]),children:e.category}),d.jsx("div",{className:"flex items-center gap-1",children:(s=e.rating,Array.from({length:5},(e,a)=>d.jsx(B,{className:"h-4 w-4 "+(a<s?"fill-yellow-400 text-yellow-400":"text-gray-300")},a)))})]})]}),d.jsx("p",{className:"text-gray-700 mb-2",children:e.comment}),d.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[d.jsx(Clock,{className:"h-3 w-3"}),new Date(e.timestamp).toLocaleDateString()]})]})},e.id);var s,a})})]})},Y=()=>d.jsxs(h,{className:"w-full",children:[d.jsxs(j,{children:[d.jsxs(u,{className:"flex items-center gap-2 text-monza-black",children:[d.jsx(k,{className:"h-5 w-5 text-monza-yellow"}),"Client Comments"]}),d.jsx(g,{className:"text-monza-grey",children:"View and manage client feedback about our vehicles"})]}),d.jsx(p,{children:d.jsx(W,{})})]}),Z=()=>d.jsxs(h,{children:[d.jsx(j,{children:d.jsx(u,{className:"text-monza-black",children:"Why Lead Sources Matter"})}),d.jsxs(p,{className:"space-y-4 text-monza-grey",children:[d.jsx("p",{children:"Understanding where our clients first hear about Voyah and MHero helps us:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[d.jsx("li",{children:"Optimize marketing spend on channels that deliver results"}),d.jsx("li",{children:"Identify trends in customer acquisition"}),d.jsx("li",{children:"Measure the effectiveness of different marketing campaigns"}),d.jsx("li",{children:"Improve customer journey mapping"})]})]})]}),_=()=>d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsx(G,{}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(Q,{}),d.jsx(Y,{})]}),d.jsx("div",{className:"mt-8",children:d.jsx(Z,{})})]});export{_ as default};
