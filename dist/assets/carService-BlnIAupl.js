var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,i=(e,t,r)=>new Promise((o,a)=>{var n=e=>{try{i(r.next(e))}catch(t){a(t)}},s=e=>{try{i(r.throw(e))}catch(t){a(t)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,s);i((r=r.apply(e,t)).next())});import{s as d}from"./index-BmUpYGrm.js";const c={getAllCars(){return i(this,null,function*(){try{const{data:e,error:t}=yield d.from("car_inventory").select("*").order("created_at",{ascending:!1});if(t)return{data:null,error:t};return{data:(null==e?void 0:e.map(e=>({id:e.id,model:e.model||e.Model,year:e.year||e.model_year||e.Model_Year,color:e.color||e.Color,arrivalDate:e.arrival_date||e.created_at,soldDate:e.sold_date,status:e.status||e.Status,vinNumber:e.vin_number||e.vin||e.VIN,currentFloor:e.current_floor||e.current_location||"INVENTORY",batteryPercentage:e.battery_percentage||100,pdiCompleted:e.pdi_completed||!1,pdiTechnician:e.pdi_technician,pdiDate:e.pdi_date,pdiPhotos:e.pdi_photos,pdiNotes:e.pdi_notes,notes:e.notes||e.Notes,inShowroom:e.in_showroom||!1,showroomEntryDate:e.showroom_entry_date,showroomExitDate:e.showroom_exit_date,showroomNote:e.showroom_note,category:e.category||e.vehicle_type||"EV",customs:e.custom_duty||e.customs||"paid",lastUpdated:e.updated_at||e.created_at,brand:e.brand||e.Brand||"Voyah",customModelName:e.custom_model_name,clientName:e.client_name||e.Client_Name,clientPhone:e.client_phone,clientLicensePlate:e.client_license_plate,clientEmail:e.client_email,clientAddress:e.client_address,reservedDate:e.reserved_date,purchasePrice:e.purchase_price||45e3,sellingPrice:e.selling_price||5e4,shipmentCode:e.shipment_code,warrantyStartDate:e.warranty_start_date,warrantyEndDate:e.warranty_end_date||e.vehicle_warranty_expiry,warrantyMonthsRemaining:e.warranty_months_remaining,warrantyDaysRemaining:e.warranty_days_remaining,warrantyStatus:e.warranty_status,lastWarrantyUpdate:e.last_warranty_update,customsStatus:e.customs_status,customsCost:e.customs_cost,shippingCost:e.shipping_cost,processedBy:e.processed_by,paymentDate:e.payment_date,customsDocRef:e.customs_doc_ref,customsNotes:e.customs_notes,shippingStatus:e.shipping_status,testDriveInfo:e.test_drive_active?{isOnTestDrive:e.test_drive_active,testDriveStartTime:e.test_drive_start_time,testDriveEndTime:e.test_drive_end_time,testDriveDuration:e.test_drive_duration,testDriverName:e.test_driver_name,testDriverPhone:e.test_driver_phone,testDriverLicense:e.test_driver_license,notes:e.test_drive_notes,isClientTestDrive:e.test_drive_is_client}:void 0})))||[],error:null}}catch(e){return{data:null,error:e}}})},getCarById(e){return i(this,null,function*(){try{const{data:l,error:_}=yield d.from("car_inventory").select("*").eq("id",e).single();if(_)return{data:null,error:_};if(l){const e=(i=((e,t)=>{for(var r in t||(t={}))a.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))n.call(t,r)&&s(e,r,t[r]);return e})({},l),c={model:l.model||l.Model,year:l.year||l.model_year||l.Model_Year,color:l.color||l.Color,status:l.status||l.Status,vinNumber:l.vin_number||l.vin||l.VIN,brand:l.brand||l.Brand||"Voyah",category:l.category||l.vehicle_type||"EV"},t(i,r(c)));return{data:e,error:null}}return{data:null,error:null}}catch(l){return{data:null,error:l}}var i,c})},createCar(e){return i(this,null,function*(){try{const t={brand:e.brand,model:e.model,model_year:e.year,color:e.color,vehicle_type:e.category||"EV",vin:e.vinNumber,created_at:e.arrivalDate||(new Date).toISOString(),status:e.status||"Available",battery_percentage:e.batteryPercentage||100,pdi_completed:e.pdiCompleted||!1,customs:e.customs||"paid",customs_status:e.customsStatus||"paid",customs_cost:e.customsCost||0,shipping_cost:e.shippingCost||0,processed_by:e.processedBy||null,payment_date:e.paymentDate||null,customs_doc_ref:e.customsDocRef||null,customs_notes:e.customsNotes||null,shipping_status:e.shippingStatus||"paid",current_location:e.currentFloor||"Inventory",in_showroom:e.inShowroom||!1,notes:e.notes,purchase_price:e.purchasePrice||45e3,selling_price:e.sellingPrice||5e4,custom_model_name:e.customModelName,shipment_code:e.shipmentCode,updated_at:(new Date).toISOString()},{data:r,error:o}=yield d.from("car_inventory").insert(t).select().single();return{data:r,error:o}}catch(t){return{data:null,error:t}}})},updateCar(e,t){return i(this,null,function*(){try{const r={last_updated:(new Date).toISOString()};void 0!==t.brand&&(r.brand=t.brand),void 0!==t.model&&(r.model=t.model),void 0!==t.year&&(r.model_year=t.year),void 0!==t.color&&(r.color=t.color),void 0!==t.category&&(r.vehicle_type=t.category),void 0!==t.vinNumber&&(r.vin=t.vinNumber),void 0!==t.arrivalDate&&(r.created_at=t.arrivalDate),void 0!==t.status&&(r.status=t.status),void 0!==t.batteryPercentage&&(r.battery_percentage=t.batteryPercentage),void 0!==t.pdiCompleted&&(r.pdi_completed=t.pdiCompleted),void 0!==t.pdiDate&&(r.pdi_date=t.pdiDate),void 0!==t.pdiTechnician&&(r.pdi_technician=t.pdiTechnician),void 0!==t.pdiNotes&&(r.pdi_notes=t.pdiNotes),void 0!==t.customs&&(r.customs=t.customs),void 0!==t.currentFloor&&(r.current_location=t.currentFloor),void 0!==t.inShowroom&&(r.in_showroom=t.inShowroom),void 0!==t.showroomEntryDate&&(r.showroom_entry_date=t.showroomEntryDate),void 0!==t.showroomExitDate&&(r.showroom_exit_date=t.showroomExitDate),void 0!==t.showroomNote&&(r.showroom_note=t.showroomNote),void 0!==t.notes&&(r.notes=t.notes),void 0!==t.clientName&&(r.client_name=t.clientName),void 0!==t.clientPhone&&(r.client_phone=t.clientPhone),void 0!==t.clientLicensePlate&&(r.client_license_plate=t.clientLicensePlate),void 0!==t.clientEmail&&(r.client_email=t.clientEmail),void 0!==t.clientAddress&&(r.client_address=t.clientAddress),void 0!==t.reservedDate&&(r.reserved_date=t.reservedDate),void 0!==t.soldDate&&(r.sold_date=t.soldDate),void 0!==t.purchasePrice&&(r.purchase_price=t.purchasePrice),void 0!==t.sellingPrice&&(r.selling_price=t.sellingPrice),void 0!==t.customModelName&&(r.custom_model_name=t.customModelName),void 0!==t.shipmentCode&&(r.shipment_code=t.shipmentCode),void 0!==t.customsStatus&&(r.customs_status=t.customsStatus),void 0!==t.customsCost&&(r.customs_cost=t.customsCost),void 0!==t.shippingCost&&(r.shipping_cost=t.shippingCost),void 0!==t.processedBy&&(r.processed_by=t.processedBy),void 0!==t.paymentDate&&(r.payment_date=t.paymentDate),void 0!==t.customsDocRef&&(r.customs_doc_ref=t.customsDocRef),void 0!==t.customsNotes&&(r.customs_notes=t.customsNotes),void 0!==t.shippingStatus&&(r.shipping_status=t.shippingStatus),void 0!==t.warrantyStartDate&&(r.warranty_start_date=t.warrantyStartDate),void 0!==t.warrantyEndDate&&(r.warranty_end_date=t.warrantyEndDate),void 0!==t.warrantyMonthsRemaining&&(r.warranty_months_remaining=t.warrantyMonthsRemaining),void 0!==t.warrantyDaysRemaining&&(r.warranty_days_remaining=t.warrantyDaysRemaining),void 0!==t.warrantyStatus&&(r.warranty_status=t.warrantyStatus),void 0!==t.lastWarrantyUpdate&&(r.last_warranty_update=t.lastWarrantyUpdate);const{data:o,error:a}=yield d.from("car_inventory").update(r).eq("id",e).select().single();return{data:o,error:a}}catch(r){return{data:null,error:r}}})},deleteCar(e){return i(this,null,function*(){try{const{data:t,error:r}=yield d.from("car_inventory").delete().eq("id",e);return{data:t,error:r}}catch(t){return{data:null,error:t}}})},updateCarStatus(e,t,r){return i(this,null,function*(){try{const o={status:t,last_updated:(new Date).toISOString()};"sold"===t?o.sold_date=(new Date).toISOString():"reserved"===t&&(o.reserved_date=(new Date).toISOString()),r&&(void 0!==r.clientName&&(o.client_name=r.clientName),void 0!==r.clientPhone&&(o.client_phone=r.clientPhone),void 0!==r.clientLicensePlate&&(o.client_license_plate=r.clientLicensePlate),void 0!==r.clientEmail&&(o.client_email=r.clientEmail),void 0!==r.clientAddress&&(o.client_address=r.clientAddress));const{data:a,error:n}=yield d.from("car_inventory").update(o).eq("id",e).select().single();return{data:a,error:n}}catch(o){return{data:null,error:o}}})},moveCarToShowroom(e,t,r){return i(this,null,function*(){try{const{data:o,error:a}=yield d.from("car_inventory").update({current_floor:t,in_showroom:!0,showroom_entry_date:(new Date).toISOString(),showroom_note:r,last_updated:(new Date).toISOString()}).eq("id",e).select().single();return{data:o,error:a}}catch(o){return{data:null,error:o}}})},removeCarFromShowroom(e,t){return i(this,null,function*(){try{const{data:r,error:o}=yield d.from("car_inventory").update({current_floor:null,in_showroom:!1,showroom_exit_date:(new Date).toISOString(),showroom_note:t,last_updated:(new Date).toISOString()}).eq("id",e).select().single();return{data:r,error:o}}catch(r){return{data:null,error:r}}})}};export{c};
