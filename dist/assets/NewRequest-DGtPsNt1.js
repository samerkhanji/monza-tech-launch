import{u as e,K as s,j as t,C as r,H as l,k as a}from"./index-BmUpYGrm.js";import{r as i}from"./vendor-vN6PtkFd.js";import{u as o}from"./index-DNyRc51V.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";const d=()=>{const d=e(),{user:n}=s(),[c,u]=i.useState(!1),[m,h]=i.useState(""),[x,p]=i.useState(""),[b,v]=i.useState(""),[j,f]=i.useState("medium"),[g,y]=i.useState(null);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"New Request"}),t.jsx("p",{className:"text-muted-foreground",children:"Submit a new request to the appropriate team"})]}),t.jsx(r,{className:"p-6",children:t.jsxs("form",{onSubmit:e=>{return s=void 0,t=null,r=function*(){if(e.preventDefault(),m&&x){u(!0);try{yield new Promise(e=>setTimeout(e,1e3));const e={id:Date.now().toString(),requestType:m,message:x,details:b,priority:j,status:"submitted",submittedBy:(null==n?void 0:n.name)||"Unknown User",submittedAt:(new Date).toISOString(),comments:[]},s=localStorage.getItem("activeRequests"),t=s?JSON.parse(s):[];t.unshift(e),localStorage.setItem("activeRequests",JSON.stringify(t)),o.success("Request submitted successfully!"),d("/requests")}catch(s){o.error("Failed to submit request. Please try again.")}finally{u(!1)}}else o.error("Please fill in all required fields")},new Promise((l,a)=>{var i=s=>{try{d(r.next(s))}catch(e){a(e)}},o=s=>{try{d(r.throw(s))}catch(e){a(e)}},d=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,o);d((r=r.apply(s,t)).next())});var s,t,r},className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"requestType",className:"form-label block",children:"Request Type*"}),t.jsxs("select",{id:"requestType",className:"form-input w-full rounded-md border border-input p-2",value:m,onChange:e=>h(e.target.value),disabled:c,required:!0,children:[t.jsx("option",{value:"",disabled:!0,children:"Select request type"}),t.jsx("option",{value:"Inventory",children:"Inventory"}),t.jsx("option",{value:"Approval",children:"Approval"}),t.jsx("option",{value:"Question",children:"Question"}),t.jsx("option",{value:"Problem",children:"Problem"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"message",className:"form-label block",children:"Message*"}),t.jsx(l,{id:"message",placeholder:"Describe your request in brief...",value:x,onChange:e=>p(e.target.value),disabled:c,required:!0,className:"min-h-[80px]"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"details",className:"form-label block",children:"Detailed Information"}),t.jsx(l,{id:"details",placeholder:"Provide any additional details or context for your request...",value:b,onChange:e=>v(e.target.value),disabled:c,className:"min-h-[120px]"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Adding detailed information helps us process your request faster"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"priority",className:"form-label block",children:"Priority Level*"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"border rounded-md p-3 cursor-pointer text-center "+("low"===j?"bg-green-100 border-green-500":"hover:bg-secondary"),onClick:()=>f("low"),children:[t.jsx("div",{className:"font-medium",children:"Low"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"For non-urgent matters"})]}),t.jsxs("div",{className:"border rounded-md p-3 cursor-pointer text-center "+("medium"===j?"bg-yellow-100 border-yellow-500":"hover:bg-secondary"),onClick:()=>f("medium"),children:[t.jsx("div",{className:"font-medium",children:"Medium"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Needs attention soon"})]}),t.jsxs("div",{className:"border rounded-md p-3 cursor-pointer text-center "+("high"===j?"bg-red-100 border-red-500":"hover:bg-secondary"),onClick:()=>f("high"),children:[t.jsx("div",{className:"font-medium",children:"High"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Urgent attention required"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"file",className:"form-label block",children:"Attachment (Optional)"}),t.jsx("input",{id:"file",type:"file",className:"form-input w-full rounded-md border border-input p-2",onChange:e=>{var s;return y((null==(s=e.target.files)?void 0:s[0])||null)},disabled:c}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload any relevant documents or images"})]}),t.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[t.jsx(a,{type:"button",variant:"outline",onClick:()=>d("/requests"),disabled:c,children:"Cancel"}),t.jsx(a,{type:"submit",disabled:c,children:c?"Submitting...":"Submit Request"})]})]})})]})};export{d as default};
