var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,o=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&i(e,s,t[s]);if(r)for(var s of r(t))n.call(t,s)&&i(e,s,t[s]);return e},l=(e,r)=>t(e,s(r)),c=(e,t,s)=>i(e,"symbol"!=typeof t?t+"":t,s),d=(e,t,s)=>new Promise((r,a)=>{var n=e=>{try{o(s.next(e))}catch(t){a(t)}},i=e=>{try{o(s.throw(e))}catch(t){a(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,i);o((s=s.apply(e,t)).next())});import{a8 as u,s as h,K as p,t as m,j as g,k as x,e as y,O as v,U as j,S as f,I as w,aa as N,a_ as b,a$ as _,b0 as S,b1 as I,ae as D,al as C,b2 as q,y as U,z as O,E as M,F as A,Y as R,Z as E,_ as G,$ as k,a0 as T,H as z,C as P,a as B,ah as $}from"./index-BmUpYGrm.js";import{r as L}from"./vendor-vN6PtkFd.js";import{i as F}from"./networkConfig-GUX6G74C.js";import{B as V}from"./bell-2Hz6KiRm.js";import{P as Y}from"./phone-CUmdYfuI.js";import{I as J}from"./image-CTGCnaT4.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";
/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=u("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),H=u("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),K=u("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Z=u("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Q=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){return[]}},X=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(s){}},ee=class e{constructor(){c(this,"currentUser",null)}static getInstance(){return this.instance||(this.instance=new e),this.instance}setCurrentUser(e){this.currentUser=e}createDirectChat(e,t,s,r){return d(this,null,function*(){const a=`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n={id:a,name:`Chat with ${t}`,type:"direct",participants:[{userId:this.currentUser.id,userName:this.currentUser.name,userRole:this.currentUser.role,userEmail:this.currentUser.email,joinedAt:(new Date).toISOString(),isOnline:!0},{userId:e,userName:t,userRole:s,userEmail:r,joinedAt:(new Date).toISOString(),isOnline:!1}],unreadCount:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isActive:!0};try{yield h.from("audit_logs").insert({table_name:"audit_logs",record_id:a,action:"INSERT",new_data:n,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:(new Date).toISOString()})}catch(o){}const i=Q("chats");return i.push(n),X("chats",i),n})}createGroupInviteRequest(e,t,s,r="private"){return d(this,null,function*(){const r=`group_request_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a={id:r,groupName:e,groupDescription:t,requestedBy:this.currentUser.id,requestedByRole:this.currentUser.role,participants:s,status:"pending",createdAt:(new Date).toISOString()};try{yield h.from("audit_logs").insert({table_name:"audit_logs",record_id:r,action:"INSERT",new_data:a,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:(new Date).toISOString()})}catch(i){}const n=Q("group_invite_requests");return n.push(a),X("group_invite_requests",n),yield this.notifyOwnersOfGroupRequest(a),a})}approveGroupRequest(e,t){return d(this,null,function*(){try{try{yield h.from("audit_logs").update({new_data:{status:"approved",approvedBy:t,approvedAt:(new Date).toISOString()}}).eq("table_name","group_invite_requests").eq("record_id",e)}catch(s){}const r=Q("group_invite_requests"),a=r.findIndex(t=>t.id===e);if(-1===a)throw new Error("Group request not found");const n=r[a];n.status="approved",n.approvedBy=t,n.approvedAt=(new Date).toISOString(),X("group_invite_requests",r);const i=yield this.createGroupChat(n);return yield this.notifyGroupParticipants(n,i),i}catch(r){return null}})}denyGroupRequest(e,t,s){return d(this,null,function*(){try{try{yield h.from("audit_logs").update({new_data:{status:"denied",deniedBy:t,deniedAt:(new Date).toISOString(),reason:s}}).eq("table_name","group_invite_requests").eq("record_id",e)}catch(r){}const a=Q("group_invite_requests"),n=a.findIndex(t=>t.id===e);if(-1===n)throw new Error("Group request not found");const i=a[n];return i.status="denied",i.deniedBy=t,i.deniedAt=(new Date).toISOString(),i.reason=s,X("group_invite_requests",a),yield this.notifyGroupRequestDenied(i),!0}catch(a){return!1}})}createGroupChat(e){return d(this,null,function*(){const t=`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s={groupType:"private",description:e.groupDescription,allowMemberInvites:!0,requireAdminApproval:!0,pinnedMessages:[]},r={id:t,name:e.groupName,type:"group",participants:e.participants.map(t=>({userId:t,userName:"User",userRole:"employee",userEmail:"user@example.com",joinedAt:(new Date).toISOString(),isAdmin:t===e.requestedBy,canAddMembers:t===e.requestedBy,canRemoveMembers:t===e.requestedBy,canSendMessages:!0})),unreadCount:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isActive:!0,groupSettings:s};try{yield h.from("audit_logs").insert({table_name:"audit_logs",record_id:t,action:"INSERT",new_data:r,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:(new Date).toISOString()})}catch(n){}const a=Q("chats");return a.push(r),X("chats",a),r})}sendMessage(e,t,s="text",r){return d(this,null,function*(){const a=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n={id:a,chatId:e,senderId:this.currentUser.id,senderName:this.currentUser.name,senderRole:this.currentUser.role,content:t,messageType:s,timestamp:(new Date).toISOString(),readBy:[this.currentUser.id],replyTo:r};try{yield h.from("audit_logs").insert({table_name:"audit_logs",record_id:a,action:"INSERT",new_data:n,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:(new Date).toISOString()})}catch(o){}const i=Q("messages");return i.push(n),X("messages",i),yield this.updateChatLastMessage(e,n),n})}getChatMessages(e,t=50,s=0){return d(this,null,function*(){try{try{const{data:r,error:a}=yield h.from("audit_logs").select("*").eq("table_name","audit_logs").eq("new_data->chatId",e).order("timestamp",{ascending:!1}).range(s,s+t-1);if(!a&&r)return r.map(e=>e.new_data).filter(Boolean).reverse()}catch(r){}return Q("messages").filter(t=>t.chatId===e).sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()).slice(s,s+t)}catch(a){return[]}})}getUserChats(){return d(this,null,function*(){try{try{const{data:e,error:t}=yield h.from("audit_logs").select("*").eq("table_name","audit_logs");if(!t&&e)return e.map(e=>e.new_data).filter(e=>e.participants.some(e=>e.userId===this.currentUser.id)).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime())}catch(e){}return Q("chats").filter(e=>e.participants.some(e=>e.userId===this.currentUser.id)).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime())}catch(t){return[]}})}getPendingGroupRequests(){return d(this,null,function*(){try{try{const{data:e,error:t}=yield h.from("audit_logs").select("*").eq("table_name","audit_logs");if(!t&&e)return e.map(e=>e.new_data).filter(e=>"pending"===e.status).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}catch(e){}return Q("group_invite_requests").filter(e=>"pending"===e.status).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}catch(t){return[]}})}markMessageAsRead(e){return d(this,null,function*(){try{const t=Q("messages"),s=t.findIndex(t=>t.id===e);if(-1!==s){const e=t[s];e.readBy.includes(this.currentUser.id)||(e.readBy.push(this.currentUser.id),X("messages",t))}}catch(t){}})}updateChatLastMessage(e,t){return d(this,null,function*(){try{const s=Q("chats"),r=s.findIndex(t=>t.id===e);if(-1!==r){const e=s[r];e.lastMessage=t,e.updatedAt=(new Date).toISOString(),e.participants.forEach(t=>{t.userId!==this.currentUser.id&&(e.unreadCount=(e.unreadCount||0)+1)}),X("chats",s)}}catch(s){}})}notifyOwnersOfGroupRequest(e){return d(this,null,function*(){})}notifyGroupParticipants(e,t){return d(this,null,function*(){})}notifyGroupRequestDenied(e){return d(this,null,function*(){})}addMemberToGroup(e,t,s,r,a){return d(this,null,function*(){var n;try{const i=Q("chats"),o=i.findIndex(t=>t.id===e);if(-1===o)throw new Error("Chat not found");const l=i[o],c=l.participants.find(e=>e.userId===this.currentUser.id);if(!(null==c?void 0:c.canAddMembers)&&"OWNER"!==(null==(n=this.currentUser.role)?void 0:n.toUpperCase()))throw new Error("You do not have permission to add members to this group");if(l.participants.some(e=>e.userId===t))throw new Error("User is already a member of this group");return l.participants.push({userId:t,userName:s,userRole:r,userEmail:a,joinedAt:(new Date).toISOString(),canAddMembers:!1,canRemoveMembers:!1,canSendMessages:!0}),l.updatedAt=(new Date).toISOString(),X("chats",i),!0}catch(i){return!1}})}removeMemberFromGroup(e,t){return d(this,null,function*(){var s;try{const r=Q("chats"),a=r.findIndex(t=>t.id===e);if(-1===a)throw new Error("Chat not found");const n=r[a],i=n.participants.find(e=>e.userId===this.currentUser.id);if(!(null==i?void 0:i.canRemoveMembers)&&"OWNER"!==(null==(s=this.currentUser.role)?void 0:s.toUpperCase()))throw new Error("You do not have permission to remove members from this group");return n.participants=n.participants.filter(e=>e.userId!==t),n.updatedAt=(new Date).toISOString(),X("chats",r),!0}catch(r){return!1}})}};
/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */c(ee,"instance");const te=ee.getInstance(),se=()=>{var e;const{user:t}=p(),[s,r]=L.useState([]),[a,n]=L.useState(null),[i,c]=L.useState([]),[u,h]=L.useState(""),[Q,X]=L.useState(""),[ee,se]=L.useState(!0),[re,ae]=L.useState(!1),[ne,ie]=L.useState(!1),[oe,le]=L.useState(!1),[ce,de]=L.useState([]),[ue,he]=L.useState({groupName:"",groupDescription:"",participants:[]}),pe=L.useRef(null),me=!!t&&F(t.role);L.useEffect(()=>{t&&(te.setCurrentUser(t),ge(),me&&xe())},[t,me]),L.useEffect(()=>{var e;null==(e=pe.current)||e.scrollIntoView({behavior:"smooth"})},[i]);const ge=()=>d(void 0,null,function*(){try{se(!0);const e=yield te.getUserChats();r(e)}catch(e){m({title:"Error",description:"Failed to load chats",variant:"destructive"})}finally{se(!1)}}),xe=()=>d(void 0,null,function*(){try{const e=yield te.getPendingGroupRequests();de(e)}catch(e){}}),ye=e=>d(void 0,null,function*(){var t;n(e),yield(t=e.id,d(void 0,null,function*(){try{const e=yield te.getChatMessages(t);c(e)}catch(e){m({title:"Error",description:"Failed to load messages",variant:"destructive"})}}))}),ve=()=>d(void 0,null,function*(){if(u.trim()&&a)try{const e=yield te.sendMessage(a.id,u.trim());c(t=>[...t,e]),h(""),r(t=>t.map(t=>t.id===a.id?l(o({},t),{lastMessage:e,updatedAt:(new Date).toISOString()}):t))}catch(e){m({title:"Error",description:"Failed to send message",variant:"destructive"})}}),je=s.filter(e=>{var t;return e.name.toLowerCase().includes(Q.toLowerCase())||(null==(t=e.lastMessage)?void 0:t.content.toLowerCase().includes(Q.toLowerCase()))}),fe=e=>{const t=new Date(e),s=((new Date).getTime()-t.getTime())/36e5;return s<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s<48?"Yesterday":t.toLocaleDateString()},we=e=>e.readBy.length>1?g.jsx(W,{className:"w-4 h-4 text-blue-500"}):e.senderId===(null==t?void 0:t.id)?g.jsx($,{className:"w-4 h-4 text-gray-400"}):null;return g.jsxs("div",{className:"flex h-screen bg-gray-50",children:[g.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[g.jsxs("div",{className:"p-4 border-b border-gray-200",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h1",{className:"text-xl font-bold",children:"Messaging Center"}),g.jsxs("div",{className:"flex gap-2",children:[me&&g.jsxs(x,{variant:"outline",size:"sm",onClick:()=>le(!0),className:"relative",children:[g.jsx(V,{className:"w-4 h-4"}),ce.length>0&&g.jsx(y,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs",children:ce.length})]}),g.jsx(x,{variant:"outline",size:"sm",onClick:()=>ae(!0),children:g.jsx(v,{className:"w-4 h-4"})}),g.jsx(x,{variant:"outline",size:"sm",onClick:()=>ie(!0),children:g.jsx(j,{className:"w-4 h-4"})})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),g.jsx(w,{placeholder:"Search chats...",value:Q,onChange:e=>X(e.target.value),className:"pl-10"})]})]}),g.jsx(N,{className:"flex-1",children:ee?g.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading chats..."}):0===je.length?g.jsx("div",{className:"p-4 text-center text-gray-500",children:"No chats found"}):je.map(e=>{var t;return g.jsx("div",{onClick:()=>ye(e),className:"p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors "+((null==a?void 0:a.id)===e.id?"bg-blue-50 border-blue-200":""),children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs(b,{className:"h-10 w-10",children:[g.jsx(_,{src:""}),g.jsx(S,{className:"bg-blue-100 text-blue-600",children:"group"===e.type?g.jsx(j,{className:"w-5 h-5"}):e.name.charAt(0).toUpperCase()})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.name}),e.lastMessage&&g.jsx("span",{className:"text-xs text-gray-500",children:fe(e.lastMessage.timestamp)})]}),g.jsxs("div",{className:"flex items-center justify-between mt-1",children:[g.jsx("p",{className:"text-sm text-gray-600 truncate",children:(null==(t=e.lastMessage)?void 0:t.content)||"No messages yet"}),e.unreadCount>0&&g.jsx(y,{className:"ml-2 bg-blue-500 text-white text-xs",children:e.unreadCount})]})]})]})},e.id)})})]}),g.jsx("div",{className:"flex-1 flex flex-col",children:a?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs(b,{className:"h-10 w-10",children:[g.jsx(_,{src:""}),g.jsx(S,{className:"bg-blue-100 text-blue-600",children:"group"===a.type?g.jsx(j,{className:"w-5 h-5"}):a.name.charAt(0).toUpperCase()})]}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-semibold text-gray-900",children:a.name}),g.jsx("p",{className:"text-sm text-gray-500",children:"group"===a.type?`${a.participants.length} members`:(null==(e=a.participants.find(e=>e.userId!==(null==t?void 0:t.id)))?void 0:e.userRole)||"User"})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(x,{variant:"ghost",size:"sm",children:g.jsx(Y,{className:"w-4 h-4"})}),g.jsx(x,{variant:"ghost",size:"sm",children:g.jsx(Z,{className:"w-4 h-4"})}),g.jsx(x,{variant:"ghost",size:"sm",children:g.jsx(I,{className:"w-4 h-4"})})]})]})}),g.jsx(N,{className:"flex-1 p-4",children:g.jsxs("div",{className:"space-y-4",children:[i.map(e=>g.jsx("div",{className:"flex "+(e.senderId===(null==t?void 0:t.id)?"justify-end":"justify-start"),children:g.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+(e.senderId===(null==t?void 0:t.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("span",{className:"text-xs opacity-75",children:e.senderName}),"owner"===e.senderRole&&g.jsx(D,{className:"w-3 h-3 text-yellow-400"})]}),g.jsx("p",{className:"text-sm",children:e.content}),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsx("span",{className:"text-xs opacity-75",children:fe(e.timestamp)}),we(e)]})]})},e.id)),g.jsx("div",{ref:pe})]})}),g.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(x,{variant:"ghost",size:"sm",children:g.jsx(K,{className:"w-4 h-4"})}),g.jsx(x,{variant:"ghost",size:"sm",children:g.jsx(J,{className:"w-4 h-4"})}),g.jsx(x,{variant:"ghost",size:"sm",children:g.jsx(H,{className:"w-4 h-4"})}),g.jsx(w,{value:u,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&ve(),placeholder:"Type a message...",className:"flex-1"}),g.jsx(x,{onClick:ve,disabled:!u.trim(),children:g.jsx(C,{className:"w-4 h-4"})})]})})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx(q,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),g.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Welcome to Messaging Center"}),g.jsx("p",{className:"text-gray-500",children:"Select a chat to start messaging"})]})})}),g.jsx(U,{open:re,onOpenChange:ae,children:g.jsxs(O,{children:[g.jsx(M,{children:g.jsx(A,{children:"Start New Chat"})}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(w,{id:"userId",placeholder:"User ID"}),g.jsx(w,{id:"userName",placeholder:"User Name"}),g.jsx(w,{id:"userEmail",placeholder:"User Email"}),g.jsxs(R,{children:[g.jsx(E,{id:"userRole",children:g.jsx(G,{placeholder:"User Role"})}),g.jsxs(k,{children:[g.jsx(T,{value:"employee",children:"Employee"}),g.jsx(T,{value:"manager",children:"Manager"}),g.jsx(T,{value:"owner",children:"Owner"})]})]}),g.jsx(x,{onClick:()=>{return e="user1",t="John Doe",s="employee",a="john@example.com",d(void 0,null,function*(){try{const n=yield te.createDirectChat(e,t,s,a);r(e=>[n,...e]),ae(!1),m({title:"Chat Created",description:`Direct chat created with ${t}`})}catch(n){m({title:"Error",description:"Failed to create chat",variant:"destructive"})}});var e,t,s,a},children:"Create Chat"})]})]})}),g.jsx(U,{open:ne,onOpenChange:ie,children:g.jsxs(O,{children:[g.jsx(M,{children:g.jsx(A,{children:"Create Group Request"})}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(w,{placeholder:"Group Name",value:ue.groupName,onChange:e=>he(t=>l(o({},t),{groupName:e.target.value}))}),g.jsx(z,{placeholder:"Group Description",value:ue.groupDescription,onChange:e=>he(t=>l(o({},t),{groupDescription:e.target.value}))}),g.jsx(w,{id:"participantIds",placeholder:"Participant IDs (comma-separated)"}),g.jsx(x,{onClick:()=>d(void 0,null,function*(){if(ue.groupName.trim()&&0!==ue.participants.length)try{yield te.createGroupInviteRequest(ue.groupName,ue.groupDescription,ue.participants);ie(!1),he({groupName:"",groupDescription:"",participants:[]}),m({title:"Group Request Sent",description:"Your group creation request has been sent to owners for approval"})}catch(e){m({title:"Error",description:"Failed to create group request",variant:"destructive"})}else m({title:"Validation Error",description:"Please provide group name and select participants",variant:"destructive"})}),children:"Send Group Request"})]})]})}),me&&g.jsx(U,{open:oe,onOpenChange:le,children:g.jsxs(O,{className:"max-w-2xl",children:[g.jsx(M,{children:g.jsx(A,{children:"Pending Group Requests"})}),g.jsx(N,{className:"max-h-96",children:0===ce.length?g.jsx("p",{className:"text-center text-gray-500 py-4",children:"No pending group requests"}):g.jsx("div",{className:"space-y-4",children:ce.map(e=>g.jsx(P,{children:g.jsxs(B,{className:"p-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h4",{className:"font-medium",children:e.groupName}),g.jsx(y,{variant:"secondary",children:"Pending"})]}),g.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.groupDescription}),g.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Requested by: ",e.requestedBy," • ",new Date(e.createdAt).toLocaleDateString()]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(x,{size:"sm",onClick:()=>{return s=e.id,d(void 0,null,function*(){try{const e=yield te.approveGroupRequest(s,(null==t?void 0:t.id)||"");e&&(r(t=>[e,...t]),de(e=>e.filter(e=>e.id!==s)),m({title:"Group Approved",description:`Group "${e.name}" has been created`}))}catch(e){m({title:"Error",description:"Failed to approve group request",variant:"destructive"})}});var s},children:"Approve"}),g.jsx(x,{size:"sm",variant:"outline",onClick:()=>{return s=e.id,r="Denied by owner",d(void 0,null,function*(){try{(yield te.denyGroupRequest(s,(null==t?void 0:t.id)||"",r))&&(de(e=>e.filter(e=>e.id!==s)),m({title:"Group Request Denied",description:"Group request has been denied"}))}catch(e){m({title:"Error",description:"Failed to deny group request",variant:"destructive"})}});var s,r},children:"Deny"})]})]})},e.id))})})]})})]})};export{se as default};
