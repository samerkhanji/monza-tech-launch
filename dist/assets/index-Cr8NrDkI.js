var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&l(e,a,s[a]);if(t)for(var a of t(s))i.call(s,a)&&l(e,a,s[a]);return e},o=(e,t)=>s(e,a(t)),c=(e,s,a)=>l(e,"symbol"!=typeof s?s+"":s,a);import{j as d,y as u,z as h,E as x,F as m,L as p,I as g,k as j,t as v,x as y,p as N,q as f,r as b,v as w,C as S,g as C,h as T,a as D,Y as P,Z as L,_ as A,$ as O,a0 as F,H as E,D as V,e as R,d as B,at as H,f as I,m as q,ak as $,O as M,P as U,S as k,n as z,o as _,a6 as G,ad as Z,V as J,a3 as K,ao as W,W as Y}from"./index-BmUpYGrm.js";import{r as Q}from"./vendor-vN6PtkFd.js";import{T as X,a as ee,b as se,c as ae,d as te,e as re}from"./table-BEISn_Te.js";import{b as ie}from"./errorHandling-Dc1u_gNS.js";import{C as le}from"./calculator-D7ZZJlp5.js";import{D as ne}from"./download-CLPHGjzE.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";const oe=new class{constructor(){c(this,"tools",[]),c(this,"usageSessions",[]),this.loadData(),this.initializeSampleData()}loadData(){try{const e=localStorage.getItem("toolsEquipment"),s=localStorage.getItem("toolsUsageSessions");e&&(this.tools=JSON.parse(e)),s&&(this.usageSessions=JSON.parse(s))}catch(e){}}saveData(){try{localStorage.setItem("toolsEquipment",JSON.stringify(this.tools)),localStorage.setItem("toolsUsageSessions",JSON.stringify(this.usageSessions))}catch(e){}}initializeSampleData(){if(0===this.tools.length){const e=[{id:"tool-001",name:"Professional Diagnostic Scanner",type:"equipment",category:"Diagnostic Equipment",purchasePrice:3500,currentValue:2800,purchaseDate:"2023-01-15",supplier:"Auto Diagnostic Pro",location:"garage",description:"Advanced OBD-II scanner for all car models",usageHours:245,lastUsed:"2025-01-10",depreciationRate:20,condition:"excellent",assignedTo:"Ahmed Hassan",maintenanceHistory:[],purchasedBy:"Manager",notes:"Essential for garage operations",serialNumber:"ADP-2023-001",warrantyExpiry:"2026-01-15",isActive:!0,createdAt:"2023-01-15T10:00:00Z",updatedAt:"2025-01-10T14:30:00Z"},{id:"tool-002",name:"Hydraulic Car Lift",type:"equipment",category:"Lifting Equipment",purchasePrice:8500,currentValue:6800,purchaseDate:"2022-08-20",supplier:"Garage Equipment Ltd",location:"garage",description:"Two-post hydraulic lift, 4000kg capacity",usageHours:1200,lastUsed:"2025-01-09",depreciationRate:10,condition:"good",assignedTo:null,maintenanceHistory:[{id:"maint-001",date:"2024-12-01",type:"maintenance",description:"Regular hydraulic oil change",cost:150,performedBy:"Service Technician",notes:"All systems operating normally"}],purchasedBy:"Owner",notes:"Main lift for heavy repairs",serialNumber:"GEL-2022-HL4000",warrantyExpiry:"2027-08-20",isActive:!0,createdAt:"2022-08-20T09:00:00Z",updatedAt:"2024-12-01T16:00:00Z"},{id:"tool-003",name:"Customer Display Screen",type:"equipment",category:"Customer Experience",purchasePrice:1200,currentValue:840,purchaseDate:"2023-11-01",supplier:"Digital Display Solutions",location:"showroom",description:'55" 4K display for customer presentations',usageHours:2800,lastUsed:"2025-01-10",depreciationRate:25,condition:"good",assignedTo:"Sales Team",maintenanceHistory:[],purchasedBy:"Sales Manager",notes:"Used for car feature presentations",serialNumber:"DDS-55-4K-2023",warrantyExpiry:"2026-11-01",isActive:!0,createdAt:"2023-11-01T14:00:00Z",updatedAt:"2025-01-10T17:00:00Z"}];this.tools=e,this.saveData()}}calculateDepreciation(e){const s=new Date(e.purchaseDate),a=((new Date).getTime()-s.getTime())/315576e5,t=e.purchasePrice*(e.depreciationRate/100),r=t*a,i=Math.max(e.purchasePrice-r,.1*e.purchasePrice);return{originalValue:e.purchasePrice,currentValue:Math.round(100*i)/100,depreciatedAmount:Math.round(100*(e.purchasePrice-i))/100,yearsOwned:Math.round(10*a)/10,annualDepreciation:Math.round(100*t)/100,depreciationRate:e.depreciationRate}}updateAllDepreciationValues(){this.tools=this.tools.map(e=>{const s=this.calculateDepreciation(e);return o(n({},e),{currentValue:s.currentValue,updatedAt:(new Date).toISOString()})}),this.saveData()}addTool(e){const s=o(n({},e),{id:`tool-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentValue:e.purchasePrice,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()});return this.tools.push(s),this.saveData(),s}updateTool(e,s){const a=this.tools.findIndex(s=>s.id===e);return-1===a?null:(this.tools[a]=o(n(n({},this.tools[a]),s),{updatedAt:(new Date).toISOString()}),this.saveData(),this.tools[a])}deleteTool(e){const s=this.tools.findIndex(s=>s.id===e);return-1!==s&&(this.tools.splice(s,1),this.saveData(),!0)}sellTool(e,s){const a=this.tools.findIndex(s=>s.id===e);return-1===a?null:(this.tools[a]=o(n({},this.tools[a]),{isActive:!1,saleInfo:o(n({},s),{saleDate:(new Date).toISOString()}),updatedAt:(new Date).toISOString()}),this.saveData(),this.tools[a])}getActiveTools(){return this.tools.filter(e=>e.isActive)}getSoldTools(){return this.tools.filter(e=>!e.isActive&&e.saleInfo)}getAllTools(){return[...this.tools]}getToolsByLocation(e){return this.tools.filter(s=>s.location===e)}getToolsByType(e){return this.tools.filter(s=>s.type===e)}startUsageSession(e,s,a,t=""){const r={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,toolId:e,startTime:(new Date).toISOString(),endTime:null,usedBy:s,project:a,notes:t,hours:0};return this.usageSessions.push(r),this.saveData(),r}endUsageSession(e){const s=this.usageSessions.find(s=>s.id===e);if(!s||s.endTime)return null;const a=(new Date).toISOString(),t=(new Date(a).getTime()-new Date(s.startTime).getTime())/36e5;s.endTime=a,s.hours=Math.round(10*t)/10;const r=this.tools.find(e=>e.id===s.toolId);return r&&(r.usageHours+=s.hours,r.lastUsed=a,r.updatedAt=a),this.saveData(),s}getToolUsageSessions(e){return this.usageSessions.filter(s=>s.toolId===e)}addMaintenanceRecord(e,s){const a=this.tools.find(s=>s.id===e);if(!a)return null;const t=o(n({},s),{id:`maint-${Date.now()}-${Math.random().toString(36).substr(2,9)}`});return a.maintenanceHistory.push(t),a.updatedAt=(new Date).toISOString(),this.saveData(),t}getToolsSummary(){this.updateAllDepreciationValues();const e=this.tools.filter(e=>e.isActive),s=e.reduce((e,s)=>e+s.purchasePrice,0),a=e.reduce((e,s)=>e+s.currentValue,0),t={},r={},i={};e.forEach(e=>{t[e.location]=(t[e.location]||0)+1,r[e.type]=(r[e.type]||0)+1,i[e.condition]=(i[e.condition]||0)+1});const l=e.filter(e=>"poor"===e.condition||"needs_repair"===e.condition||e.usageHours>500&&"equipment"===e.type||e.usageHours>200&&"tool"===e.type);return{totalTools:e.length,totalValue:Math.round(100*s)/100,totalCurrentValue:Math.round(100*a)/100,totalDepreciation:Math.round(100*(s-a))/100,byLocation:t,byType:r,byCondition:i,needingMaintenance:l}}exportData(){const e={tools:this.tools,usageSessions:this.usageSessions,exportDate:(new Date).toISOString(),version:"1.0"};return JSON.stringify(e,null,2)}importData(e){try{const s=JSON.parse(e);return s.tools&&Array.isArray(s.tools)&&(this.tools=s.tools),s.usageSessions&&Array.isArray(s.usageSessions)&&(this.usageSessions=s.usageSessions),this.saveData(),!0}catch(s){return!1}}searchTools(e){const s=e.toLowerCase().trim();return s?this.tools.filter(e=>e.name.toLowerCase().includes(s)||e.category.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.supplier.toLowerCase().includes(s)||e.assignedTo&&e.assignedTo.toLowerCase().includes(s)||e.serialNumber&&e.serialNumber.toLowerCase().includes(s)):this.tools}},ce=({isOpen:e,onClose:s,onSave:a})=>{const[t,r]=Q.useState({name:"",type:"tool",category:"",purchasePrice:"",location:"garage",description:"",purchasedBy:""});return d.jsx(u,{open:e,onOpenChange:s,children:d.jsxs(h,{className:"max-w-lg",children:[d.jsx(x,{children:d.jsx(m,{children:"Add New Tool/Equipment"})}),d.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!t.name||!t.category||!t.purchasePrice)return void v({title:"Validation Error",description:"Please fill in required fields",variant:"destructive"});const r=o(n({},t),{purchasePrice:ie(t.purchasePrice,0),purchaseDate:(new Date).toISOString().split("T")[0],supplier:"",usageHours:0,lastUsed:null,depreciationRate:20,condition:"excellent",assignedTo:null,maintenanceHistory:[],notes:"",isActive:!0});a(r),s()},className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"name",children:"Name *"}),d.jsx(g,{id:"name",value:t.name,onChange:e=>r(s=>o(n({},s),{name:e.target.value})),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"type",children:"Type"}),d.jsxs("select",{id:"type",className:"h-10 w-full rounded-md border px-3",value:t.type,onChange:e=>r(s=>o(n({},s),{type:e.target.value})),children:[d.jsx("option",{value:"tool",children:"Tool"}),d.jsx("option",{value:"equipment",children:"Equipment"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"category",children:"Category *"}),d.jsx(g,{id:"category",value:t.category,onChange:e=>r(s=>o(n({},s),{category:e.target.value})),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"location",children:"Location"}),d.jsxs("select",{id:"location",className:"h-10 w-full rounded-md border px-3",value:t.location,onChange:e=>r(s=>o(n({},s),{location:e.target.value})),children:[d.jsx("option",{value:"garage",children:"Garage"}),d.jsx("option",{value:"showroom",children:"Showroom"}),d.jsx("option",{value:"events",children:"Events"}),d.jsx("option",{value:"office",children:"Office"}),d.jsx("option",{value:"storage",children:"Storage"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"purchasePrice",children:"Purchase Price ($) *"}),d.jsx(g,{id:"purchasePrice",type:"number",step:"0.01",value:t.purchasePrice,onChange:e=>r(s=>o(n({},s),{purchasePrice:e.target.value})),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"purchasedBy",children:"Purchased By"}),d.jsx(g,{id:"purchasedBy",value:t.purchasedBy,onChange:e=>r(s=>o(n({},s),{purchasedBy:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"description",children:"Description"}),d.jsx(g,{id:"description",value:t.description,onChange:e=>r(s=>o(n({},s),{description:e.target.value}))})]}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx(j,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),d.jsx(j,{type:"submit",children:"Add Tool"})]})]})]})})},de=({isOpen:e,tool:s,onClose:a,onSave:t})=>{var r;const[i,l]=Q.useState({name:"",type:"tool",category:"",purchasePrice:"",location:"garage",description:"",purchasedBy:"",supplier:"",usageHours:"",depreciationRate:"",condition:"excellent",assignedTo:"",notes:"",serialNumber:"",warrantyExpiry:"",purchaseDate:""});Q.useEffect(()=>{var e,a,t,r;s&&l({name:s.name||"",type:s.type||"tool",category:s.category||"",purchasePrice:(null==(e=s.purchasePrice)?void 0:e.toString())||"",location:s.location||"garage",description:s.description||"",purchasedBy:s.purchasedBy||"",supplier:s.supplier||"",usageHours:(null==(a=s.usageHours)?void 0:a.toString())||"0",depreciationRate:(null==(t=s.depreciationRate)?void 0:t.toString())||"20",condition:s.condition||"excellent",assignedTo:s.assignedTo||"",notes:s.notes||"",serialNumber:s.serialNumber||"",warrantyExpiry:s.warrantyExpiry||"",purchaseDate:(null==(r=s.purchaseDate)?void 0:r.split("T")[0])||""})},[s]);return s?d.jsx(u,{open:e,onOpenChange:a,children:d.jsxs(h,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsx(x,{children:d.jsxs(m,{className:"flex items-center gap-2",children:[d.jsx(y,{className:"h-5 w-5 text-blue-600"}),"Edit Tool: ",s.name]})}),d.jsxs(N,{defaultValue:"basic",className:"w-full",children:[d.jsxs(f,{className:"grid w-full grid-cols-3",children:[d.jsx(b,{value:"basic",children:"Basic Information"}),d.jsx(b,{value:"financial",children:"Financial & Usage"}),d.jsx(b,{value:"details",children:"Additional Details"})]}),d.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!i.name||!i.category||!i.purchasePrice)return void v({title:"Validation Error",description:"Please fill in required fields",variant:"destructive"});const s={name:i.name,type:i.type,category:i.category,purchasePrice:ie(i.purchasePrice,0),location:i.location,description:i.description,purchasedBy:i.purchasedBy,supplier:i.supplier,usageHours:ie(i.usageHours,0),depreciationRate:ie(i.depreciationRate,20),condition:i.condition,assignedTo:i.assignedTo||null,notes:i.notes,serialNumber:i.serialNumber||void 0,warrantyExpiry:i.warrantyExpiry||void 0,purchaseDate:i.purchaseDate};t(s),a()},children:[d.jsx(w,{value:"basic",className:"space-y-4",children:d.jsxs(S,{children:[d.jsx(C,{children:d.jsx(T,{className:"text-lg",children:"Basic Information"})}),d.jsxs(D,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"name",children:"Name *"}),d.jsx(g,{id:"name",value:i.name,onChange:e=>l(s=>o(n({},s),{name:e.target.value})),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"type",children:"Type"}),d.jsxs(P,{value:i.type,onValueChange:e=>l(s=>o(n({},s),{type:e})),children:[d.jsx(L,{id:"type",children:d.jsx(A,{})}),d.jsxs(O,{children:[d.jsx(F,{value:"tool",children:"Tool"}),d.jsx(F,{value:"equipment",children:"Equipment"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"category",children:"Category *"}),d.jsx(g,{id:"category",value:i.category,onChange:e=>l(s=>o(n({},s),{category:e.target.value})),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"location",children:"Location"}),d.jsxs(P,{value:i.location,onValueChange:e=>l(s=>o(n({},s),{location:e})),children:[d.jsx(L,{id:"location",children:d.jsx(A,{})}),d.jsxs(O,{children:[d.jsx(F,{value:"garage",children:"Garage"}),d.jsx(F,{value:"showroom",children:"Showroom"}),d.jsx(F,{value:"events",children:"Events"}),d.jsx(F,{value:"office",children:"Office"}),d.jsx(F,{value:"storage",children:"Storage"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"condition",children:"Condition"}),d.jsxs(P,{value:i.condition,onValueChange:e=>l(s=>o(n({},s),{condition:e})),children:[d.jsx(L,{id:"condition",children:d.jsx(A,{})}),d.jsxs(O,{children:[d.jsx(F,{value:"excellent",children:"Excellent"}),d.jsx(F,{value:"good",children:"Good"}),d.jsx(F,{value:"fair",children:"Fair"}),d.jsx(F,{value:"poor",children:"Poor"}),d.jsx(F,{value:"needs_repair",children:"Needs Repair"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"assignedTo",children:"Assigned To"}),d.jsx(g,{id:"assignedTo",value:i.assignedTo,onChange:e=>l(s=>o(n({},s),{assignedTo:e.target.value})),placeholder:"Employee name"})]}),d.jsxs("div",{className:"space-y-2 md:col-span-2",children:[d.jsx(p,{htmlFor:"description",children:"Description"}),d.jsx(E,{id:"description",value:i.description,onChange:e=>l(s=>o(n({},s),{description:e.target.value})),rows:3})]})]})]})}),d.jsx(w,{value:"financial",className:"space-y-4",children:d.jsxs(S,{children:[d.jsx(C,{children:d.jsx(T,{className:"text-lg",children:"Financial & Usage Information"})}),d.jsxs(D,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"purchasePrice",children:"Purchase Price ($) *"}),d.jsx(g,{id:"purchasePrice",type:"number",step:"0.01",value:i.purchasePrice,onChange:e=>l(s=>o(n({},s),{purchasePrice:e.target.value})),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"purchaseDate",children:"Purchase Date"}),d.jsx(g,{id:"purchaseDate",type:"date",value:i.purchaseDate,onChange:e=>l(s=>o(n({},s),{purchaseDate:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"depreciationRate",children:"Depreciation Rate (% per year)"}),d.jsx(g,{id:"depreciationRate",type:"number",step:"0.1",value:i.depreciationRate,onChange:e=>l(s=>o(n({},s),{depreciationRate:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"usageHours",children:"Usage Hours"}),d.jsx(g,{id:"usageHours",type:"number",step:"0.1",value:i.usageHours,onChange:e=>l(s=>o(n({},s),{usageHours:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"supplier",children:"Supplier"}),d.jsx(g,{id:"supplier",value:i.supplier,onChange:e=>l(s=>o(n({},s),{supplier:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"purchasedBy",children:"Purchased By"}),d.jsx(g,{id:"purchasedBy",value:i.purchasedBy,onChange:e=>l(s=>o(n({},s),{purchasedBy:e.target.value}))})]}),d.jsxs("div",{className:"md:col-span-2 bg-gray-50 p-4 rounded-lg",children:[d.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[d.jsx(V,{className:"h-4 w-4"}),"Current Status"]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Current Value:"}),d.jsxs("p",{className:"font-medium",children:["$",null==(r=s.currentValue)?void 0:r.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Last Used:"}),d.jsx("p",{className:"font-medium",children:s.lastUsed?new Date(s.lastUsed).toLocaleDateString():"Never"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Condition:"}),d.jsx(R,{className:(e=>{switch(e){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"needs_repair":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(s.condition),children:s.condition.replace("_"," ")})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Status:"}),d.jsx(R,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"})]})]})]})]})]})}),d.jsx(w,{value:"details",className:"space-y-4",children:d.jsxs(S,{children:[d.jsx(C,{children:d.jsx(T,{className:"text-lg",children:"Additional Details"})}),d.jsxs(D,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"serialNumber",children:"Serial Number"}),d.jsx(g,{id:"serialNumber",value:i.serialNumber,onChange:e=>l(s=>o(n({},s),{serialNumber:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"warrantyExpiry",children:"Warranty Expiry"}),d.jsx(g,{id:"warrantyExpiry",type:"date",value:i.warrantyExpiry,onChange:e=>l(s=>o(n({},s),{warrantyExpiry:e.target.value}))})]}),d.jsxs("div",{className:"space-y-2 md:col-span-2",children:[d.jsx(p,{htmlFor:"notes",children:"Notes"}),d.jsx(E,{id:"notes",value:i.notes,onChange:e=>l(s=>o(n({},s),{notes:e.target.value})),rows:4,placeholder:"Additional notes, maintenance reminders, special instructions..."})]}),s.maintenanceHistory&&s.maintenanceHistory.length>0&&d.jsxs("div",{className:"md:col-span-2",children:[d.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[d.jsx(B,{className:"h-4 w-4"}),"Recent Maintenance History"]}),d.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.maintenanceHistory.slice(-3).map((e,s)=>d.jsx("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-blue-500",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-sm",children:e.description}),d.jsxs("p",{className:"text-xs text-gray-600",children:[new Date(e.date).toLocaleDateString()," • $",e.cost," • ",e.performedBy]})]}),d.jsx(R,{variant:"outline",className:"text-xs",children:e.type})]})},s))})]})]})]})}),d.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[d.jsxs("div",{className:"text-sm text-gray-500",children:["Created: ",new Date(s.createdAt).toLocaleDateString()," • Last Updated: ",new Date(s.updatedAt).toLocaleDateString()]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(j,{type:"button",variant:"outline",onClick:()=>{var e,a,t,r;s&&l({name:s.name||"",type:s.type||"tool",category:s.category||"",purchasePrice:(null==(e=s.purchasePrice)?void 0:e.toString())||"",location:s.location||"garage",description:s.description||"",purchasedBy:s.purchasedBy||"",supplier:s.supplier||"",usageHours:(null==(a=s.usageHours)?void 0:a.toString())||"0",depreciationRate:(null==(t=s.depreciationRate)?void 0:t.toString())||"20",condition:s.condition||"excellent",assignedTo:s.assignedTo||"",notes:s.notes||"",serialNumber:s.serialNumber||"",warrantyExpiry:s.warrantyExpiry||"",purchaseDate:(null==(r=s.purchaseDate)?void 0:r.split("T")[0])||""})},children:"Reset"}),d.jsx(j,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),d.jsx(j,{type:"submit",children:"Save Changes"})]})]})]})]})]})}):null},ue=({isOpen:e,tool:s,onClose:a})=>{var t,r;return s?d.jsx(u,{open:e,onOpenChange:a,children:d.jsxs(h,{className:"max-w-2xl",children:[d.jsx(x,{children:d.jsx(m,{children:s.name})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Type"}),d.jsx(R,{variant:"outline",children:s.type})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Category"}),d.jsx("p",{children:s.category})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Location"}),d.jsx("p",{className:"capitalize",children:s.location})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Condition"}),d.jsx(R,{children:s.condition})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Purchase Price"}),d.jsxs("p",{children:["$",null==(t=s.purchasePrice)?void 0:t.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Current Value"}),d.jsxs("p",{children:["$",null==(r=s.currentValue)?void 0:r.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Usage Hours"}),d.jsxs("p",{children:[s.usageHours,"h"]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Assigned To"}),d.jsx("p",{children:s.assignedTo||"Unassigned"})]})]}),s.description&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Description"}),d.jsx("p",{children:s.description})]}),s.notes&&d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium",children:"Notes"}),d.jsx("p",{children:s.notes})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx(j,{onClick:a,children:"Close"})})]})]})}):null},he=({isOpen:e,onClose:s})=>{const[a,t]=Q.useState(""),[r,i]=Q.useState(""),[l,n]=Q.useState("straight-line"),[o,c]=Q.useState("5"),[v,y]=Q.useState("0"),[N,f]=Q.useState("good"),[b,w]=Q.useState("0"),E=a&&r?(()=>{const e=ie(a,0),s=ie(v,0),t=ie(o,5),i=ie(b,0),n=new Date(r),c=((new Date).getTime()-n.getTime())/315576e5;let d=e,u=0,h=0;if("straight-line"===l)u=(e-s)/t,h=Math.min(u*c,e-s),d=Math.max(e-h,s);else if("declining-balance"===l){const e=2/t;for(let a=0;a<c;a++){const a=Math.min(d*e,d-s);d-=a,h+=a}}else if("usage-based"===l){const a=(e-s)/(2e3*t);h=Math.min(i*a,e-s),d=Math.max(e-h,s)}return d*={excellent:1.1,good:1,fair:.8,poor:.6,needs_repair:.4}[N]||1,{originalValue:e,currentValue:Math.max(d,0),totalDepreciation:e-Math.max(d,0),annualDepreciation:u,depreciationRate:t>0?(e-Math.max(d,0))/e*100:0,yearsElapsed:Math.max(c,0)}})():null;return d.jsx(u,{open:e,onOpenChange:s,children:d.jsxs(h,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsx(x,{children:d.jsxs(m,{className:"flex items-center gap-2",children:[d.jsx(le,{className:"h-5 w-5 text-purple-600"}),"Depreciation Calculator"]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs(S,{children:[d.jsx(C,{children:d.jsx(T,{className:"text-lg",children:"Tool/Equipment Information"})}),d.jsxs(D,{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(p,{htmlFor:"purchasePrice",children:"Purchase Price ($) *"}),d.jsx(g,{id:"purchasePrice",type:"number",placeholder:"e.g., 5000",value:a,onChange:e=>t(e.target.value)})]}),d.jsxs("div",{children:[d.jsx(p,{htmlFor:"purchaseDate",children:"Purchase Date *"}),d.jsx(g,{id:"purchaseDate",type:"date",value:r,onChange:e=>i(e.target.value)})]}),d.jsxs("div",{children:[d.jsx(p,{htmlFor:"depreciationMethod",children:"Depreciation Method"}),d.jsxs(P,{value:l,onValueChange:n,children:[d.jsx(L,{id:"depreciationMethod",children:d.jsx(A,{})}),d.jsxs(O,{children:[d.jsx(F,{value:"straight-line",children:"Straight Line"}),d.jsx(F,{value:"declining-balance",children:"Declining Balance"}),d.jsx(F,{value:"usage-based",children:"Usage Based"})]})]})]}),d.jsxs("div",{children:[d.jsx(p,{htmlFor:"usefulLife",children:"Useful Life (years)"}),d.jsx(g,{id:"usefulLife",type:"number",placeholder:"e.g., 5",value:o,onChange:e=>c(e.target.value)})]}),d.jsxs("div",{children:[d.jsx(p,{htmlFor:"salvageValue",children:"Salvage Value ($)"}),d.jsx(g,{id:"salvageValue",type:"number",placeholder:"e.g., 500",value:v,onChange:e=>y(e.target.value)})]}),d.jsxs("div",{children:[d.jsx(p,{htmlFor:"condition",children:"Current Condition"}),d.jsxs(P,{value:N,onValueChange:f,children:[d.jsx(L,{id:"condition",children:d.jsx(A,{})}),d.jsxs(O,{children:[d.jsx(F,{value:"excellent",children:"Excellent"}),d.jsx(F,{value:"good",children:"Good"}),d.jsx(F,{value:"fair",children:"Fair"}),d.jsx(F,{value:"poor",children:"Poor"}),d.jsx(F,{value:"needs_repair",children:"Needs Repair"})]})]})]}),"usage-based"===l&&d.jsxs("div",{children:[d.jsx(p,{htmlFor:"usageHours",children:"Usage Hours"}),d.jsx(g,{id:"usageHours",type:"number",placeholder:"e.g., 1500",value:b,onChange:e=>w(e.target.value)})]}),d.jsx("div",{className:"flex gap-2 pt-4",children:d.jsx(j,{variant:"outline",onClick:()=>{t(""),i(""),n("straight-line"),c("5"),y("0"),f("good"),w("0")},className:"flex-1",children:"Reset"})})]})]}),d.jsxs(S,{children:[d.jsx(C,{children:d.jsx(T,{className:"text-lg",children:"Depreciation Results"})}),d.jsx(D,{children:E?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(V,{className:"h-4 w-4 text-blue-600"}),d.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Original Value"})]}),d.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:["$",E.originalValue.toLocaleString()]})]}),d.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(H,{className:"h-4 w-4 text-green-600"}),d.jsx("span",{className:"text-sm font-medium text-green-600",children:"Current Value"})]}),d.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["$",Math.round(E.currentValue).toLocaleString()]})]}),d.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(H,{className:"h-4 w-4 text-red-600"}),d.jsx("span",{className:"text-sm font-medium text-red-600",children:"Total Depreciation"})]}),d.jsxs("p",{className:"text-2xl font-bold text-red-800",children:["$",Math.round(E.totalDepreciation).toLocaleString()]})]}),d.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(le,{className:"h-4 w-4 text-orange-600"}),d.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Depreciation Rate"})]}),d.jsxs("p",{className:"text-2xl font-bold text-orange-800",children:[E.depreciationRate.toFixed(1),"%"]})]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("h4",{className:"font-semibold mb-2",children:"Additional Information"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Years Elapsed:"}),d.jsxs("span",{className:"font-medium",children:[E.yearsElapsed.toFixed(1)," years"]})]}),"straight-line"===l&&d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Annual Depreciation:"}),d.jsxs("span",{className:"font-medium",children:["$",Math.round(E.annualDepreciation).toLocaleString()]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Depreciation Method:"}),d.jsx("span",{className:"font-medium capitalize",children:l.replace("-"," ")})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Condition Adjustment:"}),d.jsx("span",{className:"font-medium capitalize",children:N})]})]})]}),d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:d.jsxs("p",{className:"text-sm text-yellow-800",children:[d.jsx("strong",{children:"Note:"})," This calculation is an estimate based on standard depreciation methods. Actual market value may vary based on demand, maintenance, and other factors."]})})]}):d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(le,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Enter purchase price and date to calculate depreciation"})]})})]})]}),d.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t",children:d.jsx(j,{variant:"outline",onClick:s,children:"Close"})})]})})},xe=({isOpen:e,tool:s,onClose:a,onSell:t})=>{const[r,i]=Q.useState({salePrice:"",soldTo:"",soldBy:"",saleReason:"upgrade",saleNotes:""}),l=(()=>{if(!r.salePrice||!s)return null;const e=ie(r.salePrice,0),a=s.currentValue,t=s.purchasePrice;return{salePrice:e,currentValue:a,originalPrice:t,profitFromCurrent:e-a,profitFromOriginal:e-t,profitPercentage:(e-t)/t*100}})();return s?d.jsx(u,{open:e,onOpenChange:a,children:d.jsxs(h,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsx(x,{children:d.jsxs(m,{className:"flex items-center gap-2",children:[d.jsx(V,{className:"h-5 w-5 text-green-600"}),"Sell Tool: ",s.name]})}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs(S,{children:[d.jsx(C,{children:d.jsx(T,{className:"text-lg",children:"Tool Information"})}),d.jsx(D,{className:"space-y-3",children:d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Original Price:"}),d.jsxs("p",{className:"font-medium",children:["$",s.purchasePrice.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Current Value:"}),d.jsxs("p",{className:"font-medium",children:["$",s.currentValue.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Condition:"}),d.jsx(R,{className:(e=>{switch(e){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"needs_repair":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(s.condition),children:s.condition.replace("_"," ")})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Usage Hours:"}),d.jsxs("p",{className:"font-medium",children:[s.usageHours,"h"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Location:"}),d.jsx("p",{className:"font-medium capitalize",children:s.location})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600",children:"Assigned To:"}),d.jsx("p",{className:"font-medium",children:s.assignedTo||"Unassigned"})]})]})})]}),d.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!r.salePrice||!r.soldTo||!r.soldBy)return void v({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});const s=ie(r.salePrice,0);isNaN(s)||s<=0?v({title:"Invalid Price",description:"Please enter a valid sale price",variant:"destructive"}):(t({salePrice:s,soldTo:r.soldTo,soldBy:r.soldBy,saleReason:r.saleReason,saleNotes:r.saleNotes||void 0}),i({salePrice:"",soldTo:"",soldBy:"",saleReason:"upgrade",saleNotes:""}),a())},className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"salePrice",children:"Sale Price ($) *"}),d.jsx(g,{id:"salePrice",type:"number",step:"0.01",min:"0",value:r.salePrice,onChange:e=>i(s=>o(n({},s),{salePrice:e.target.value})),placeholder:`Current value: $${s.currentValue.toLocaleString()}`,required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"soldTo",children:"Sold To *"}),d.jsx(g,{id:"soldTo",value:r.soldTo,onChange:e=>i(s=>o(n({},s),{soldTo:e.target.value})),placeholder:"Buyer name or company",required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"soldBy",children:"Sold By *"}),d.jsx(g,{id:"soldBy",value:r.soldBy,onChange:e=>i(s=>o(n({},s),{soldBy:e.target.value})),placeholder:"Employee who handled the sale",required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"saleReason",children:"Reason for Sale"}),d.jsx(g,{id:"saleReason",value:r.saleReason,onChange:e=>i(s=>o(n({},s),{saleReason:e.target.value})),placeholder:"Enter the reason for selling this tool",required:!0})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(p,{htmlFor:"saleNotes",children:"Sale Notes (Optional)"}),d.jsx(E,{id:"saleNotes",value:r.saleNotes,onChange:e=>i(s=>o(n({},s),{saleNotes:e.target.value})),placeholder:"Additional information about the sale...",rows:3})]}),l&&d.jsxs(S,{children:[d.jsx(C,{children:d.jsxs(T,{className:"text-lg flex items-center gap-2",children:[d.jsx(I,{className:"h-5 w-5"}),"Sale Analysis"]})}),d.jsxs(D,{children:[d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Sale Price"}),d.jsxs("div",{className:"text-lg font-bold text-blue-800",children:["$",l.salePrice.toLocaleString()]})]}),d.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Current Value"}),d.jsxs("div",{className:"text-lg font-bold text-gray-800",children:["$",l.currentValue.toLocaleString()]})]}),d.jsxs("div",{className:"p-3 rounded-lg "+(l.profitFromCurrent>=0?"bg-green-50":"bg-red-50"),children:[d.jsx("div",{className:"text-sm font-medium "+(l.profitFromCurrent>=0?"text-green-600":"text-red-600"),children:"vs Current Value"}),d.jsxs("div",{className:"text-lg font-bold flex items-center gap-1 "+(l.profitFromCurrent>=0?"text-green-800":"text-red-800"),children:[l.profitFromCurrent>=0?d.jsx(I,{className:"h-4 w-4"}):d.jsx(I,{className:"h-4 w-4 rotate-180"}),l.profitFromCurrent>=0?"+":"","$",l.profitFromCurrent.toLocaleString()]})]}),d.jsxs("div",{className:"p-3 rounded-lg "+(l.profitFromOriginal>=0?"bg-green-50":"bg-red-50"),children:[d.jsx("div",{className:"text-sm font-medium "+(l.profitFromOriginal>=0?"text-green-600":"text-red-600"),children:"Total Profit/Loss"}),d.jsxs("div",{className:"text-lg font-bold "+(l.profitFromOriginal>=0?"text-green-800":"text-red-800"),children:[l.profitFromOriginal>=0?"+":"","$",l.profitFromOriginal.toLocaleString()]}),d.jsxs("div",{className:"text-xs "+(l.profitFromOriginal>=0?"text-green-600":"text-red-600"),children:["(",l.profitPercentage>=0?"+":"",l.profitPercentage.toFixed(1),"%)"]})]})]}),l.profitFromOriginal<0&&d.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-semibold",children:[d.jsx(B,{className:"h-4 w-4"}),"Loss on Sale"]}),d.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"This sale will result in a loss compared to the original purchase price. Consider if this is the best time to sell or if the price can be adjusted."})]})]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[d.jsx(j,{type:"button",variant:"outline",onClick:()=>{var e;i({salePrice:(null==(e=null==s?void 0:s.currentValue)?void 0:e.toString())||"",soldTo:"",soldBy:"",saleReason:"upgrade",saleNotes:""})},children:"Use Current Value"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(j,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),d.jsxs(j,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:[d.jsx(q,{className:"h-4 w-4 mr-2"}),"Complete Sale"]})]})]})]})]})]})}):null},me=()=>{const[e,s]=Q.useState([]),[a,t]=Q.useState([]),[r,i]=Q.useState(""),[l,n]=Q.useState("all"),[o,c]=Q.useState("all"),[u,h]=Q.useState("all"),[x,m]=Q.useState(!1),[p,C]=Q.useState(null),[T,P]=Q.useState(null),[L,A]=Q.useState(!1),[O,F]=Q.useState("tools"),[E,B]=Q.useState(null);Q.useEffect(()=>{I()},[]),Q.useEffect(()=>{q()},[e,r,l,o,u]);const I=()=>{const e=oe.getAllTools();s(e)},q=()=>{let s=e.filter(e=>{const s=e.name.toLowerCase().includes(r.toLowerCase())||e.type.toLowerCase().includes(r.toLowerCase())||e.category.toLowerCase().includes(r.toLowerCase())||e.serialNumber&&e.serialNumber.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase())||e.supplier.toLowerCase().includes(r.toLowerCase())||e.location.toLowerCase().includes(r.toLowerCase())||e.assignedTo&&e.assignedTo.toLowerCase().includes(r.toLowerCase())||e.condition.toLowerCase().includes(r.toLowerCase())||e.notes&&e.notes.toLowerCase().includes(r.toLowerCase()),a="all"===l||e.location===l,t="all"===o||e.type===o,i="all"===u||e.condition===u;return s&&a&&t&&i});t(s)},ie=e=>{switch(e){case"excellent":return"bg-green-100 text-green-800 border-green-300";case"good":return"bg-blue-100 text-blue-800 border-blue-300";case"fair":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"poor":return"bg-orange-100 text-orange-800 border-orange-300";case"needs_repair":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},me=e=>{switch(e){case"garage":return d.jsx(Y,{className:"h-4 w-4"});case"showroom":return d.jsx(W,{className:"h-4 w-4"});case"events":return d.jsx(K,{className:"h-4 w-4"});case"office":return d.jsx(y,{className:"h-4 w-4"});case"storage":return d.jsx(U,{className:"h-4 w-4"});default:return d.jsx(J,{className:"h-4 w-4"})}},pe=oe.getToolsSummary();return d.jsxs("div",{className:"space-y-6 p-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Tools & Equipment Management"}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track tools, equipment, depreciation, and usage across all locations"})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsxs(j,{variant:"outline",onClick:()=>A(!0),className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:[d.jsx(le,{className:"mr-2 h-4 w-4"}),"Depreciation Calculator"]}),d.jsxs(j,{variant:"outline",onClick:()=>{const e=oe.exportData(),s=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=`tools-equipment-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),v({title:"Export Complete",description:"Tools and equipment data has been exported successfully."})},children:[d.jsx(ne,{className:"mr-2 h-4 w-4"}),"Export"]}),d.jsx("label",{htmlFor:"import-tools",className:"cursor-pointer",children:d.jsx(j,{variant:"outline",asChild:!0,children:d.jsxs("span",{children:[d.jsx($,{className:"mr-2 h-4 w-4"}),"Import"]})})}),d.jsx("input",{id:"import-tools",type:"file",accept:".json",className:"hidden",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(!a)return;const t=new FileReader;t.onload=e=>{var s;const a=null==(s=e.target)?void 0:s.result;oe.importData(a)?(I(),v({title:"Import Complete",description:"Tools and equipment data has been imported successfully."})):v({title:"Import Failed",description:"Failed to import data. Please check the file format.",variant:"destructive"})},t.readAsText(a)}}),d.jsxs(j,{onClick:()=>m(!0),children:[d.jsx(M,{className:"mr-2 h-4 w-4"}),"Add Tool/Equipment"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsx(S,{children:d.jsx(D,{className:"p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),d.jsx("p",{className:"text-2xl font-bold",children:pe.totalTools})]}),d.jsx(U,{className:"h-8 w-8 text-blue-500"})]})})}),d.jsx(S,{children:d.jsx(D,{className:"p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Original Value"}),d.jsxs("p",{className:"text-2xl font-bold",children:["$",pe.totalValue.toLocaleString()]})]}),d.jsx(V,{className:"h-8 w-8 text-green-500"})]})})}),d.jsx(S,{children:d.jsx(D,{className:"p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),d.jsxs("p",{className:"text-2xl font-bold",children:["$",pe.totalCurrentValue.toLocaleString()]})]}),d.jsx(H,{className:"h-8 w-8 text-blue-500"})]})})}),d.jsx(S,{children:d.jsx(D,{className:"p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Depreciation"}),d.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",pe.totalDepreciation.toLocaleString()]})]}),d.jsx(le,{className:"h-8 w-8 text-orange-500"})]})})})]}),d.jsxs(N,{value:O,onValueChange:F,className:"w-full",children:[d.jsxs(f,{children:[d.jsx(b,{value:"tools",children:"All Tools & Equipment"}),d.jsxs(b,{value:"garage",children:["Garage (",pe.byLocation.garage||0,")"]}),d.jsxs(b,{value:"showroom",children:["Showroom (",pe.byLocation.showroom||0,")"]}),d.jsxs(b,{value:"events",children:["Events (",pe.byLocation.events||0,")"]}),d.jsxs(b,{value:"office",children:["Office (",pe.byLocation.office||0,")"]})]}),d.jsxs(w,{value:O,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(k,{className:"absolute left-2 top-3 h-4 w-4 text-muted-foreground"}),d.jsx(g,{placeholder:"Search tools...",className:"pl-8",value:r,onChange:e=>i(e.target.value)})]}),d.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:l,onChange:e=>n(e.target.value),children:[d.jsx("option",{value:"all",children:"All Locations"}),d.jsx("option",{value:"garage",children:"Garage"}),d.jsx("option",{value:"showroom",children:"Showroom"}),d.jsx("option",{value:"events",children:"Events"}),d.jsx("option",{value:"office",children:"Office"}),d.jsx("option",{value:"storage",children:"Storage"})]}),d.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:o,onChange:e=>c(e.target.value),children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"tool",children:"Tools"}),d.jsx("option",{value:"equipment",children:"Equipment"})]}),d.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:u,onChange:e=>h(e.target.value),children:[d.jsx("option",{value:"all",children:"All Conditions"}),d.jsx("option",{value:"excellent",children:"Excellent"}),d.jsx("option",{value:"good",children:"Good"}),d.jsx("option",{value:"fair",children:"Fair"}),d.jsx("option",{value:"poor",children:"Poor"}),d.jsx("option",{value:"needs_repair",children:"Needs Repair"})]}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.length," items"]})})]}),d.jsx(S,{children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs(X,{children:[d.jsx(ee,{children:d.jsxs(se,{children:[d.jsx(ae,{children:"Tool/Equipment"}),d.jsx(ae,{children:"Type"}),d.jsx(ae,{children:"Category"}),d.jsx(ae,{children:"Location"}),d.jsx(ae,{children:"Purchase Price"}),d.jsx(ae,{children:"Current Value"}),d.jsx(ae,{children:"Condition"}),d.jsx(ae,{children:"Usage Hours"}),d.jsx(ae,{children:"Assigned To"}),d.jsx(ae,{children:"Actions"})]})}),d.jsx(te,{children:a.map(e=>{const s=oe.calculateDepreciation(e);return d.jsxs(se,{children:[d.jsx(re,{children:d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:e.name}),d.jsx("div",{className:"text-sm text-muted-foreground",children:e.description})]})}),d.jsx(re,{children:d.jsx(R,{variant:"outline",className:"capitalize",children:e.type})}),d.jsx(re,{children:e.category}),d.jsx(re,{children:d.jsxs("div",{className:"flex items-center gap-2",children:[me(e.location),d.jsx("span",{className:"capitalize",children:e.location})]})}),d.jsxs(re,{children:["$",e.purchasePrice.toLocaleString()]}),d.jsx(re,{children:d.jsxs("div",{children:[d.jsxs("div",{className:"font-medium",children:["$",s.currentValue.toLocaleString()]}),d.jsxs("div",{className:"text-sm text-red-600",children:["-",s.depreciationRate,"%/year"]})]})}),d.jsx(re,{children:d.jsx(R,{className:ie(e.condition),children:e.condition.replace("_"," ")})}),d.jsx(re,{children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(z,{className:"h-4 w-4 text-muted-foreground"}),e.usageHours,"h"]})}),d.jsx(re,{children:e.assignedTo?d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.assignedTo]}):d.jsx("span",{className:"text-muted-foreground",children:"Unassigned"})}),d.jsx(re,{children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(j,{variant:"ghost",size:"sm",onClick:()=>P(e),children:d.jsx(G,{className:"h-4 w-4"})}),d.jsx(j,{variant:"ghost",size:"sm",onClick:()=>C(e),children:d.jsx(Z,{className:"h-4 w-4"})}),d.jsx(j,{variant:"ghost",size:"sm",onClick:()=>B(e),className:"text-green-600 hover:text-green-700",title:"Sell tool",children:d.jsx(V,{className:"h-4 w-4"})})]})})]},e.id)})})]})})})]})]}),x&&d.jsx(ce,{isOpen:x,onClose:()=>m(!1),onSave:e=>{oe.addTool(e),I(),m(!1),v({title:"Tool Added",description:"New tool has been successfully added to the inventory."})}}),p&&d.jsx(de,{isOpen:!!p,tool:p,onClose:()=>C(null),onSave:e=>{p&&(oe.updateTool(p.id,e),I(),C(null),v({title:"Tool Updated",description:"Tool information has been successfully updated."}))}}),T&&d.jsx(ue,{isOpen:!!T,tool:T,onClose:()=>P(null)}),L&&d.jsx(he,{isOpen:L,onClose:()=>A(!1)}),d.jsx(xe,{isOpen:!!E,tool:E,onClose:()=>B(null),onSell:e=>{E&&(oe.sellTool(E.id,e),I(),B(null),v({title:"Tool Sold",description:`${E.name} has been successfully sold for $${e.salePrice.toLocaleString()}.`}))}})]})};export{me as default};
