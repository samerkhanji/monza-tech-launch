var e=(e,t,n)=>new Promise((r,a)=>{var o=e=>{try{c(n.next(e))}catch(t){a(t)}},d=e=>{try{c(n.throw(e))}catch(t){a(t)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,d);c((n=n.apply(e,t)).next())});import{s as t}from"./index-BmUpYGrm.js";const n=t=>e(void 0,null,function*(){const e=(new TextEncoder).encode(t),n=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}),r={getAll:()=>e(void 0,null,function*(){const{data:e,error:n}=yield t.from("users").select("*").order("created_at",{ascending:!1});if(n)throw n;return e.map(e=>({id:e.id,name:e.name,email:e.email,role:e.role,hybridRole:e.hybrid_role,phoneNumber:e.phone_number,department:e.department,emergencyContactName:e.emergency_contact_name,emergencyContactPhone:e.emergency_contact_phone,address:e.address,notes:e.notes,createdAt:e.created_at,updatedAt:e.updated_at}))}),getById:n=>e(void 0,null,function*(){const{data:e,error:r}=yield t.from("users").select("*").eq("id",n).single();if(r)throw r;return{id:e.id,name:e.name,email:e.email,role:e.role,hybridRole:e.hybrid_role,phoneNumber:e.phone_number,department:e.department,emergencyContactName:e.emergency_contact_name,emergencyContactPhone:e.emergency_contact_phone,address:e.address,notes:e.notes,createdAt:e.created_at,updatedAt:e.updated_at}}),create:r=>e(void 0,null,function*(){const e=yield n(r.password),{data:a,error:o}=yield t.from("users").insert({name:r.name,email:r.email,password_hash:e,role:r.role,hybrid_role:r.hybridRole,phone_number:r.phoneNumber,department:r.department,emergency_contact_name:r.emergencyContactName,emergency_contact_phone:r.emergencyContactPhone,address:r.address,notes:r.notes}).select().single();if(o)throw o;return{id:a.id,name:a.name,email:a.email,role:a.role,hybridRole:a.hybrid_role,phoneNumber:a.phone_number,department:a.department,emergencyContactName:a.emergency_contact_name,emergencyContactPhone:a.emergency_contact_phone,address:a.address,notes:a.notes,createdAt:a.created_at,updatedAt:a.updated_at}}),update:(r,a)=>e(void 0,null,function*(){const e={name:a.name,email:a.email,role:a.role,hybrid_role:a.hybridRole,phone_number:a.phoneNumber,department:a.department,emergency_contact_name:a.emergencyContactName,emergency_contact_phone:a.emergencyContactPhone,address:a.address,notes:a.notes};a.password&&(e.password_hash=yield n(a.password));const{data:o,error:d}=yield t.from("users").update(e).eq("id",r).select().single();if(d)throw d;return{id:o.id,name:o.name,email:o.email,role:o.role,hybridRole:o.hybrid_role,phoneNumber:o.phone_number,department:o.department,emergencyContactName:o.emergency_contact_name,emergencyContactPhone:o.emergency_contact_phone,address:o.address,notes:o.notes,createdAt:o.created_at,updatedAt:o.updated_at}}),delete:n=>e(void 0,null,function*(){const{error:e}=yield t.from("users").delete().eq("id",n);if(e)throw e})};export{r as u};
