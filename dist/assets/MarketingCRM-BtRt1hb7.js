var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(s,a,l)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,t=(e,s)=>{for(var a in s||(s={}))n.call(s,a)&&r(e,a,s[a]);if(l)for(var a of l(s))i.call(s,a)&&r(e,a,s[a]);return e},o=(e,l)=>s(e,a(l));import{j as c,k as d,O as h,C as u,g as x,h as j,R as m,a as p,I as v,e as g,ai as f,n as w,y as N,z as b,E as C,F as y,a9 as S,L,H as k,ab as O,o as _,t as P,V as I,U as E}from"./index-BmUpYGrm.js";import{r as z}from"./vendor-vN6PtkFd.js";import{T as M,a as A,b as T,c as W,d as D,e as q}from"./table-BEISn_Te.js";import{a as R}from"./errorHandling-Dc1u_gNS.js";import{P as U}from"./phone-CUmdYfuI.js";import{M as F}from"./mail-BiNlmlXL.js";import{S as H}from"./share-2-zYou0fbF.js";import{G as Q}from"./globe-DlCryj_B.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";const B=()=>{const[e,s]=z.useState([]),[a,l]=z.useState(""),[n,i]=z.useState("all"),[r,B]=z.useState("all"),[G,V]=z.useState(!1),[J,K]=z.useState({name:"",email:"",phone:"",company:"",source:"website",status:"new",interestedIn:[],notes:"",assignedTo:"Current User",tags:[]});z.useEffect(()=>{X()},[]);const X=()=>{s([]),localStorage.removeItem("crmLeads")},Y=e.filter(e=>{var s;const l=!a||e.name.toLowerCase().includes(a.toLowerCase())||e.email.toLowerCase().includes(a.toLowerCase())||(null==(s=e.company)?void 0:s.toLowerCase().includes(a.toLowerCase())),i="all"===n||e.status===n,t="all"===r||e.source===r;return l&&i&&t});return e.length,e.filter(e=>!["closed_won","closed_lost"].includes(e.status)).length,e.filter(e=>"qualified"===e.status).length,e.filter(e=>"closed_won"===e.status).length,e.length>0&&Math.round(e.filter(e=>"closed_won"===e.status).length/e.length*100),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Customer Relationship Management"}),c.jsx("p",{className:"text-muted-foreground",children:"Track leads, client communication, and follow-ups for sales and service"})]}),c.jsxs(d,{onClick:()=>V(!0),className:"bg-monza-yellow text-monza-black hover:bg-monza-yellow/90",children:[c.jsx(h,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),c.jsx("div",{className:"space-y-6",children:c.jsxs(u,{children:[c.jsxs(x,{children:[c.jsx(j,{children:"Lead Management"}),c.jsx(m,{children:"Manage and track all your sales leads"})]}),c.jsxs(p,{children:[c.jsxs("div",{className:"flex gap-4 mb-6",children:[c.jsx("div",{className:"flex-1",children:c.jsx(v,{placeholder:"Search leads by name, email, or company...",value:a,onChange:e=>l(e.target.value),className:"w-full"})}),c.jsxs("select",{value:n,onChange:e=>i(e.target.value),className:"h-10 px-3 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:"new",children:"New"}),c.jsx("option",{value:"contacted",children:"Contacted"}),c.jsx("option",{value:"qualified",children:"Qualified"}),c.jsx("option",{value:"proposal",children:"Proposal"}),c.jsx("option",{value:"negotiation",children:"Negotiation"}),c.jsx("option",{value:"closed_won",children:"Closed Won"}),c.jsx("option",{value:"closed_lost",children:"Closed Lost"})]}),c.jsxs("select",{value:r,onChange:e=>B(e.target.value),className:"h-10 px-3 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Sources"}),c.jsx("option",{value:"website",children:"Website"}),c.jsx("option",{value:"referral",children:"Referral"}),c.jsx("option",{value:"social",children:"Social Media"}),c.jsx("option",{value:"email",children:"Email"}),c.jsx("option",{value:"phone",children:"Phone"}),c.jsx("option",{value:"walk_in",children:"Walk-in"})]})]}),c.jsx("div",{className:"border rounded-lg",children:c.jsxs(M,{children:[c.jsx(A,{children:c.jsxs(T,{children:[c.jsx(W,{children:"Name"}),c.jsx(W,{children:"Contact"}),c.jsx(W,{children:"Source"}),c.jsx(W,{children:"Status"}),c.jsx(W,{children:"Interest"}),c.jsx(W,{children:"Actions"})]})}),c.jsx(D,{children:Y.map(s=>{return c.jsxs(T,{children:[c.jsx(q,{children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:s.name}),s.company&&c.jsx("div",{className:"text-sm text-muted-foreground",children:s.company})]})}),c.jsx(q,{children:c.jsxs("div",{className:"text-sm",children:[c.jsx("div",{children:s.email}),c.jsx("div",{className:"text-muted-foreground",children:s.phone})]})}),c.jsx(q,{children:c.jsxs("div",{className:"flex items-center gap-2",children:[(a=s.source,{website:c.jsx(Q,{className:"h-4 w-4"}),referral:c.jsx(E,{className:"h-4 w-4"}),social:c.jsx(H,{className:"h-4 w-4"}),email:c.jsx(F,{className:"h-4 w-4"}),phone:c.jsx(U,{className:"h-4 w-4"}),walk_in:c.jsx(I,{className:"h-4 w-4"})}[a]||c.jsx(_,{className:"h-4 w-4"})),c.jsx("span",{className:"capitalize",children:s.source.replace("_"," ")})]})}),c.jsx(q,{children:c.jsxs("select",{value:s.status,onChange:a=>{return l=s.id,n=a.target.value,e.map(e=>e.id===l?o(t({},e),{status:n}):e),void P({title:"Success",description:"Lead status updated"});var l,n},className:"px-2 py-1 border rounded text-sm",children:[c.jsx("option",{value:"new",children:"New"}),c.jsx("option",{value:"contacted",children:"Contacted"}),c.jsx("option",{value:"qualified",children:"Qualified"}),c.jsx("option",{value:"proposal",children:"Proposal"}),c.jsx("option",{value:"negotiation",children:"Negotiation"}),c.jsx("option",{value:"closed_won",children:"Closed Won"}),c.jsx("option",{value:"closed_lost",children:"Closed Lost"})]})}),c.jsx(q,{children:c.jsx("div",{className:"flex gap-1 flex-wrap",children:s.interestedIn.map(e=>c.jsx(g,{variant:"outline",className:"text-xs",children:e},e))})}),c.jsx(q,{children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(d,{size:"sm",variant:"outline",children:c.jsx(f,{className:"h-3 w-3"})}),c.jsx(d,{size:"sm",variant:"outline",children:c.jsx(w,{className:"h-3 w-3"})})]})})]},s.id);var a})})]})})]})]})}),c.jsx(N,{open:G,onOpenChange:V,children:c.jsxs(b,{className:"max-w-2xl",children:[c.jsxs(C,{children:[c.jsx(y,{children:"Add New Lead"}),c.jsx(S,{children:"Enter the lead information to start tracking"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(L,{children:"Name *"}),c.jsx(v,{value:J.name,onChange:e=>K(o(t({},J),{name:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx(L,{children:"Email *"}),c.jsx(v,{type:"email",value:J.email,onChange:e=>K(o(t({},J),{email:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx(L,{children:"Phone"}),c.jsx(v,{value:J.phone,onChange:e=>K(o(t({},J),{phone:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx(L,{children:"Company"}),c.jsx(v,{value:J.company,onChange:e=>K(o(t({},J),{company:e.target.value}))})]}),c.jsxs("div",{children:[c.jsx(L,{children:"Source"}),c.jsxs("select",{value:J.source,onChange:e=>K(o(t({},J),{source:e.target.value})),className:"h-10 w-full px-3 border border-gray-300 rounded-md",children:[c.jsx("option",{value:"website",children:"Website"}),c.jsx("option",{value:"referral",children:"Referral"}),c.jsx("option",{value:"social",children:"Social Media"}),c.jsx("option",{value:"email",children:"Email"}),c.jsx("option",{value:"phone",children:"Phone"}),c.jsx("option",{value:"walk_in",children:"Walk-in"})]})]}),c.jsxs("div",{children:[c.jsx(L,{children:"Budget"}),c.jsx(v,{type:"number",value:J.budget,onChange:e=>K(o(t({},J),{budget:R(e.target.value,0)}))})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx(L,{children:"Notes"}),c.jsx(k,{value:J.notes,onChange:e=>K(o(t({},J),{notes:e.target.value})),rows:3})]})]}),c.jsxs(O,{children:[c.jsx(d,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),c.jsx(d,{onClick:()=>{if(!J.name||!J.email)return void P({title:"Error",description:"Name and email are required",variant:"destructive"});Date.now().toString(),J.name,J.email,J.phone,J.company,J.source,J.status,J.interestedIn,J.budget,J.expectedCloseDate,J.notes,J.assignedTo,(new Date).toISOString(),J.tags;P({title:"Success",description:"New lead added successfully"}),K({name:"",email:"",phone:"",company:"",source:"website",status:"new",interestedIn:[],notes:"",assignedTo:"Current User",tags:[]}),V(!1)},children:"Add Lead"})]})]})})]})};export{B as default};
