var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,i=(e,s)=>{for(var a in s||(s={}))l.call(s,a)&&n(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&n(e,a,s[a]);return e},c=(e,t)=>s(e,a(t));import{a8 as d,aq as o,K as x,j as m,y as h,z as j,E as p,F as u,b as g,p as f,q as N,r as y,v,C as b,g as C,h as w,a as P,e as D,k as M,V as k,o as F,A as U,aQ as S,D as L,f as R,B as E,a6 as O,a9 as $,J as W,X as H,I as A}from"./index-BmUpYGrm.js";import{r as I}from"./vendor-vN6PtkFd.js";import{b as q}from"./errorHandling-Dc1u_gNS.js";import{L as G}from"./lock-BHJDt_OW.js";import{F as T}from"./file-text-bXPYLusF.js";import{C as B}from"./calculator-D7ZZJlp5.js";import{P as _}from"./pen-line--cRXdmmD.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";
/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=d("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),K=({isOpen:e,onClose:s,carCode:a})=>{const{getCarByCode:t,getCarRepairHistory:l,getCarFinancialData:r}=o(),{hasPermission:n}=x(),[i,c]=I.useState("overview"),d=n("view_financial_data"),S=t(a),L=l(a),R=r(a);if(!S)return m.jsx(h,{open:e,onOpenChange:s,children:m.jsxs(j,{children:[m.jsx(p,{children:m.jsx(u,{children:"Car Not Found"})}),m.jsxs("p",{children:["No data found for car code: ",a]})]})});const E=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return m.jsx(h,{open:e,onOpenChange:s,children:m.jsxs(j,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-hidden",children:[m.jsx(p,{className:"sticky top-0 bg-white z-10 border-b pb-4",children:m.jsxs(u,{className:"flex items-center gap-2",children:[m.jsx(g,{className:"h-5 w-5"}),S.model," (",S.carCode,")"]})}),m.jsx("div",{className:"overflow-y-auto px-1 car-detail-scroll",style:{maxHeight:"calc(95vh - 120px)",scrollbarWidth:"thin",scrollbarColor:"#CBD5E0 #F7FAFC"},children:m.jsxs(f,{value:i,onValueChange:c,className:"w-full",children:[m.jsxs(N,{className:`grid w-full ${d?"grid-cols-5":"grid-cols-4"} sticky top-0 bg-white z-10 mb-4`,children:[m.jsx(y,{value:"overview",children:"Overview"}),m.jsx(y,{value:"inventory",children:"Inventory"}),m.jsx(y,{value:"garage",children:"Garage"}),d&&m.jsx(y,{value:"financial",children:"Financial"}),m.jsx(y,{value:"history",children:"History"})]}),m.jsx(v,{value:"overview",className:"space-y-4",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs(b,{children:[m.jsx(C,{children:m.jsxs(w,{className:"flex items-center gap-2",children:[m.jsx(g,{className:"h-4 w-4"}),"Vehicle Information"]})}),m.jsxs(P,{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Model:"}),m.jsx("span",{className:"font-medium",children:S.model})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Year:"}),m.jsx("span",{className:"font-medium",children:S.year})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Color:"}),m.jsx("span",{className:"font-medium",children:S.color})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Car Code:"}),m.jsx("span",{className:"font-medium font-mono",children:S.carCode})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Brand:"}),m.jsx("span",{className:"font-medium",children:S.brand||"Unknown"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"Current Location:"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(D,{className:(O=S.currentLocation,{inventory:"bg-blue-100 text-blue-800",garage:"bg-yellow-100 text-yellow-800",scheduled:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",sold:"bg-gray-100 text-gray-800"}[O]||"bg-gray-100 text-gray-800"),children:S.currentLocation.replace("_"," ").toUpperCase()}),m.jsxs(M,{size:"sm",variant:"outline",onClick:()=>((e,s)=>{let a={inventory:"/inventory",garage:"/garage-car-inventory",showroom_floor_1:"/showroom-floor-1",showroom_floor_2:"/showroom-floor-2",showroom_inventory:"/showroom-inventory",inventory_floor_2:"/inventory-floor-2",inventory_garage:"/inventory-garage",repairs:"/repairs",scheduled:"/garage-schedule",delivered:"/car-inventory?status=delivered",sold:"/sales"}[e]||"/inventory";s&&(a+=`?vin=${encodeURIComponent(s)}`),window.open(a,"_blank")})(S.currentLocation,S.carCode),className:"text-xs",children:[m.jsx(k,{className:"h-3 w-3 mr-1"}),"View"]})]})]})]})]}),S.clientName&&m.jsxs(b,{children:[m.jsx(C,{children:m.jsxs(w,{className:"flex items-center gap-2",children:[m.jsx(F,{className:"h-4 w-4"}),"Client Information"]})}),m.jsxs(P,{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Name:"}),m.jsx("span",{className:"font-medium",children:S.clientName})]}),S.clientPhone&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Phone:"}),m.jsx("span",{className:"font-medium",children:S.clientPhone})]}),S.clientEmail&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Email:"}),m.jsx("span",{className:"font-medium",children:S.clientEmail})]})]})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsxs(w,{className:"flex items-center gap-2",children:[m.jsx(U,{className:"h-4 w-4"}),"Status Summary"]})}),m.jsxs(P,{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Repairs Completed:"}),m.jsx("span",{className:"font-medium",children:L.length})]}),d&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Total Financial Records:"}),m.jsx("span",{className:"font-medium",children:R.length})]}),S.garageData&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Current Garage Status:"}),m.jsx(D,{children:S.garageData.status.replace("_"," ").toUpperCase()})]}),S.scheduleData&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Scheduled:"}),m.jsx("span",{className:"font-medium",children:S.scheduleData.scheduleDate})]})]})]})]})}),m.jsx(v,{value:"inventory",className:"space-y-4",children:S.inventoryData?m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{children:"Inventory Details"})}),m.jsxs(P,{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Status:"}),m.jsx(D,{className:"ml-2",children:S.inventoryData.status})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Arrival Date:"}),m.jsx("span",{className:"ml-2",children:S.inventoryData.arrivalDate})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Current Floor:"}),m.jsx("span",{className:"ml-2",children:S.inventoryData.currentFloor||"N/A"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Battery:"}),m.jsxs("span",{className:"ml-2",children:[S.inventoryData.batteryPercentage||"N/A","%"]})]}),S.inventoryData.sellingPrice&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Selling Price:"}),m.jsx("span",{className:"ml-2",children:E(S.inventoryData.sellingPrice)})]})]}),S.inventoryData.notes&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Notes:"}),m.jsx("p",{className:"mt-1 text-sm text-gray-600",children:S.inventoryData.notes})]})]})]}):m.jsx(b,{children:m.jsx(P,{className:"py-8 text-center text-gray-500",children:"No inventory data available for this vehicle"})})}),m.jsx(v,{value:"garage",className:"space-y-4",children:S.garageData?m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{children:"Garage/Repair Details"})}),m.jsxs(P,{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Status:"}),m.jsx(D,{className:"ml-2",children:S.garageData.status.replace("_"," ")})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Entry Date:"}),m.jsx("span",{className:"ml-2",children:S.garageData.entryDate})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Assigned Employee:"}),m.jsx("span",{className:"ml-2",children:S.garageData.assignedEmployee||"N/A"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Expected Duration:"}),m.jsx("span",{className:"ml-2",children:S.garageData.repairDuration||"N/A"})]})]}),S.garageData.issueDescription&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Issue Description:"}),m.jsx("p",{className:"mt-1 text-sm text-gray-600",children:S.garageData.issueDescription})]}),S.garageData.workNotes&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Work Notes:"}),m.jsx("p",{className:"mt-1 text-sm text-gray-600",children:S.garageData.workNotes})]}),S.garageData.mechanics&&S.garageData.mechanics.length>0&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Mechanics:"}),m.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:S.garageData.mechanics.map((e,s)=>m.jsx(D,{variant:"outline",children:e},s))})]}),S.garageData.partsUsed&&S.garageData.partsUsed.length>0&&m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Parts Used:"}),m.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:S.garageData.partsUsed.map((e,s)=>m.jsx(D,{variant:"outline",children:e},s))})]})]})]}):m.jsx(b,{children:m.jsx(P,{className:"py-8 text-center text-gray-500",children:"No garage/repair data available for this vehicle"})})}),d&&m.jsx(v,{value:"financial",className:"space-y-4",children:R.length>0?m.jsx("div",{className:"space-y-4",children:R.map((e,s)=>m.jsxs(b,{children:[m.jsx(C,{children:m.jsxs(w,{className:"flex items-center justify-between",children:[m.jsxs("span",{children:["Financial Record #",s+1]}),m.jsx(D,{children:e.repairType})]})}),m.jsxs(P,{children:[m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium text-red-600",children:"Company Cost:"}),m.jsx("p",{className:"text-lg font-bold text-red-600",children:E(e.totalCost)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium text-green-600",children:"Customer Price:"}),m.jsx("p",{className:"text-lg font-bold text-green-600",children:E(e.totalCost+e.profit)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium text-blue-600",children:"Profit:"}),m.jsx("p",{className:"text-lg font-bold text-blue-600",children:E(e.profit)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Profit Margin:"}),m.jsxs("p",{className:"text-lg font-bold",children:[e.profitMargin,"%"]})]})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Labor:"}),m.jsx("span",{className:"ml-2 font-medium",children:E(e.laborCost)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Parts:"}),m.jsx("span",{className:"ml-2 font-medium",children:E(e.partsCost)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Electricity:"}),m.jsx("span",{className:"ml-2 font-medium",children:E(e.electricityCost)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Labor Hours:"}),m.jsxs("span",{className:"ml-2 font-medium",children:[e.laborHours,"h"]})]})]}),m.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[m.jsxs("span",{children:["Repair Date: ",e.startDate]}),e.completionDate&&e.completionDate!==e.startDate&&m.jsxs("span",{children:[" - ",e.completionDate]})]})]})]},s))}):m.jsx(b,{children:m.jsx(P,{className:"py-8 text-center text-gray-500",children:"No financial data available for this vehicle"})})}),m.jsx(v,{value:"history",className:"space-y-4",children:L.length>0?m.jsx("div",{className:"space-y-4",children:L.map((e,s)=>m.jsxs(b,{children:[m.jsx(C,{children:m.jsxs(w,{className:"flex items-center justify-between",children:[m.jsxs("span",{children:["Repair #",s+1]}),m.jsx(D,{children:e.repairType})]})}),m.jsxs(P,{children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Technician:"}),m.jsx("span",{className:"ml-2",children:e.technician})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Labor Hours:"}),m.jsxs("span",{className:"ml-2",children:[e.laborHours,"h"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Start Date:"}),m.jsx("span",{className:"ml-2",children:e.startDate})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-sm font-medium",children:"Completion Date:"}),m.jsx("span",{className:"ml-2",children:e.completionDate})]})]}),e.partsUsed&&e.partsUsed.length>0&&m.jsxs("div",{className:"mt-3",children:[m.jsx("label",{className:"text-sm font-medium",children:"Parts Used:"}),m.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:e.partsUsed.map((e,s)=>m.jsx(D,{variant:"outline",children:e},s))})]}),e.notes&&m.jsxs("div",{className:"mt-3",children:[m.jsx("label",{className:"text-sm font-medium",children:"Notes:"}),m.jsx("p",{className:"mt-1 text-sm text-gray-600",children:e.notes})]}),e.totalCost&&m.jsxs("div",{className:"mt-3 text-right",children:[m.jsx("span",{className:"text-sm text-gray-500",children:"Total Cost: "}),m.jsx("span",{className:"font-bold",children:E(e.totalCost)})]})]})]},s))}):m.jsx(b,{children:m.jsx(P,{className:"py-8 text-center text-gray-500",children:"No repair history available for this vehicle"})})})]})}),m.jsx("div",{className:"flex justify-end gap-2 mt-6",children:m.jsx(M,{variant:"outline",onClick:s,children:"Close"})})]})});var O},V={currency:{exchangeRate:89500},laborRates:{"Mechanical Repairs":{usd:28},"Electrical Work":{usd:33.5},"Body Work":{usd:24.5},Painting:{usd:31.3}},operationalCosts:{electricity:{generatorPowerOutputKwh:15,fuelConsumptionPerHour:3.5,fuelPricePerLiterUsd:7,backupGeneratorFuelUsd:335},rent:{monthly:0},insurance:{usdMonthly:1400},maintenance:{usdMonthly:1060},security:{usdMonthly:2010},cleaning:{usdMonthly:750},elevatorMaintenance:{usdMonthly:600},generatorMaintenance:{usdMonthly:1500}},partsCosts:{localParts:{markupPercentage:45},importedParts:{markupPercentage:85,bankingFees:12}},employeeCosts:{minimumWageUsd:268,averageWageUsd:503}},J=()=>{const[e,s]=I.useState(null),[a,t]=I.useState(!1),[l,r]=I.useState([]),[n,d]=I.useState(null),[f,N]=I.useState(!1),[y,v]=I.useState(null),[k,F]=I.useState({}),[U,J]=I.useState(!1),[Q,Y]=I.useState({}),{unifiedCars:X,refreshData:Z}=o();let ee;try{ee=S()}catch(oe){ee={can:()=>!1,isLoading:!1,hasRole:()=>!1,permissions:new Set,roles:new Set}}const{can:se,isLoading:ae}=ee,{user:te}=x()||{},le="OWNER"===(null==te?void 0:te.role),re=!ae&&"function"==typeof se&&se("financial.view")||le;I.useEffect(()=>{const e=[];X.forEach(s=>{s.financialRecords&&s.financialRecords.length>0&&s.financialRecords.forEach(s=>{e.push({carCode:s.carCode,carModel:s.carModel,customerName:s.customerName,repairType:s.repairType,startDate:s.startDate,completionDate:s.completionDate,laborHours:s.laborHours,laborCost:s.laborCost,partsCost:s.partsCost,electricityCost:s.electricityCost,equipmentCost:s.equipmentCost,overheadCost:s.overheadCost,totalCost:s.totalCost,profit:s.profit,profitMargin:s.profitMargin,currency:s.currency,exchangeRate:s.exchangeRate,partsUsed:s.partsUsed,employeesWorked:s.employeesWorked})})}),r(e)},[X]);const ne=l.length>0?l:[],ie=(()=>{const e=ne.reduce((e,s)=>e+s.totalCost+s.profit,0),s=ne.reduce((e,s)=>e+s.profit,0),a=ne.reduce((e,s)=>e+s.totalCost,0);return{totalRevenue:e,totalProfit:s,totalCosts:a,averageRepairCost:a/ne.length,averageProfitMargin:ne.reduce((e,s)=>e+s.profitMargin,0)/ne.length,totalRepairs:ne.length}})(),ce=(e,s=!0)=>{const a=e;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a)};if(ae)return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),m.jsx("p",{className:"text-gray-600",children:"Loading financial dashboard..."})]});if(!re)return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[m.jsx("div",{className:"p-6 bg-red-50 rounded-full",children:m.jsx(G,{className:"h-12 w-12 text-red-500"})}),m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Restricted"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"Financial data is only accessible to owners."}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Current user: ",(null==te?void 0:te.name)||"Unknown"," (",(null==te?void 0:te.role)||"No role",")"]}),m.jsx("p",{className:"text-sm text-gray-500",children:"Please contact your administrator if you need access to financial information."})]})]});const de=(e,s)=>{const a=q(s,0);Y(s=>c(i({},s),{[e]:a}))};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Financial Dashboard"}),m.jsx("p",{className:"text-gray-600",children:"Lebanese Garage Financial Management (USD Display)"})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Currency: USD (89,500 LBP = 1 USD)"}),m.jsxs("p",{className:"text-xs text-gray-400",children:["Updated: ",(new Date).toLocaleDateString()]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(b,{children:m.jsx(P,{className:"p-6",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:m.jsx(L,{className:"h-6 w-6 text-green-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Customer Revenue"}),m.jsx("p",{className:"text-xl font-bold text-green-600",children:ce(ie.totalRevenue)}),m.jsx("p",{className:"text-xs text-gray-500",children:"What customers paid"})]})]})})}),m.jsx(b,{children:m.jsx(P,{className:"p-6",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:m.jsx(R,{className:"h-6 w-6 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Total Profit"}),m.jsx("p",{className:"text-xl font-bold text-blue-600",children:ce(ie.totalProfit)})]})]})})}),m.jsx(b,{children:m.jsx(P,{className:"p-6",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:m.jsx(E,{className:"h-6 w-6 text-red-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Avg Company Cost"}),m.jsx("p",{className:"text-xl font-bold text-red-600",children:ce(ie.averageRepairCost)}),m.jsx("p",{className:"text-xs text-gray-500",children:"Internal expenses"})]})]})})}),m.jsx(b,{children:m.jsx(P,{className:"p-6",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:m.jsx(z,{className:"h-6 w-6 text-orange-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Avg Profit Margin"}),m.jsxs("p",{className:"text-xl font-bold text-orange-600",children:[ie.averageProfitMargin.toFixed(1),"%"]})]})]})})})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsxs(w,{className:"flex items-center gap-2",children:[m.jsx(T,{className:"h-5 w-5"}),"Recent Repair Financial Records"]})}),m.jsx(P,{children:m.jsx("div",{className:"space-y-4",children:ne.map(e=>m.jsx(b,{className:"border border-gray-200",children:m.jsxs(P,{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:m.jsx(g,{className:"h-5 w-5 text-blue-600"})}),m.jsxs("div",{children:[m.jsxs("h3",{className:"font-medium text-gray-800",children:[e.carCode," - ",e.carModel]}),m.jsx("p",{className:"text-sm text-gray-600",children:e.customerName}),m.jsx("p",{className:"text-xs text-gray-500",children:e.repairType})]})]}),m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-sm font-medium text-red-600",children:"Company Cost"}),m.jsx("p",{className:"text-lg font-bold text-red-600",children:ce(e.totalCost)}),m.jsx("p",{className:"text-xs text-gray-500",children:"Internal expenses"})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-sm font-medium text-green-600",children:"Customer Price"}),m.jsx("p",{className:"text-lg font-bold text-green-600",children:ce(e.totalCost+e.profit)}),m.jsx("p",{className:"text-xs text-gray-500",children:"What customer pays"})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-sm font-medium",children:"Profit"}),m.jsx("p",{className:"text-lg font-bold text-blue-600",children:ce(e.profit)}),m.jsxs(D,{className:"bg-green-100 text-green-800",children:[e.profitMargin,"%"]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(M,{size:"sm",variant:"outline",onClick:()=>(e=>{s(e),t(!0)})(e),className:"flex items-center gap-2",children:[m.jsx(O,{className:"h-4 w-4"}),"Financial Details"]}),m.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{return s=e.carCode,d(s),void N(!0);var s},className:"flex items-center gap-2",children:[m.jsx(g,{className:"h-4 w-4"}),"Car History"]})]})]})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-5 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500",children:"Labor Cost"}),m.jsx("p",{className:"font-medium text-red-600",children:ce(e.laborCost)})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500",children:"Parts Cost"}),m.jsx("p",{className:"font-medium text-red-600",children:ce(e.partsCost)})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500",children:"Operations"}),m.jsx("p",{className:"font-medium text-red-600",children:ce(e.electricityCost+e.equipmentCost+e.overheadCost)})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500",children:"Hours"}),m.jsxs("p",{className:"font-medium",children:[e.laborHours,"h"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500",children:"Customer Pays"}),m.jsx("p",{className:"font-medium text-green-600",children:ce(e.totalCost+e.profit)})]})]})]})},e.carCode))})})]}),m.jsx(h,{open:a,onOpenChange:t,children:m.jsxs(j,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[m.jsx(p,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs(u,{className:"flex items-center gap-2",children:[m.jsx(B,{className:"h-5 w-5"}),"Financial Breakdown - ",null==e?void 0:e.carCode]}),m.jsxs($,{children:["Detailed cost analysis for ",null==e?void 0:e.carModel," repair"]})]}),m.jsx("div",{className:"flex gap-2",children:U?m.jsxs(m.Fragment,{children:[m.jsxs(M,{size:"sm",onClick:()=>{if(e&&Q){const a=(Q.laborCost||e.laborCost)+(Q.partsCost||e.partsCost)+(Q.electricityCost||e.electricityCost)+(Q.equipmentCost||e.equipmentCost)+(Q.overheadCost||e.overheadCost),t=void 0!==Q.totalCost?Q.totalCost:a,l=void 0!==Q.customerPrice?Q.customerPrice:t+(Q.profit||e.profit),n=c(i(i({},e),Q),{totalCost:t,customerPrice:l});r(s=>s.map(s=>s.carCode===e.carCode?n:s)),s(n)}J(!1),Y({})},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:[m.jsx(W,{className:"h-4 w-4"}),"Save Changes"]}),m.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{J(!1),Y({})},className:"flex items-center gap-2",children:[m.jsx(H,{className:"h-4 w-4"}),"Cancel"]})]}):m.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{e&&(J(!0),Y({laborCost:e.laborCost,partsCost:e.partsCost,electricityCost:e.electricityCost,equipmentCost:e.equipmentCost,overheadCost:e.overheadCost,profit:e.profit,profitMargin:e.profitMargin}))},className:"flex items-center gap-2",children:[m.jsx(_,{className:"h-4 w-4"}),"Edit All Costs"]})})]})}),e&&m.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6 financial-breakdown-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"#CBD5E0 #F7FAFC"},children:[m.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[m.jsxs(b,{children:[m.jsxs(C,{children:[m.jsx(w,{className:"text-lg",children:"Company Cost Breakdown (USD)"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Internal expenses for repair work"})]}),m.jsxs(P,{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("span",{children:["Labor (",e.laborHours,"h):"]}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.laborCost||e.laborCost,onChange:e=>de("laborCost",e.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):m.jsx("span",{className:"font-medium text-red-600",children:ce(e.laborCost)})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"Parts & Materials:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.partsCost||e.partsCost,onChange:e=>de("partsCost",e.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):m.jsx("span",{className:"font-medium text-red-600",children:ce(e.partsCost)})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"Electricity:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.electricityCost||e.electricityCost,onChange:e=>de("electricityCost",e.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):m.jsx("span",{className:"font-medium text-red-600",children:ce(e.electricityCost)})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"Equipment:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.equipmentCost||e.equipmentCost,onChange:e=>de("equipmentCost",e.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):m.jsx("span",{className:"font-medium text-red-600",children:ce(e.equipmentCost)})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{children:"Overhead:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.overheadCost||e.overheadCost,onChange:e=>de("overheadCost",e.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):m.jsx("span",{className:"font-medium text-red-600",children:ce(e.overheadCost)})]}),m.jsx("hr",{}),m.jsxs("div",{className:"flex justify-between text-lg font-bold items-center",children:[m.jsx("span",{children:"Total Company Cost:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm text-red-600",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.totalCost||e.totalCost,onChange:e=>de("totalCost",e.target.value),className:"w-32 h-8 text-sm font-bold text-red-600",placeholder:"0.00",title:"Enter custom total cost or leave blank to auto-calculate"}),m.jsx("span",{className:"text-xs text-gray-500",children:"✏️ Editable"})]}):m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-red-600",children:ce(e.totalCost)}),e.totalCost&&m.jsx("span",{className:"text-xs text-gray-500",title:"This value can be edited",children:"✏️"})]})]}),m.jsxs("div",{className:"flex justify-between text-lg font-bold items-center",children:[m.jsx("span",{children:"Customer Price:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm text-green-600",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.customerPrice||e.customerPrice||e.totalCost+e.profit,onChange:e=>de("customerPrice",e.target.value),className:"w-32 h-8 text-sm font-bold text-green-600",placeholder:"0.00",title:"Enter custom customer price or leave blank to auto-calculate"}),m.jsx("span",{className:"text-xs text-gray-500",children:"✏️ Editable"})]}):m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-green-600",children:ce(e.customerPrice||e.totalCost+e.profit)}),m.jsx("span",{className:"text-xs text-gray-500",title:"This value can be edited",children:"✏️"})]})]}),m.jsxs("div",{className:"flex justify-between text-lg font-bold items-center",children:[m.jsx("span",{children:"Profit:"}),U?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm text-blue-600",children:"$"}),m.jsx(A,{type:"number",step:"0.01",value:Q.profit||e.profit,onChange:e=>de("profit",e.target.value),className:"w-24 h-8 text-sm font-bold text-blue-600"}),m.jsxs("span",{className:"text-sm text-gray-500",children:["(",Q.profitMargin||e.profitMargin,"%)"]})]}):m.jsx("span",{className:"text-blue-600",children:ce(e.profit)})]})]})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{className:"text-lg",children:"Labor Details (USD)"})}),m.jsx(P,{className:"space-y-3",children:e.employeesWorked.map((e,s)=>m.jsxs("div",{className:"border-l-4 border-blue-200 pl-4",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium",children:e.name}),m.jsxs("span",{children:[e.hours,"h"]})]}),m.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[m.jsx("span",{children:e.role}),m.jsxs("span",{children:[ce(e.hourlyRate),"/h"]})]}),m.jsxs("div",{className:"text-sm font-medium text-right",children:["Total: ",ce(e.hours*e.hourlyRate)]})]},s))})]})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{className:"text-lg",children:"Parts & Materials Used (USD)"})}),m.jsx(P,{children:m.jsx("div",{className:"space-y-3",children:e.partsUsed.map((e,s)=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:e.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",e.quantity," • ",e.supplier,e.isImported&&m.jsx(D,{className:"ml-2 bg-orange-100 text-orange-800",children:"Imported"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"font-medium",children:ce(e.unitCost*e.quantity)}),m.jsxs("p",{className:"text-sm text-gray-600",children:[ce(e.unitCost)," each"]})]})]},s))})})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{className:"text-lg",children:"Lebanese Market Factors - 2025 (USD)"})}),m.jsxs(P,{children:[m.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Labor Rates ($/hour)"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Mechanical Repairs:"}),m.jsx("span",{children:V.laborRates["Mechanical Repairs"].usd.toLocaleString()})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Electrical Work:"}),m.jsx("span",{children:V.laborRates["Electrical Work"].usd.toLocaleString()})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Body Work:"}),m.jsx("span",{children:V.laborRates["Body Work"].usd.toLocaleString()})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Painting:"}),m.jsx("span",{children:V.laborRates.Painting.usd.toLocaleString()})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Operational Costs (2025)"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Electricity/kWh:"}),m.jsxs("span",{children:[V.operationalCosts.electricity.generatorPowerOutputKwh.toLocaleString()," kWh"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Rent/Month:"}),m.jsxs("span",{children:[(V.operationalCosts.rent.monthly/1e6).toFixed(1),"M USD"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Fuel/Liter:"}),m.jsxs("span",{children:[V.operationalCosts.electricity.fuelPricePerLiterUsd.toLocaleString()," USD"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Insurance/Month:"}),m.jsxs("span",{children:[(V.operationalCosts.insurance.usdMonthly/1e3).toFixed(1),"K USD"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Generator Fuel:"}),m.jsxs("span",{children:[V.operationalCosts.electricity.fuelConsumptionPerHour," L/hour"]})]})]})]})]}),m.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[m.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"2025 Lebanese Market Context - Crisis Economic Conditions"}),m.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm text-red-700",children:[m.jsxs("div",{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Currency:"})," USD (Lebanese crisis context)"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Exchange Rate:"})," 1 USD = ",V.currency.exchangeRate.toLocaleString()," LBP"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Minimum Wage:"})," $",V.employeeCosts.minimumWageUsd,"/month"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Average Automotive Wage:"})," $",V.employeeCosts.averageWageUsd,"/month"]})]}),m.jsxs("div",{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Local Parts Markup:"})," ",V.partsCosts.localParts.markupPercentage,"% (limited local production)"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Import Parts Markup:"})," ",V.partsCosts.importedParts.markupPercentage,"% (import crisis + banking fees)"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Banking Fees:"})," ",V.partsCosts.importedParts.bankingFees,"% (capital controls)"]})]}),m.jsxs("div",{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Electricity Crisis:"})," 0% grid power available"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Generator Dependency:"})," 100% generator-powered facility"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Fuel Cost:"})," $",V.operationalCosts.electricity.fuelPricePerLiterUsd,"/liter diesel"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Security Required:"})," Armed security due to situation"]})]}),m.jsxs("div",{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Facility Type:"})," Owner-Operated 4-Floor Building"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Generator Output:"})," ",V.operationalCosts.electricity.generatorPowerOutputKwh," kWh/hour"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Daily Fuel Cost:"})," ~$",(V.operationalCosts.electricity.fuelConsumptionPerHour*V.operationalCosts.electricity.fuelPricePerLiterUsd*12).toFixed(0)]})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Generator Costs (Monthly)"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Maintenance:"}),m.jsxs("span",{children:["$",V.operationalCosts.generatorMaintenance.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Fuel (Primary):"}),m.jsxs("span",{children:["$",(V.operationalCosts.electricity.fuelConsumptionPerHour*V.operationalCosts.electricity.fuelPricePerLiterUsd*12*30).toFixed(0)]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Backup Fuel:"}),m.jsxs("span",{children:["$",30*V.operationalCosts.electricity.backupGeneratorFuelUsd]})]}),m.jsx("hr",{className:"my-2"}),m.jsxs("div",{className:"flex justify-between font-medium",children:[m.jsx("span",{children:"Total Monthly:"}),m.jsxs("span",{children:["$",(V.operationalCosts.generatorMaintenance.usdMonthly+V.operationalCosts.electricity.fuelConsumptionPerHour*V.operationalCosts.electricity.fuelPricePerLiterUsd*12*30+30*V.operationalCosts.electricity.backupGeneratorFuelUsd).toFixed(0)]})]}),m.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[m.jsx("span",{children:"Per Job (60/month):"}),m.jsxs("span",{children:["$",((V.operationalCosts.generatorMaintenance.usdMonthly+V.operationalCosts.electricity.fuelConsumptionPerHour*V.operationalCosts.electricity.fuelPricePerLiterUsd*12*30+30*V.operationalCosts.electricity.backupGeneratorFuelUsd)/60).toFixed(0)]})]})]})]})]})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{className:"text-lg",children:"Lebanese Generator-Powered Operations"})}),m.jsx(P,{children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:[m.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"POWER CRISIS IMPACT"}),m.jsxs("div",{className:"text-sm text-red-700 space-y-1",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Grid Power:"})," 0% available (complete blackout)"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Generator Dependency:"})," 100% facility power from diesel generators"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Operating Challenge:"})," Constant fuel shortage + high costs"]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Main Generator Output:"}),m.jsxs("span",{children:[V.operationalCosts.electricity.generatorPowerOutputKwh," kWh/hour"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Fuel Consumption:"}),m.jsxs("span",{children:[V.operationalCosts.electricity.fuelConsumptionPerHour," L/hour"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Diesel Price:"}),m.jsxs("span",{children:["$",V.operationalCosts.electricity.fuelPricePerLiterUsd,"/liter"]})]}),m.jsxs("div",{className:"flex justify-between text-red-600 font-medium",children:[m.jsx("span",{children:"Hourly Fuel Cost:"}),m.jsxs("span",{children:["$",(V.operationalCosts.electricity.fuelConsumptionPerHour*V.operationalCosts.electricity.fuelPricePerLiterUsd).toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-red-800 font-bold",children:[m.jsx("span",{children:"Daily Fuel Cost (12h):"}),m.jsxs("span",{children:["$",(V.operationalCosts.electricity.fuelConsumptionPerHour*V.operationalCosts.electricity.fuelPricePerLiterUsd*12).toFixed(0)]})]})]})]})})]}),m.jsxs(b,{children:[m.jsx(C,{children:m.jsx(w,{className:"text-lg",children:"Lebanese Market - Monthly Operational Costs"})}),m.jsx(P,{children:m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-green-600",children:[m.jsx("span",{children:"Rent (OWNED):"}),m.jsx("span",{children:"$0"})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Insurance:"}),m.jsxs("span",{children:["$",V.operationalCosts.insurance.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Facility Maintenance:"}),m.jsxs("span",{children:["$",V.operationalCosts.maintenance.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Armed Security:"}),m.jsxs("span",{children:["$",V.operationalCosts.security.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Cleaning:"}),m.jsxs("span",{children:["$",V.operationalCosts.cleaning.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Elevator Maintenance:"}),m.jsxs("span",{children:["$",V.operationalCosts.elevatorMaintenance.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between text-red-600",children:[m.jsx("span",{children:"Generator Maintenance:"}),m.jsxs("span",{children:["$",V.operationalCosts.generatorMaintenance.usdMonthly]})]}),m.jsx("hr",{className:"my-2"}),m.jsxs("div",{className:"flex justify-between font-medium",children:[m.jsx("span",{children:"Total Monthly (exc. fuel):"}),m.jsxs("span",{children:["$",V.operationalCosts.insurance.usdMonthly+V.operationalCosts.maintenance.usdMonthly+V.operationalCosts.security.usdMonthly+V.operationalCosts.cleaning.usdMonthly+V.operationalCosts.elevatorMaintenance.usdMonthly+V.operationalCosts.generatorMaintenance.usdMonthly]})]}),m.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[m.jsx("span",{children:"Per Job (60/month):"}),m.jsxs("span",{children:["$",((V.operationalCosts.insurance.usdMonthly+V.operationalCosts.maintenance.usdMonthly+V.operationalCosts.security.usdMonthly+V.operationalCosts.cleaning.usdMonthly+V.operationalCosts.elevatorMaintenance.usdMonthly+V.operationalCosts.generatorMaintenance.usdMonthly)/60).toFixed(0)]})]}),m.jsxs("div",{className:"text-xs text-red-700 mt-2 p-2 bg-red-50 rounded",children:[m.jsx("strong",{children:"Crisis Premium:"})," All costs significantly higher due to Lebanese economic collapse, security concerns, and generator dependency"]})]})})]})]})]})}),n&&m.jsx(K,{isOpen:f,onClose:()=>{N(!1),d(null)},carCode:n})]})},Q=()=>m.jsx("div",{className:"flex flex-col h-full",children:m.jsx(J,{})});export{Q as default};
