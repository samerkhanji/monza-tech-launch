var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&i(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),c=(e,t,n)=>new Promise((r,o)=>{var a=e=>{try{s(n.next(e))}catch(j){o(j)}},i=e=>{try{s(n.throw(e))}catch(j){o(j)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);s((n=n.apply(e,t)).next())});import{j as d,X as u,s as p,k as h,t as m}from"./index-BmUpYGrm.js";import{r as b,a as g,c as f,R as x}from"./vendor-vN6PtkFd.js";import{c as y}from"./charts-XrXYWaKo.js";function v({open:e,onClose:t,children:n,maxWidth:r="max-w-3xl",title:o,description:a,closeOnOverlayClick:i=!0,showCloseButton:s=!0,closeOnEsc:l=!0,initialFocusRef:c,className:p,container:h}){const m=b.useRef(null),f=b.useRef(null),x=b.useRef(null),v=b.useId(),j=b.useId();b.useEffect(()=>{if(!e)return;f.current=document.activeElement;const n=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(","),r=e=>{if("Escape"===e.key&&l)return e.preventDefault(),void t();if("Tab"===e.key){const t=m.current;if(!t)return;const r=Array.from(t.querySelectorAll(n)).filter(e=>!e.hasAttribute("disabled")&&-1!==e.tabIndex&&!e.getAttribute("aria-hidden"));if(0===r.length)return e.preventDefault(),void t.focus();const o=r[0],a=r[r.length-1],i=document.activeElement;e.shiftKey?i!==o&&t.contains(i)||(e.preventDefault(),a.focus()):i!==a&&t.contains(i)||(e.preventDefault(),o.focus())}},o=window.setTimeout(()=>{const e=m.current;if(!e)return;const t=(null==c?void 0:c.current)||e.querySelector(n);t?t.focus():e.focus()},0);return document.addEventListener("keydown",r),()=>{var e,t;window.clearTimeout(o),document.removeEventListener("keydown",r),null==(t=null==(e=f.current)?void 0:e.focus)||t.call(e)}},[e,l,t,c]);const k=b.useMemo(()=>o?`${v}-title`:void 0,[o,v]),w=b.useMemo(()=>a?`${j}-description`:void 0,[a,j]);if(!e)return null;return g.createPortal(d.jsx("div",{ref:x,className:y("fixed inset-0 z-[1000] bg-black/20 flex items-center justify-center relative","data-[state=open]:opacity-100 data-[state=closed]:opacity-0 transition-opacity duration-200 ease-out"),"data-state":"open",onClick:e=>{i&&e.target===x.current&&t()},children:d.jsxs("div",{ref:m,role:"dialog","aria-modal":"true","aria-labelledby":k,"aria-describedby":w,tabIndex:-1,className:y("fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[min(850px,95vw)] z-[1001]",r,"bg-white rounded-xl shadow-2xl ring-1 ring-black/5","max-h-[85vh] overflow-y-auto","p-4 sm:p-6","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=closed]:animate-out data-[state=closed]:fade-out-0",p),onClick:e=>e.stopPropagation(),children:[(o||s)&&d.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3 sm:mb-4",children:[o?d.jsx("h2",{id:`${v}-title`,className:"text-lg sm:text-xl font-semibold text-gray-900",children:o}):d.jsx("span",{}),s&&d.jsx("button",{type:"button","aria-label":"Close dialog",onClick:t,className:"inline-flex items-center justify-center rounded-md p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300",children:d.jsx(u,{className:"h-5 w-5","aria-hidden":"true"})})]}),a&&d.jsx("p",{id:`${j}-description`,className:"text-sm text-gray-600 mb-3 sm:mb-4",children:a}),n]})}),null!=h?h:document.body)}var j,k={exports:{}};"undefined"!=typeof self&&self;var w=k.exports=(j=b,function(){var e={155:function(e){e.exports=j}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{useReactToPrint:function(){return h}});var o=n(155);function a({level:e="error",messages:t,suppressErrors:n=!1}){}function i(e,t){if(t||!e){const e=document.getElementById("printWindow");e&&document.body.removeChild(e)}}function s(e){return e instanceof Error?e:new Error("Unknown Error")}function l(e,t){const{documentTitle:n,onAfterPrint:r,onPrintError:o,preserveAfterPrint:l,print:c,suppressErrors:d}=t;setTimeout(()=>{var t,u;if(e.contentWindow){let p=function(){null==r||r(),i(l)};if(e.contentWindow.focus(),c)c(e).then(p).catch(e=>{o?o("print",s(e)):a({messages:["An error was thrown by the specified `print` function"],suppressErrors:d})});else{if(e.contentWindow.print){const r=null!==(u=null===(t=e.contentDocument)||void 0===t?void 0:t.title)&&void 0!==u?u:"",o=e.ownerDocument.title;n&&(e.ownerDocument.title=n,e.contentDocument&&(e.contentDocument.title=n)),e.contentWindow.print(),n&&(e.ownerDocument.title=o,e.contentDocument&&(e.contentDocument.title=r))}else a({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:d});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>{var t,n;return(null!==(n=null!==(t=navigator.userAgent)&&void 0!==t?t:navigator.vendor)&&void 0!==n?n:"opera"in window&&window.opera).match(e)})?setTimeout(p,500):p()}}else a({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:d})},500)}function c(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let r=n.nextNode();for(;r;)t.push(r),r=n.nextNode();return t}function d(e,t,n){const r=c(e),o=c(t);if(r.length===o.length)for(let a=0;a<r.length;a++){const e=r[a],t=o[a],i=e.shadowRoot;if(null!==i){const e=t.attachShadow({mode:i.mode});e.innerHTML=i.innerHTML,d(i,e,n)}}else a({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:n})}const u='\n    @page {\n        /* Remove browser default header (title) and footer (url) */\n        margin: 0;\n    }\n    @media print {\n        body {\n            /* Tell browsers to print background colors */\n            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */\n            print-color-adjust: exact; /* Firefox/Safari */\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n        }\n    }\n';function p(e,t,n,r){var o,i,c,p,h;const{contentNode:m,clonedContentNode:b,clonedImgNodes:g,clonedVideoNodes:f,numResourcesToLoad:x,originalCanvasNodes:y}=n,{bodyClass:v,fonts:j,ignoreGlobalStyles:k,pageStyle:w,nonce:N,suppressErrors:S,copyShadowRoots:C}=r;e.onload=null;const E=null!==(o=e.contentDocument)&&void 0!==o?o:null===(i=e.contentWindow)||void 0===i?void 0:i.document;if(E){const n=E.body.appendChild(b);C&&d(m,n,!!S),j&&((null===(c=e.contentDocument)||void 0===c?void 0:c.fonts)&&(null===(p=e.contentWindow)||void 0===p?void 0:p.FontFace)?j.forEach(n=>{const r=new FontFace(n.family,n.source,{weight:n.weight,style:n.style});e.contentDocument.fonts.add(r),r.loaded.then(()=>{t(r)}).catch(e=>{t(r,["Failed loading the font:",r,"Load error:",s(e)])})}):(j.forEach(e=>{t(e)}),a({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:S})));const r=null!=w?w:u,o=E.createElement("style");N&&(o.setAttribute("nonce",N),E.head.setAttribute("nonce",N)),o.appendChild(E.createTextNode(r)),E.head.appendChild(o),v&&E.body.classList.add(...v.split(" "));const i=E.querySelectorAll("canvas");for(let e=0;e<y.length;++e){const t=y[e],n=i[e];if(void 0===n){a({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",t],suppressErrors:S});continue}const r=n.getContext("2d");r&&r.drawImage(t,0,0)}for(let e=0;e<g.length;e++){const n=g[e],r=n.getAttribute("src");if(r){const e=new Image;e.onload=()=>{t(n)},e.onerror=(e,r,o,a,i)=>{t(n,["Error loading <img>",n,"Error",i])},e.src=r}else t(n,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',n])}for(let e=0;e<f.length;e++){const n=f[e];n.preload="auto";const r=n.getAttribute("poster");if(r){const e=new Image;e.onload=()=>{t(n)},e.onerror=(e,o,a,i,s)=>{t(n,["Error loading video poster",r,"for video",n,"Error:",s])},e.src=r}else n.readyState>=2?t(n):n.src?(n.onloadeddata=()=>{t(n)},n.onerror=(e,r,o,a,i)=>{t(n,["Error loading video",n,"Error",i])},n.onstalled=()=>{t(n,["Loading video stalled, skipping",n])}):t(n,["Error loading video, `src` is empty",n])}const l="select",x=m.querySelectorAll(l),T=E.querySelectorAll(l);for(let e=0;e<x.length;e++)T[e].value=x[e].value;if(!k){const e=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let n=0,r=e.length;n<r;++n){const r=e[n];if("style"===r.tagName.toLowerCase()){const e=E.createElement(r.tagName),t=r.sheet;if(t){let o="";try{const e=t.cssRules.length;for(let n=0;n<e;++n)"string"==typeof t.cssRules[n].cssText&&(o+=`${t.cssRules[n].cssText}\r\n`)}catch(D){a({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",r,`Original error: ${s(D).message}`],level:"warning"})}e.setAttribute("id",`react-to-print-${n}`),N&&e.setAttribute("nonce",N),e.appendChild(E.createTextNode(o)),E.head.appendChild(e)}}else if(r.getAttribute("href"))if(r.hasAttribute("disabled"))a({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",r],level:"warning"}),t(r);else{const e=E.createElement(r.tagName);for(let t=0,n=r.attributes.length;t<n;++t){const n=r.attributes[t];n&&e.setAttribute(n.nodeName,null!==(h=n.nodeValue)&&void 0!==h?h:"")}e.onload=()=>{t(e)},e.onerror=(n,r,o,a,i)=>{t(e,["Failed to load",e,"Error:",i])},N&&e.setAttribute("nonce",N),E.head.appendChild(e)}else a({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",r],level:"warning"}),t(r)}}}0===x&&l(e,r)}function h({bodyClass:e,contentRef:t,copyShadowRoots:n,documentTitle:r,fonts:c,ignoreGlobalStyles:d,nonce:u,onAfterPrint:h,onBeforePrint:m,onPrintError:b,pageStyle:g,preserveAfterPrint:f,print:x,suppressErrors:y}){return(0,o.useCallback)(o=>{function v(){const i={bodyClass:e,contentRef:t,copyShadowRoots:n,documentTitle:r,fonts:c,ignoreGlobalStyles:d,nonce:u,onAfterPrint:h,onPrintError:b,pageStyle:g,preserveAfterPrint:f,print:x,suppressErrors:y},s=function(){const e=document.createElement("iframe");return e.width=`${document.documentElement.clientWidth}px`,e.height=`${document.documentElement.clientHeight}px`,e.style.position="absolute",e.style.top=`-${document.documentElement.clientHeight+100}px`,e.style.left=`-${document.documentElement.clientWidth+100}px`,e.id="printWindow",e.srcdoc="<!DOCTYPE html>",e}(),m=function(e,t){const{contentRef:n,fonts:r,ignoreGlobalStyles:o,suppressErrors:i}=t,s=function({contentRef:e,optionalContent:t,suppressErrors:n}){return t&&"function"==typeof t?(e&&a({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),t()):e?e.current:void a({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:n})}({contentRef:n,optionalContent:e,suppressErrors:i});if(!s)return;const l=s.cloneNode(!0),c=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),d=l.querySelectorAll("img"),u=l.querySelectorAll("video"),p=r?r.length:0;return{contentNode:s,clonedContentNode:l,clonedImgNodes:d,clonedVideoNodes:u,numResourcesToLoad:(o?0:c.length)+d.length+u.length+p,originalCanvasNodes:s.querySelectorAll("canvas")}}(o,i);if(!m)return void a({messages:["There is nothing to print"],suppressErrors:y});const v=function(e,t,n){const{suppressErrors:r}=e,o=[],i=[];return function(s,c){o.includes(s)?a({level:"debug",messages:["Tried to mark a resource that has already been handled",s],suppressErrors:r}):(c?(a({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...c],suppressErrors:r}),i.push(s)):o.push(s),o.length+i.length===t&&l(n,e))}}(i,m.numResourcesToLoad,s);var j,k,w,N;k=v,w=m,N=i,(j=s).onload=()=>{p(j,k,w,N)},document.body.appendChild(j)}i(f,!0),m?m().then(()=>{v()}).catch(e=>{null==b||b("onBeforePrint",s(e))}):v()},[e,t,n,r,c,d,u,h,m,b,g,f,x,y])}return r}());const N=({width:e=200,height:t=80,onSignatureChange:n,value:r})=>{const o=b.useRef(null),[a,i]=b.useState(!1);b.useEffect(()=>{const e=o.current;if(!e)return;const t=e.getContext("2d");if(t&&(t.strokeStyle="#000000",t.lineWidth=2,t.lineCap="round",t.lineJoin="round",r)){const n=new Image;n.onload=()=>{t.clearRect(0,0,e.width,e.height),t.drawImage(n,0,0)},n.src=r}},[r]);const s=e=>{const t=o.current;if(!t)return;i(!0);const n=t.getBoundingClientRect(),r="touches"in e?e.touches[0].clientX-n.left:e.clientX-n.left,a="touches"in e?e.touches[0].clientY-n.top:e.clientY-n.top,s=t.getContext("2d");s&&(s.beginPath(),s.moveTo(r,a))},l=e=>{if(!a)return;const t=o.current;if(!t)return;const n=t.getBoundingClientRect(),r="touches"in e?e.touches[0].clientX-n.left:e.clientX-n.left,i="touches"in e?e.touches[0].clientY-n.top:e.clientY-n.top,s=t.getContext("2d");s&&(s.lineTo(r,i),s.stroke())},c=()=>{if(!a)return;i(!1);const e=o.current;if(e&&n){const t=e.toDataURL();n(t)}};return d.jsxs("div",{className:"signature-pad",children:[d.jsx("canvas",{ref:o,width:e,height:t,className:"border border-black cursor-crosshair touch-none bg-white",onMouseDown:s,onMouseMove:l,onMouseUp:c,onMouseLeave:c,onTouchStart:s,onTouchMove:l,onTouchEnd:c}),d.jsx(h,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=o.current;if(!e)return;const t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),n&&n(""))},className:"mt-1 text-xs print:hidden",children:"Clear Signature"})]})},S=({car:e,onSave:t,showInlineActions:n=!0})=>{const r=b.useRef(null),[o,a]=b.useState(!1),[i,u]=b.useState(!1);x.useEffect(()=>{const e=document.createElement("style");e.id="pdi-pro-override",e.textContent="\n  /* PDI-only resets (wins by order + !important) */\n  #pdi-pro input[type=\"date\"],\n  #pdi-pro input[type=\"datetime-local\"]{\n    background:#fff !important;\n    color:#000 !important;\n    height:32px !important;\n    border:1px solid #d1d5db !important;\n    border-radius:6px !important;\n    padding:0 0.5rem 0 0.5rem !important;\n    -webkit-appearance:auto !important;\n            appearance:auto !important;\n  }\n\n  #pdi-pro input[type=\"date\"]:hover,\n  #pdi-pro input[type=\"datetime-local\"]:hover{ border-color:#94a3b8 !important; }\n  #pdi-pro input[type=\"date\"]:focus,\n  #pdi-pro input[type=\"datetime-local\"]:focus{\n    outline:2px solid #3b82f6 !important;\n    outline-offset:2px !important;\n    border-color:#3b82f6 !important;\n  }\n\n  /* show the calendar icon and make it clickable */\n  #pdi-pro input[type=\"date\"]::-webkit-calendar-picker-indicator,\n  #pdi-pro input[type=\"datetime-local\"]::-webkit-calendar-picker-indicator{\n    display:block !important;\n    opacity:1 !important;\n    visibility:visible !important;\n    pointer-events:auto !important;\n    width:20px !important; height:20px !important;\n    margin:0 4px 0 0 !important; padding:2px !important;\n    border:1px solid #d1d5db !important; border-radius:3px !important;\n    background:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='4' width='18' height='18' rx='2' ry='2'/><line x1='16' y1='2' x2='16' y2='6'/><line x1='8' y1='2' x2='8' y2='6'/><line x1='3' y1='10' x2='21' y2='10'/></svg>\") no-repeat center !important;\n    background-size:16px 16px !important;\n  }\n\n  /* kill any fake emoji/pseudo icons added elsewhere */\n  #pdi-pro input[type=\"date\"]::after,\n  #pdi-pro input[type=\"datetime-local\"]::after{ content:none !important; display:none !important; }\n\n  /* Radix in dialog */\n  #pdi-pro [data-radix-select-content],\n  #pdi-pro [data-radix-popper-content-wrapper]{ z-index:100000 !important; position:fixed !important; }\n  #pdi-pro [role=\"dialog\"], #pdi-pro [data-radix-dialog-content]{ overflow:visible !important; }\n    ",document.head.appendChild(e);const t=Array.from(document.querySelectorAll('#pdi-pro input[type="date"], #pdi-pro input[type="datetime-local"]')),n=[];return t.forEach(e=>{const t=()=>{e.showPicker&&e.showPicker()};e.addEventListener("click",t),n.push(t)}),()=>{e.parentNode&&e.parentNode.removeChild(e),t.forEach((e,t)=>e.removeEventListener("click",n[t]))}},[]);const[g,f]=b.useState({outletName:"Monza SAL",outletNumber:"001",estimatedDeliveryDate:"",manufacturingDate:(null==e?void 0:e.manufacturingDate)||"",model:(null==e?void 0:e.model)||"",vin:(null==e?void 0:e.vinNumber)||"",rangeExtenderNumber:(null==e?void 0:e.rangeExtenderNumber)||"",highVoltageBatteryNumber:(null==e?void 0:e.highVoltageBatteryNumber)||"",frontMotorNumber:(null==e?void 0:e.frontMotorNumber)||"",rearMotorNumber:(null==e?void 0:e.rearMotorNumber)||"",qualityActivities:"no",activityNumber:"",customerRequirementsOther:"",customerRequirementsMounting:!1}),[y,v]=b.useState({}),[k,S]=b.useState({}),[C,E]=b.useState({maintenanceTechnician:{signature:"",date:""},maintenanceTechnicalDirector:{signature:"",date:""},deliveryServiceManager:{signature:"",date:""}}),[D,T]=b.useState("satisfied");b.useEffect(()=>{(null==e?void 0:e.id)&&A()},[null==e?void 0:e.id]);const A=()=>c(void 0,null,function*(){if(null==e?void 0:e.id){a(!0);try{if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e.id)){const t=localStorage.getItem(`pdi:${e.id}`);if(t){const e=JSON.parse(t);e.formData&&f(t=>s(s({},t),e.formData)),e.checklistState&&v(e.checklistState),e.overhauls&&S(e.overhauls),e.signatures&&E(e.signatures),T(e.finalStatus||"satisfied")}return}const{data:t,error:n}=yield p.from("car_inventory").select("notes").eq("id",e.id).single();if(n)throw n;if(t){let e=null;if(t.notes)try{e=JSON.parse(t.notes)}catch(j){e={remarks:t.notes}}e&&(e.formData&&f(t=>s(s({},t),e.formData)),e.checklistState&&v(e.checklistState),e.overhauls&&S(e.overhauls),e.signatures&&E(e.signatures),T("satisfied"))}}catch(t){}finally{a(!1)}}});b.useEffect(()=>{if(e&&(!g.rangeExtenderNumber||!g.highVoltageBatteryNumber||!g.frontMotorNumber||!g.rearMotorNumber)){const t=(e=>{var t,n,r,o,a,i;if(!e)return{};const s=()=>Math.random().toString(36).substring(2,8).toUpperCase();return{rangeExtenderNumber:e.rangeExtenderNumber||`RE-${(new Date).getFullYear()}-${null==(n=null==(t=e.model)?void 0:t.toUpperCase())?void 0:n.slice(0,3)}-${s()}`,highVoltageBatteryNumber:e.highVoltageBatteryNumber||`HVB-${(new Date).getFullYear()}-${s()}`,frontMotorNumber:e.frontMotorNumber||`FM-${(new Date).getFullYear()}-${null==(o=null==(r=e.model)?void 0:r.toUpperCase())?void 0:o.slice(0,3)}-${s()}`,rearMotorNumber:e.rearMotorNumber||`RM-${(new Date).getFullYear()}-${null==(i=null==(a=e.model)?void 0:a.toUpperCase())?void 0:i.slice(0,3)}-${s()}`}})(e);f(e=>s(s({},e),t))}},[e]);const M=(e,t)=>{f(n=>l(s({},n),{[e]:t}))},P=(e,t,n)=>{E(r=>l(s({},r),{[e]:l(s({},r[e]),{[t]:n})}))},R=(e,t,n)=>{v(r=>l(s({},r),{[e]:s(s(l(s({},r[e]),{[t]:n}),n&&"checked"===t?{failed:!1}:{}),n&&"failed"===t?{checked:!1}:{})}))},$=w.useReactToPrint({contentRef:r,documentTitle:`PDI-Checklist-${g.vin}`});return d.jsxs("div",{className:"w-full bg-white",children:[o&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 flex items-center gap-3",children:[d.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-600 border-t-transparent rounded-full"}),d.jsx("span",{className:"text-lg font-medium",children:"Loading PDI data..."})]})}),d.jsxs("div",{ref:r,className:"w-full max-w-[1200px] mx-auto bg-white border border-black p-6 pdi-form-container pdi-related-content rounded-none",style:{fontFamily:"Arial, Helvetica, sans-serif",fontSize:"13px",lineHeight:"1.3"},children:[d.jsxs("div",{className:"relative mb-8",children:[d.jsx("img",{src:"/brand-logos/monza-logo.png",className:"w-[150px] absolute left-4 top-4",alt:"Monza"}),d.jsx("img",{src:"/brand-logos/voyah-logo.png",className:"w-[150px] absolute right-4 top-4",alt:"Voyah"}),d.jsx("h1",{className:"text-center text-2xl font-bold pt-16 mb-8",children:"PDI checklist"})]}),d.jsxs("table",{className:"w-full border-collapse border border-black mb-6 rounded-none",style:{tableLayout:"fixed"},children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"16.66%"}}),d.jsx("col",{style:{width:"16.66%"}}),d.jsx("col",{style:{width:"16.66%"}}),d.jsx("col",{style:{width:"16.66%"}}),d.jsx("col",{style:{width:"16.66%"}}),d.jsx("col",{style:{width:"16.66%"}})]}),d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black bg-gray-100 font-bold text-sm",style:{padding:"12px"},children:"Outlet name:"}),d.jsx("td",{className:"border border-black text-sm",style:{padding:"12px"},children:d.jsx("input",{type:"text",value:g.outletName,onChange:e=>M("outletName",e.target.value),className:"w-full border-0 bg-transparent text-sm outline-none"})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold text-sm",style:{padding:"12px"},children:"Outlet number:"}),d.jsx("td",{className:"border border-black text-sm",style:{padding:"12px"},children:d.jsx("input",{type:"text",value:g.outletNumber,onChange:e=>M("outletNumber",e.target.value),className:"w-full border-0 bg-transparent text-sm outline-none"})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold text-sm",style:{padding:"12px"},children:"VIN:"}),d.jsx("td",{className:"border border-black text-sm",style:{padding:"12px"},children:d.jsx("input",{type:"text",value:g.vin,onChange:e=>M("vin",e.target.value),className:"w-full border-0 bg-transparent text-sm outline-none"})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Estimated delivery date:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"date",value:g.estimatedDeliveryDate?g.estimatedDeliveryDate.split("/").reverse().join("-"):"",onChange:e=>{const t=e.target.value;if(t){const[e,n,r]=t.split("-");M("estimatedDeliveryDate",`${r}/${n}/${e}`)}else M("estimatedDeliveryDate","")},className:"w-full h-8 px-2 text-sm border border-gray-300 rounded focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",style:{backgroundColor:"#fff",color:"#000",fontSize:"14px",lineHeight:"1.4"}})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Manufacturing date of vehicle:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"date",value:g.manufacturingDate?g.manufacturingDate.split("/").reverse().join("-"):"",onChange:e=>{const t=e.target.value;if(t){const[e,n,r]=t.split("-");M("manufacturingDate",`${r}/${n}/${e}`)}else M("manufacturingDate","")},className:"w-full h-8 px-2 text-sm border border-gray-300 rounded focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",style:{backgroundColor:"#fff",color:"#000",fontSize:"14px",lineHeight:"1.4"}})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Model:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"text",value:g.model,onChange:e=>M("model",e.target.value),className:"w-full border-0 bg-transparent text-sm outline-none focus:bg-yellow-50 focus:ring-1 focus:ring-blue-300 rounded px-1"})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Range extender number*:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"text",value:g.rangeExtenderNumber,onChange:e=>M("rangeExtenderNumber",e.target.value),className:"w-full border-0 bg-transparent text-sm"})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"High voltage battery number:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"text",value:g.highVoltageBatteryNumber,onChange:e=>M("highVoltageBatteryNumber",e.target.value),className:"w-full border-0 bg-transparent text-sm"})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Front motor number*:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"text",value:g.frontMotorNumber,onChange:e=>M("frontMotorNumber",e.target.value),className:"w-full border-0 bg-transparent text-sm"})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Rear motor number:"}),d.jsx("td",{className:"border border-black px-3 py-2",children:d.jsx("input",{type:"text",value:g.rearMotorNumber,onChange:e=>M("rearMotorNumber",e.target.value),className:"w-full border-0 bg-transparent text-sm"})}),d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Are you able to opt out market quality activities:"}),d.jsx("td",{className:"border border-black px-3 py-2",colSpan:2,children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("label",{className:"flex items-center gap-1",children:[d.jsx("input",{type:"radio",name:"qualityActivities",value:"no",checked:"no"===g.qualityActivities,onChange:e=>M("qualityActivities",e.target.value),className:"w-4 h-4 border border-black rounded-none"}),d.jsx("span",{children:"No"})]}),d.jsxs("label",{className:"flex items-center gap-1",children:[d.jsx("input",{type:"radio",name:"qualityActivities",value:"yes",checked:"yes"===g.qualityActivities,onChange:e=>M("qualityActivities",e.target.value),className:"w-4 h-4 border border-black rounded-none"}),d.jsx("span",{children:"Yes"})]})]})}),d.jsx("td",{className:"border border-black px-3 py-2",colSpan:2,children:d.jsxs("div",{className:"flex items-center gap-2 w-full",children:[d.jsx("span",{className:"font-bold text-sm whitespace-nowrap",children:"Activity No."}),d.jsx("input",{type:"text",value:g.activityNumber||"",onChange:e=>M("activityNumber",e.target.value),className:"flex-1 min-w-0 border-0 bg-transparent text-sm outline-none border-b border-gray-400 px-1",placeholder:"Enter number",style:{maxWidth:"calc(100% - 80px)"}})]})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black bg-gray-100 font-bold px-3 py-2",children:"Customer requirements:"}),d.jsx("td",{className:"border border-black px-3 py-2",colSpan:5,children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{children:"• Mounting accessories:"}),d.jsxs("label",{className:"flex items-center gap-1",children:[d.jsx("input",{type:"checkbox",checked:g.customerRequirementsMounting,onChange:e=>M("customerRequirementsMounting",e.target.checked.toString()),className:"w-4 h-4 border border-black rounded-none"}),d.jsx("span",{children:"No"})]}),d.jsxs("label",{className:"flex items-center gap-1",children:[d.jsx("input",{type:"checkbox",checked:!g.customerRequirementsMounting,onChange:e=>M("customerRequirementsMounting",(!e.target.checked).toString()),className:"w-4 h-4 border border-black rounded-none"}),d.jsx("span",{children:"Yes"})]}),d.jsx("span",{children:"• Others:"}),d.jsx("input",{type:"text",value:g.customerRequirementsOther,onChange:e=>M("customerRequirementsOther",e.target.value),className:"flex-1 border-0 bg-transparent text-sm border-b border-black"})]})})]})]})]}),Object.entries({electrical:{title:"1. Electrical integrity inspection",items:["One-key switch between MRR/ICM/ASC mode","Clear the DTC in the vehicle","Check battery voltage and capacity (use a battery tester)","Check whether the battery terminals are securely connected","Check the remaining power of the high voltage battery (>20%)"]},information:{title:"2. Information, tool and item inspection",items:["Items (keys, key plates, certificates, etc.) delivered with vehicle","Glove box (user manual, rubbing strips, vehicle photos, etc.)","Trunk (tire repair kit, reflective vest, warning triangle, etc.)"]},engineCompartment:{title:"3. Engine compartment inspection",items:["Engine hood opening/closing function","Identification information inspection (range extender number*, motor number, complete, clear and consistent product serial plate)","Fluid level inspection (range extender oil*, windshield washer fluid, coolant, brake fluid, etc.)","Pipeline inspection (each system pipeline shall be installed in place without damage, leakage or interference)","Electrical circuit inspection (no looseness, no damage, etc.)"]},external:{title:"4. External inspection",items:["Tires (normal tire pressure, bolts tightened in place)","Rim trim cover and wheel bolt trim cover (installed in place)","Door, tailgate/trunk lid opening/closing, child lock function","Fuel filler cap*, charging port cover opening/closing function","Key function inspection (unlock/lock, tailgate/trunk lid opening)","Vehicle charging inspection (normal charging function)"]},internal:{title:"5. Internal inspection",items:["IP indicator inspection","Horn function","Lamp inspection","Wiper and washer functions","Steering wheel (adjustment/lock)","Entertainment display (normal display/lifting/lowering function)","On-board speaker and microphone function","A/C function (cooling/heating)","Exterior rearview mirrors and windshield heating/defrosting and defogging functions","Wireless charging function","Touch panel function","Power interface function","Exterior rearview mirror function (adjustment/unfolding/folding/turning down at reversing)","Window regulator function (regulating/anti-pinch)","Central door lock function (lock/unlock)","Sunroof, sunshade function (opening/tilting/closing/ventilation)skylight function*","Seat function (adjustment/memory/courtesy/ventilation*/heating*/massage*)","Seat belt inspection (free extension and retraction, no curling, height adjustment)","Storage device condition (front/rear armrest box, trunk partition, cover curtain)"]},lifting:{title:"6. Lifting inspection",items:["Shock absorber inspection (no leakage, no damage to the dust cover)","Each ball joint and bearing inspection (no looseness)","Oil seal and oil pan inspection (no oil leakage)","Dust cover and rubber sleeve inspection (no crack or damage)","Fuel pipeline inspection* (no leakage, properly installed)","Brake pipeline inspection (no leakage, properly installed)","Exhaust pipe inspection* (no rust, no loose installation)","Wheel surface condition (no wear, foreign objects, bulges, cracks, etc.)","Visual inspection of underbody (no scratches, scrapes, cracks, deformation, breakage, rust, defects, flaws, etc.)"]},roadTest:{title:"7. Road test and inspection",items:["Vehicle start (from stationary condition)","Range extender condition* (no abnormal sound)","Brake pedal condition (height, free travel, etc.)","When the vehicle is running:","Seat belt unfastened alarm function","Automatic lock function while driving","Steering condition (easy steering, automatic return, no deviation, no movement interference during steering)","Gear shift condition (smooth shift, no abnormal sound, normal gear display on the instrument panel, etc.)","IP display (speedometer, odometer, battery meter, fuel gauge*, indicator, etc.)","Entertainment display function (navigation)","Braking efficiency","DVR function","Driving condition (no abnormal sound, noise, etc.)","Parking function (AVM, PDC, APA*)"]},final:{title:"8. Final inspection",items:["Accessory inspection (fragrance*, rim trim cover, optional accessories, etc.)","Vehicle cleaning (no dust and impurities in the engine compartment, no dirt on the body, vehicle inside clean without foreign objects and debris)","Trip mileage reset","High voltage battery charged to 90%","Visual inspection (body: whether the joints are flat; paint: whether there are scratches, peeling off, color difference; glass: whether it is clean and free of scratches)","Delete navigation search records, music search records, song singing records, etc. in visitor mode",'Turn off the system prompt tone (central control screen - set the "system key sound" and "system prompt tone")']}}).map(([e,t])=>d.jsx("div",{className:"mb-6",children:d.jsxs("table",{className:"w-full border-collapse border border-black rounded-none",style:{tableLayout:"fixed"},children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"78%"}}),d.jsx("col",{style:{width:"11%"}}),d.jsx("col",{style:{width:"11%"}})]}),d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"border border-black font-bold text-left text-sm",style:{backgroundColor:"#dceeff",padding:"12px"},children:t.title}),d.jsx("th",{className:"border border-black font-bold text-center text-sm",style:{backgroundColor:"#dceeff",padding:"12px"},children:"Pass"}),d.jsx("th",{className:"border border-black font-bold text-center text-sm",style:{backgroundColor:"#dceeff",padding:"12px"},children:"Fail"})]})}),d.jsxs("tbody",{children:[t.items.map((t,n)=>{var r,o;const a=`${e}_${n+1}`;return d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black text-sm",style:{padding:"12px"},children:t}),d.jsx("td",{className:"border border-black text-center",style:{padding:"12px"},children:d.jsx("input",{type:"checkbox",checked:(null==(r=y[a])?void 0:r.checked)||!1,onChange:e=>R(a,"checked",e.target.checked),className:"w-4 h-4 border border-black",style:{borderRadius:"0"}})}),d.jsx("td",{className:"border border-black text-center",style:{padding:"12px"},children:d.jsx("input",{type:"checkbox",checked:(null==(o=y[a])?void 0:o.failed)||!1,onChange:e=>R(a,"failed",e.target.checked),className:"w-4 h-4 border border-black",style:{borderRadius:"0"}})})]},a)}),d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black bg-gray-100 font-bold text-sm",style:{padding:"12px"},children:"Overhaul needed"}),d.jsx("td",{className:"border border-black text-sm",style:{padding:"12px"},colSpan:2,children:d.jsx("textarea",{value:k[e]||"",onChange:t=>((e,t)=>{S(n=>l(s({},n),{[e]:t}))})(e,t.target.value),className:"w-full h-16 border-0 bg-transparent text-sm resize-none outline-none",placeholder:"Enter any overhaul requirements or notes..."})})]})]})]})},e)),d.jsx("div",{className:"mb-6",children:d.jsxs("table",{className:"w-full border-collapse border border-black",style:{tableLayout:"fixed"},children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"33.33%"}}),d.jsx("col",{style:{width:"33.33%"}}),d.jsx("col",{style:{width:"33.33%"}})]}),d.jsxs("thead",{children:[d.jsx("tr",{children:d.jsx("th",{className:"border border-black bg-gray-100 font-bold text-center text-sm",style:{padding:"12px"},colSpan:3,children:"Signatures"})}),d.jsxs("tr",{children:[d.jsx("th",{className:"border border-black bg-gray-100 font-bold text-center text-sm",style:{padding:"12px"},children:"Maintenance Technician"}),d.jsx("th",{className:"border border-black bg-gray-100 font-bold text-center text-sm",style:{padding:"12px"},children:"Maintenance Technical Director"}),d.jsx("th",{className:"border border-black bg-gray-100 font-bold text-center text-sm",style:{padding:"12px"},children:"Delivery Service Manager"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black text-center text-xs",style:{padding:"8px"},children:"(expert at mechanical and electrical maintenance)"}),d.jsx("td",{className:"border border-black text-center text-xs",style:{padding:"8px"}}),d.jsx("td",{className:"border border-black text-center text-xs",style:{padding:"8px"},children:"(new vehicle preparation direction)"})]})]}),d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black text-center",style:{padding:"12px",height:"120px"},children:d.jsx(N,{width:200,height:80,value:C.maintenanceTechnician.signature,onSignatureChange:e=>P("maintenanceTechnician","signature",e)})}),d.jsx("td",{className:"border border-black text-center",style:{padding:"12px",height:"120px"},children:d.jsx(N,{width:200,height:80,value:C.maintenanceTechnicalDirector.signature,onSignatureChange:e=>P("maintenanceTechnicalDirector","signature",e)})}),d.jsx("td",{className:"border border-black text-center",style:{padding:"12px",height:"120px"},children:d.jsx(N,{width:200,height:80,value:C.deliveryServiceManager.signature,onSignatureChange:e=>P("deliveryServiceManager","signature",e)})})]}),d.jsxs("tr",{children:[d.jsxs("td",{className:"border border-black text-center text-sm",style:{padding:"12px"},children:["Date:",d.jsx("input",{type:"date",value:C.maintenanceTechnician.date?C.maintenanceTechnician.date.split("/").reverse().join("-"):"",onChange:e=>{const t=e.target.value;if(t){const[e,n,r]=t.split("-");P("maintenanceTechnician","date",`${r}/${n}/${e}`)}else P("maintenanceTechnician","date","")},className:"ml-2 h-7 px-2 text-sm border border-gray-300 rounded focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",style:{backgroundColor:"#fff",color:"#000",fontSize:"12px",minWidth:"120px"}})]}),d.jsxs("td",{className:"border border-black text-center text-sm",style:{padding:"12px"},children:["Date:",d.jsx("input",{type:"date",value:C.maintenanceTechnicalDirector.date?C.maintenanceTechnicalDirector.date.split("/").reverse().join("-"):"",onChange:e=>{const t=e.target.value;if(t){const[e,n,r]=t.split("-");P("maintenanceTechnicalDirector","date",`${r}/${n}/${e}`)}else P("maintenanceTechnicalDirector","date","")},className:"ml-2 h-7 px-2 text-sm border border-gray-300 rounded focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",style:{backgroundColor:"#fff",color:"#000",fontSize:"12px",minWidth:"120px"}})]}),d.jsxs("td",{className:"border border-black text-center text-sm",style:{padding:"12px"},children:["Date:",d.jsx("input",{type:"date",value:C.deliveryServiceManager.date?C.deliveryServiceManager.date.split("/").reverse().join("-"):"",onChange:e=>{const t=e.target.value;if(t){const[e,n,r]=t.split("-");P("deliveryServiceManager","date",`${r}/${n}/${e}`)}else P("deliveryServiceManager","date","")},className:"ml-2 h-7 px-2 text-sm border border-gray-300 rounded focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",style:{backgroundColor:"#fff",color:"#000",fontSize:"12px",minWidth:"120px"}})]})]})]})]})}),d.jsx("div",{className:"mb-6",children:d.jsxs("table",{className:"w-full border-collapse border border-black",style:{tableLayout:"fixed"},children:[d.jsxs("colgroup",{children:[d.jsx("col",{style:{width:"33.33%"}}),d.jsx("col",{style:{width:"33.33%"}}),d.jsx("col",{style:{width:"33.33%"}})]}),d.jsx("thead",{children:d.jsx("tr",{children:d.jsx("th",{className:"border border-black bg-gray-100 font-bold text-center text-sm",style:{padding:"12px"},colSpan:3,children:"Final Status"})})}),d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"border border-black text-center text-sm",style:{padding:"12px"},children:d.jsxs("label",{className:"flex items-center justify-center gap-2",children:[d.jsx("input",{type:"radio",name:"finalStatus",value:"satisfied",checked:"satisfied"===D,onChange:e=>T(e.target.value),className:"w-4 h-4 border border-black",style:{borderRadius:"0"}}),d.jsx("span",{children:"Inspection satisfied or overhaul completed"})]})}),d.jsx("td",{className:"border border-black text-center text-sm",style:{padding:"12px"},children:d.jsxs("label",{className:"flex items-center justify-center gap-2",children:[d.jsx("input",{type:"radio",name:"finalStatus",value:"overhaul",checked:"overhaul"===D,onChange:e=>T(e.target.value),className:"w-4 h-4 border border-black",style:{borderRadius:"0"}}),d.jsx("span",{children:"Overhaul needed"})]})}),d.jsx("td",{className:"border border-black text-center text-sm",style:{padding:"12px"},children:d.jsxs("label",{className:"flex items-center justify-center gap-2",children:[d.jsx("input",{type:"radio",name:"finalStatus",value:"needed",checked:"needed"===D,onChange:e=>T(e.target.value),className:"w-4 h-4 border border-black",style:{borderRadius:"0"}}),d.jsx("span",{children:"Terminal needed"})]})})]})})]})}),d.jsxs("div",{className:"text-xs space-y-2",style:{fontSize:"11px",lineHeight:"1.4"},children:[d.jsx("p",{children:d.jsx("strong",{children:"Notes:"})}),d.jsx("p",{children:'1. For the configuration items not available, enter "*" in "Fail" column.'}),d.jsx("p",{children:'2. After the test of inspection lines "X" in the "Fail" under the corresponding item for confirmation.'}),d.jsx("p",{children:'3. The non-conformance items shall be detailed in the "overhaul needed" column as remarks and the non-conformity causes shall be elaborated.'}),d.jsx("p",{children:'4. For the function configuration marked with "*" it indicates that the function configuration is applicable to some models.'}),d.jsx("p",{className:"text-right pt-4",style:{fontSize:"10px"},children:"Version time: March 2022"})]})]}),n&&d.jsxs("div",{className:"flex justify-end gap-2 mt-4 print:hidden pdi-action-buttons",children:[d.jsx(h,{variant:"outline",onClick:$,disabled:i,children:"Print PDF"}),d.jsx(h,{onClick:()=>c(void 0,null,function*(){if(null==e?void 0:e.id){u(!0);try{const n={formData:g,checklistState:y,overhauls:k,signatures:C,finalStatus:D,completedAt:(new Date).toISOString(),completedBy:"current_user"};if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e.id)){const{error:t}=yield p.from("car_inventory").update({notes:JSON.stringify(n),updated_at:(new Date).toISOString()}).eq("id",e.id);if(t)throw t}else localStorage.setItem(`pdi:${e.id}`,JSON.stringify(n));t&&t(e.id,n),m({title:"Success",description:"PDI data saved successfully"})}catch(n){m({title:"Error",description:"Failed to save PDI data",variant:"destructive"})}finally{u(!1)}}}),disabled:i||!(null==e?void 0:e.id),className:"bg-blue-600 hover:bg-blue-700 text-white",children:i?"Saving...":"Save PDI Data"})]})]})};export{v as A,S as P};
