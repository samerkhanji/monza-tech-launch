import{j as e,i as t,ag as n,ah as r}from"./index-BmUpYGrm.js";import{r as s}from"./vendor-vN6PtkFd.js";const o=({value:o,onValueChange:a,options:l,placeholder:c="Select an option",disabled:i=!1,className:u,triggerClassName:d,contentClassName:f,itemClassName:m,maxHeight:p=300,searchable:h=!1,multiple:b=!1,values:v=[],onValuesChange:g})=>{const[x,w]=s.useState(!1),[y,j]=s.useState(""),[N,k]=s.useState(-1),E=s.useRef(null),S=s.useRef(null),C=s.useRef(null),L=l.filter(e=>!h||e.label.toLowerCase().includes(y.toLowerCase())),D=(b?l.filter(e=>v.includes(e.value)):l.filter(e=>e.value===o)).map(e=>e.label).join(", ");s.useEffect(()=>{const e=e=>{if(x)switch(e.key){case"ArrowDown":e.preventDefault(),k(e=>e<L.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),k(e=>e>0?e-1:L.length-1);break;case"Enter":if(e.preventDefault(),N>=0&&N<L.length){const e=L[N];e.disabled||T(e.value)}break;case"Escape":e.preventDefault(),w(!1),j(""),k(-1);break;case"Tab":w(!1),j(""),k(-1)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[x,L,N]),s.useEffect(()=>{const e=e=>{if(!x||!S.current)return;const t=S.current,n=0===t.scrollTop,r=t.scrollTop+t.clientHeight>=t.scrollHeight;(e.deltaY<0&&n||e.deltaY>0&&r)&&e.preventDefault()},t=S.current;if(t)return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)},[x]),s.useEffect(()=>{x&&h&&C.current&&setTimeout(()=>{var e;return null==(e=C.current)?void 0:e.focus()},0)},[x,h]),s.useEffect(()=>{const e=e=>{E.current&&!E.current.contains(e.target)&&S.current&&!S.current.contains(e.target)&&(w(!1),j(""),k(-1))};if(x)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x]);const T=e=>{if(b){const t=v.includes(e)?v.filter(t=>t!==e):[...v,e];null==g||g(t)}else null==a||a(e),w(!1),j(""),k(-1)};return e.jsxs("div",{className:t("relative",u),children:[e.jsxs("button",{ref:E,type:"button",onClick:()=>{i||(w(!x),x||(j(""),k(-1)))},disabled:i,className:t("flex h-10 w-full items-center justify-between rounded-none border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",d),style:{userSelect:"none",WebkitUserSelect:"none",cursor:i?"not-allowed":"pointer"},children:[e.jsx("span",{className:"truncate",children:D||c}),e.jsx(n,{className:t("h-4 w-4 opacity-50 transition-transform duration-200",x&&"rotate-180")})]}),x&&e.jsxs("div",{ref:S,className:t("absolute top-full left-0 right-0 z-50 mt-1 max-h-96 min-w-[8rem] overflow-hidden rounded-none border bg-white text-popover-foreground shadow-md",f),style:{maxHeight:`${p}px`,scrollBehavior:"smooth",overscrollBehavior:"contain",scrollSnapType:"y proximity",WebkitOverflowScrolling:"touch",transform:"translateZ(0)",willChange:"transform",backgroundColor:"white"},children:[h&&e.jsx("div",{className:"p-2 border-b border-border",children:e.jsx("input",{ref:C,type:"text",value:y,onChange:e=>j(e.target.value),placeholder:"Search options...",className:"w-full px-2 py-1 text-sm border border-input rounded-none focus:outline-none focus:ring-2 focus:ring-ring",style:{userSelect:"none",WebkitUserSelect:"none"}})}),e.jsx("div",{className:"p-1",children:0===L.length?e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No options found"}):L.map((n,s)=>e.jsxs("div",{onClick:()=>!n.disabled&&T(n.value),className:t("relative flex w-full cursor-default select-none items-center rounded-none py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",N===s&&"bg-accent text-accent-foreground",n.disabled&&"opacity-50 cursor-not-allowed",!n.disabled&&"cursor-pointer hover:bg-accent hover:text-accent-foreground",m),style:{userSelect:"none",WebkitUserSelect:"none",transition:"background-color 0.15s ease, color 0.15s ease"},children:[b&&e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.includes(n.value)&&e.jsx(r,{className:"h-4 w-4"})}),!b&&e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o===n.value&&e.jsx(r,{className:"h-4 w-4"})}),e.jsx("span",{className:"truncate",children:n.label})]},n.value))})]})]})};export{o as E};
