var r=(r,t,e)=>new Promise((n,o)=>{var a=r=>{try{i(e.next(r))}catch(t){o(t)}},c=r=>{try{i(e.throw(r))}catch(t){o(t)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(a,c);i((e=e.apply(r,t)).next())});import{s as t}from"./index-BmUpYGrm.js";import"./vendor-vN6PtkFd.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";class e{static getAllCars(){return r(this,null,function*(){try{const{data:r,error:e}=yield t.from("car_inventory").select("*").not("current_floor","in",["SHOWROOM_1","SHOWROOM_2","GARAGE"]);if(e)throw e;return r||[]}catch(r){return[]}})}static getCarCount(){return r(this,null,function*(){try{const{count:r,error:e}=yield t.from("car_inventory").select("*",{count:"exact",head:!0}).not("current_floor","in",["SHOWROOM_1","SHOWROOM_2","GARAGE"]);return e?0:r||0}catch(r){return 0}})}static getTotalCarCount(){return r(this,null,function*(){try{const{count:r,error:e}=yield t.from("car_inventory").select("*",{count:"exact",head:!0});return e?0:r||0}catch(r){return 0}})}static moveCar(e,n,o){return r(this,null,function*(){try{let r;switch(n){case"floor1":r="SHOWROOM_1";break;case"floor2":r="SHOWROOM_2";break;case"garage":case"garage-schedule":r="GARAGE";break;default:r="INVENTORY"}const{error:a}=yield t.from("car_inventory").update({current_floor:r,notes:o||`Moved to ${r} on ${(new Date).toLocaleDateString()}`,updated_at:(new Date).toISOString()}).eq("id",e);return!a}catch(r){return!1}})}static getCarById(e){return r(this,null,function*(){try{const{data:r,error:n}=yield t.from("car_inventory").select("*").eq("id",e).single();return n?null:r}catch(r){return null}})}static searchCars(e){return r(this,null,function*(){try{const{data:r,error:n}=yield t.from("car_inventory").select("*").not("current_floor","in",["SHOWROOM_1","SHOWROOM_2","GARAGE"]).or(`model.ilike.%${e}%,vin.ilike.%${e}%,brand.ilike.%${e}%`);return n?[]:r||[]}catch(r){return[]}})}}export{e as CarInventoryTable};
