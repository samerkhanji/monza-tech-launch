var e=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(r,a,s)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,n=(e,r)=>{for(var a in r||(r={}))t.call(r,a)&&l(e,a,r[a]);if(s)for(var a of s(r))i.call(r,a)&&l(e,a,r[a]);return e},o=(e,s)=>r(e,a(s));import{j as c,k as d,Q as m,O as v,C as h,g as x,h as g,a as b,P as j,y as u,z as N,E as y,F as p,L as f,I as w,t as C}from"./index-BmUpYGrm.js";import{r as D}from"./vendor-vN6PtkFd.js";import{V as S}from"./VinScannerDialog-C38X97Jl.js";import{T as I,a as k,b as z,c as V,d as O,e as A,S as P}from"./table-BEISn_Te.js";import{a as E,s as F}from"./errorHandling-Dc1u_gNS.js";import{T as M}from"./truck-KpDOpNzC.js";import"./charts-XrXYWaKo.js";import"./utils-DhcIvS4g.js";import"./cameraPermissionManager-D3sOAAEG.js";import"./ocrUtils-boR-SCDU.js";import"./index-dUlNy-FG.js";import"./enhancedMonzaBotService-CP3UVEVb.js";import"./camera-CKQtJJJ8.js";import"./battery-zPCpHw5W.js";import"./file-text-bXPYLusF.js";import"./arrow-left-DqrDEplE.js";const $=e=>o(n({},e),{vin:e.vin||e.vinNumber,vinNumber:e.vinNumber,vehicleCategory:e.vehicleCategory||e.category||"EV",category:e.category||e.vehicleCategory||"EV",status:e.status||"arrived",batteryPercentage:e.batteryPercentage||("EV"===e.vehicleCategory||"EV"===e.category?50:void 0),hasDamages:e.hasDamages||!1,photos:e.photos||[],damages:e.damages||[]});$({id:"1",vinNumber:"1234567890ABCDEFG",model:"Mercedes-Benz S-Class",year:2024,color:"Obsidian Black",arrivalDate:(new Date).toISOString(),brand:"Mercedes-Benz",vehicleCategory:"EV",batteryPercentage:85}),$({id:"2",vinNumber:"9876543210ZYXWVUT",model:"Porsche 911",year:2023,color:"Guards Red",arrivalDate:(new Date).toISOString(),brand:"Porsche",vehicleCategory:"ICEV"});const B=()=>{const[e,r]=D.useState([]),[a,s]=D.useState(!1),[t,i]=D.useState(!1),[l,B]=D.useState({vinNumber:"",model:"",year:(new Date).getFullYear(),color:"",arrivalDate:(new Date).toISOString()});D.useEffect(()=>{const e=[$({id:"1",vinNumber:"1234567890ABCDEFG",model:"Mercedes-Benz S-Class",year:2024,color:"Obsidian Black",arrivalDate:(new Date).toISOString()}),$({id:"2",vinNumber:"9876543210ZYXWVUT",model:"Porsche 911",year:2023,color:"Guards Red",arrivalDate:(new Date).toISOString()})];r(e)},[]);return c.jsxs("div",{className:"container mx-auto py-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-monza-yellow p-3 rounded-lg",children:c.jsx(M,{className:"h-8 w-8 text-monza-black"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-monza-black",children:"New Car Arrivals"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Newly arrived vehicles awaiting processing"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(d,{variant:"outline",onClick:()=>s(!0),className:"flex items-center gap-2 border-blue-200 text-blue-700 hover:bg-blue-50",children:[c.jsx(m,{className:"h-4 w-4"}),"Scan VIN"]}),c.jsxs(d,{onClick:()=>i(!0),className:"flex items-center gap-2 bg-monza-yellow text-monza-black hover:bg-monza-yellow/90",children:[c.jsx(v,{className:"h-4 w-4"}),"Add Car Manually"]})]})]}),c.jsxs(h,{className:"border border-gray-200 shadow-sm",children:[c.jsx(x,{className:"bg-gray-50 border-b",children:c.jsxs(g,{className:"text-monza-black",children:["New Car Arrivals (",e.length,")"]})}),c.jsx(b,{className:"p-0",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs(I,{children:[c.jsx(k,{children:c.jsxs(z,{className:"bg-gray-50",children:[c.jsx(V,{className:"font-semibold text-monza-black",children:"VIN"}),c.jsx(V,{className:"font-semibold text-monza-black",children:"Model"}),c.jsx(V,{className:"font-semibold text-monza-black",children:"Year"}),c.jsx(V,{className:"font-semibold text-monza-black",children:"Color"}),c.jsx(V,{className:"font-semibold text-monza-black",children:"PDI Status"}),c.jsx(V,{className:"font-semibold text-monza-black",children:"Arrival Date"}),c.jsx(V,{className:"font-semibold text-monza-black text-right",children:"Actions"})]})}),c.jsx(O,{children:e.map(a=>{return c.jsxs(z,{className:"hover:bg-monza-yellow/5",children:[c.jsx(A,{className:"font-mono text-sm",children:a.vin||a.vinNumber}),c.jsx(A,{className:"font-medium text-monza-black",children:a.model}),c.jsx(A,{children:a.year}),c.jsx(A,{children:a.color}),c.jsx(A,{children:c.jsx("div",{className:"cursor-pointer",children:c.jsx(P,{variant:(s=a.pdiCompleted,s?"success":"warning"),children:a.pdiCompleted?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mr-1 text-lg",children:"☺"})," Complete"]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mr-1 text-lg",children:"☹"})," Pending"]})})})}),c.jsx(A,{children:new Date(a.arrivalDate).toLocaleDateString()}),c.jsx(A,{children:c.jsxs("div",{className:"flex gap-1 justify-end",children:[c.jsxs(d,{variant:"outline",size:"sm",onClick:()=>(a=>{const s=e.find(e=>e.id===a);if(!s)return;const t={id:`inv-${Date.now()}`,vinNumber:s.vin||s.vinNumber,model:s.model,year:s.year,color:s.color,status:"in_stock",batteryPercentage:s.batteryPercentage,category:s.category||"EV",arrivalDate:s.arrivalDate,notes:s.notes,photos:s.photos,damages:s.damages},i=F("carInventory",[]);i.push(t),localStorage.setItem("carInventory",JSON.stringify(i)),r(e=>e.filter(e=>e.id!==a)),C({title:"Car Moved to Inventory",description:`${s.model} has been moved to Car Inventory`})})(a.id),className:"bg-green-50 hover:bg-green-100 border-green-200 text-green-700",children:[c.jsx(j,{className:"h-4 w-4 mr-1"}),"Move to Inventory"]}),c.jsx(d,{variant:"destructive",size:"sm",onClick:()=>{return e=a.id,r(r=>r.filter(r=>r.id!==e)),void C({title:"Car Removed",description:"Car removed from New Arrivals"});var e},children:"Remove"})]})})]},a.id);var s})})]})})})]}),c.jsx(S,{isOpen:a,onClose:()=>s(!1),onVinScanned:a=>{const t=F("orderedCars",[]),i=t.find(e=>e.vin_number===a);if(s(!1),i){const e=t.filter(e=>e.vin_number!==a);localStorage.setItem("orderedCars",JSON.stringify(e));const s=$({id:`arrival-${Date.now()}`,vinNumber:a,model:i.model||`Vehicle ${a.slice(-4)}`,year:i.year||(new Date).getFullYear(),color:i.color||"Unknown",arrivalDate:(new Date).toISOString(),brand:i.brand||"Unknown",category:i.category||"EV"});return r(e=>[...e,s]),void C({title:"Car Moved to Arrivals",description:`${i.model||"Vehicle"} (VIN: ${a}) moved from Ordered Cars to New Arrivals`})}const l=e.find(e=>e.vinNumber===a||e.vin===a);if(l)return void C({title:"Car Already Exists",description:`${l.model} is already in New Arrivals`,variant:"destructive"});const n=$({id:`new-arrival-${Date.now()}`,vinNumber:a,model:`Vehicle ${a.slice(-4)}`,year:(new Date).getFullYear(),color:"Unknown",arrivalDate:(new Date).toISOString()});r(e=>[...e,n]),C({title:"New Car Added",description:`Vehicle with VIN ${a} added to New Arrivals`})}}),c.jsx(u,{open:t,onOpenChange:i,children:c.jsxs(N,{className:"sm:max-w-[600px]",children:[c.jsx(y,{children:c.jsx(p,{children:"Add Car to New Arrivals"})}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(f,{htmlFor:"vin",children:"VIN Number"}),c.jsx(w,{id:"vin",value:l.vinNumber,onChange:e=>B(r=>o(n({},r),{vinNumber:e.target.value})),placeholder:"17-character VIN",maxLength:17})]}),c.jsxs("div",{children:[c.jsx(f,{htmlFor:"model",children:"Model"}),c.jsx(w,{id:"model",value:l.model,onChange:e=>B(r=>o(n({},r),{model:e.target.value})),placeholder:"Car model"})]}),c.jsxs("div",{children:[c.jsx(f,{htmlFor:"year",children:"Year"}),c.jsx(w,{id:"year",type:"number",value:l.year,onChange:e=>B(r=>o(n({},r),{year:E(e.target.value,2024)}))})]}),c.jsxs("div",{children:[c.jsx(f,{htmlFor:"color",children:"Color"}),c.jsx(w,{id:"color",value:l.color,onChange:e=>B(r=>o(n({},r),{color:e.target.value})),placeholder:"Car color"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx(d,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),c.jsx(d,{onClick:()=>{if(!l.vinNumber||!l.model||!l.color)return void C({title:"Missing Information",description:"Please fill in VIN, model, and color",variant:"destructive"});if(e.find(e=>e.vinNumber===l.vinNumber||e.vin===l.vinNumber))return void C({title:"VIN Already Exists",description:"A car with this VIN is already in New Arrivals",variant:"destructive"});const a=$(n({id:`new-arrival-manual-${Date.now()}`},l));r(e=>[...e,a]),i(!1),B({vinNumber:"",model:"",year:(new Date).getFullYear(),color:"",arrivalDate:(new Date).toISOString()}),C({title:"Car Added",description:`${l.model} added to New Arrivals`})},className:"bg-monza-yellow hover:bg-monza-yellow/90 text-monza-black",children:"Add Car"})]})]})})]})};export{B as default};
