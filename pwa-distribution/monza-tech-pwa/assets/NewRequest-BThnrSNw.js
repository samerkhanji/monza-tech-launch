import{aH as S,$ as w,r as a,j as e,b as R,aa as b,a as g,b2 as c}from"./index-BjC2zLSq.js";const F=()=>{const u=S(),{user:i}=w(),[t,m]=a.useState(!1),[n,v]=a.useState(""),[o,f]=a.useState(""),[x,j]=a.useState(""),[l,d]=a.useState("medium"),[k,y]=a.useState(null),N=async s=>{if(s.preventDefault(),!n||!o){c.error("Please fill in all required fields");return}m(!0);try{await new Promise(q=>setTimeout(q,1e3));const r={id:Date.now().toString(),requestType:n,message:o,details:x,priority:l,status:"submitted",submittedBy:(i==null?void 0:i.name)||"Unknown User",submittedAt:new Date().toISOString(),comments:[]},h=localStorage.getItem("activeRequests"),p=h?JSON.parse(h):[];p.unshift(r),localStorage.setItem("activeRequests",JSON.stringify(p)),c.success("Request submitted successfully!"),u("/requests")}catch(r){c.error("Failed to submit request. Please try again."),console.error(r)}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"New Request"}),e.jsx("p",{className:"text-muted-foreground",children:"Submit a new request to the appropriate team"})]}),e.jsx(R,{className:"p-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"requestType",className:"form-label block",children:"Request Type*"}),e.jsxs("select",{id:"requestType",className:"form-input w-full rounded-md border border-input p-2",value:n,onChange:s=>v(s.target.value),disabled:t,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select request type"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"Approval",children:"Approval"}),e.jsx("option",{value:"Question",children:"Question"}),e.jsx("option",{value:"Problem",children:"Problem"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"message",className:"form-label block",children:"Message*"}),e.jsx(b,{id:"message",placeholder:"Describe your request in brief...",value:o,onChange:s=>f(s.target.value),disabled:t,required:!0,className:"min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"details",className:"form-label block",children:"Detailed Information"}),e.jsx(b,{id:"details",placeholder:"Provide any additional details or context for your request...",value:x,onChange:s=>j(s.target.value),disabled:t,className:"min-h-[120px]"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Adding detailed information helps us process your request faster"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"priority",className:"form-label block",children:"Priority Level*"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:`border rounded-md p-3 cursor-pointer text-center ${l==="low"?"bg-green-100 border-green-500":"hover:bg-secondary"}`,onClick:()=>d("low"),children:[e.jsx("div",{className:"font-medium",children:"Low"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"For non-urgent matters"})]}),e.jsxs("div",{className:`border rounded-md p-3 cursor-pointer text-center ${l==="medium"?"bg-yellow-100 border-yellow-500":"hover:bg-secondary"}`,onClick:()=>d("medium"),children:[e.jsx("div",{className:"font-medium",children:"Medium"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Needs attention soon"})]}),e.jsxs("div",{className:`border rounded-md p-3 cursor-pointer text-center ${l==="high"?"bg-red-100 border-red-500":"hover:bg-secondary"}`,onClick:()=>d("high"),children:[e.jsx("div",{className:"font-medium",children:"High"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Urgent attention required"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"file",className:"form-label block",children:"Attachment (Optional)"}),e.jsx("input",{id:"file",type:"file",className:"form-input w-full rounded-md border border-input p-2",onChange:s=>{var r;return y(((r=s.target.files)==null?void 0:r[0])||null)},disabled:t}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload any relevant documents or images"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>u("/requests"),disabled:t,children:"Cancel"}),e.jsx(g,{type:"submit",disabled:t,children:t?"Submitting...":"Submit Request"})]})]})})]})};export{F as default};
