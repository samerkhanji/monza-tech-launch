import{s as r,b4 as d}from"./index-BUhc98AO.js";const c={getAll:async()=>{const{data:t,error:e}=await r.from("users").select("*").order("created_at",{ascending:!1});if(e)throw e;return t.map(n=>({id:n.id,name:n.name,email:n.email,role:n.role,hybridRole:n.hybrid_role,phoneNumber:n.phone_number,department:n.department,emergencyContactName:n.emergency_contact_name,emergencyContactPhone:n.emergency_contact_phone,address:n.address,notes:n.notes,createdAt:n.created_at,updatedAt:n.updated_at}))},getById:async t=>{const{data:e,error:n}=await r.from("users").select("*").eq("id",t).single();if(n)throw n;return{id:e.id,name:e.name,email:e.email,role:e.role,hybridRole:e.hybrid_role,phoneNumber:e.phone_number,department:e.department,emergencyContactName:e.emergency_contact_name,emergencyContactPhone:e.emergency_contact_phone,address:e.address,notes:e.notes,createdAt:e.created_at,updatedAt:e.updated_at}},create:async t=>{const e=await d(t.password),{data:n,error:a}=await r.from("users").insert({name:t.name,email:t.email,password_hash:e,role:t.role,hybrid_role:t.hybridRole,phone_number:t.phoneNumber,department:t.department,emergency_contact_name:t.emergencyContactName,emergency_contact_phone:t.emergencyContactPhone,address:t.address,notes:t.notes}).select().single();if(a)throw a;return{id:n.id,name:n.name,email:n.email,role:n.role,hybridRole:n.hybrid_role,phoneNumber:n.phone_number,department:n.department,emergencyContactName:n.emergency_contact_name,emergencyContactPhone:n.emergency_contact_phone,address:n.address,notes:n.notes,createdAt:n.created_at,updatedAt:n.updated_at}},update:async(t,e)=>{const n={name:e.name,email:e.email,role:e.role,hybrid_role:e.hybridRole,phone_number:e.phoneNumber,department:e.department,emergency_contact_name:e.emergencyContactName,emergency_contact_phone:e.emergencyContactPhone,address:e.address,notes:e.notes};e.password&&(n.password_hash=await d(e.password));const{data:a,error:o}=await r.from("users").update(n).eq("id",t).select().single();if(o)throw o;return{id:a.id,name:a.name,email:a.email,role:a.role,hybridRole:a.hybrid_role,phoneNumber:a.phone_number,department:a.department,emergencyContactName:a.emergency_contact_name,emergencyContactPhone:a.emergency_contact_phone,address:a.address,notes:a.notes,createdAt:a.created_at,updatedAt:a.updated_at}},delete:async t=>{const{error:e}=await r.from("users").delete().eq("id",t);if(e)throw e}};export{c as u};
