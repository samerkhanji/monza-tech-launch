import{r as x,t as T,j as e,D as he,q as ge,v as xe,w as ve,a2 as be,Y as je,Z as Ne,_ as ee,aq as ye,ab as ne,aG as ue,b0 as fe,aA as re,L as u,I as N,ac as te,a as P,X as we,aa as Se,aN as Ce,ay as Ee,b3 as Pe,aK as Te,g as De,h as Fe,i as ie,k as H,l as Ve,m as R,ae as me}from"./index-BjC2zLSq.js";import{S as ke}from"./scan-UlmHNKsW.js";import{R as Me}from"./realExcelService-DcLnerM9.js";const Ie=({isOpen:v,onClose:j,onAddPart:l,onIncrementPart:w,existingParts:V=[],floor:h})=>{const[i,k]=x.useState("manual"),[b,S]=x.useState(!1),[D,s]=x.useState(!1),[m,I]=x.useState([]),[C,B]=x.useState(null),d=x.useRef(null),Q=x.useRef(null),M=x.useRef(null),q=x.useRef(!0),[t,W]=x.useState({carModel:"",partName:"",partNumber:"",quantity:1,shelf:"",column:"",row:"",room:"",supplier:"DF",vehicleType:"EV",category:h==="Garage"?"part":"accessory",vin:"",pdiStatus:"pending",pdiNotes:""});x.useEffect(()=>{v&&(()=>{const g=localStorage.getItem("orderedParts");if(g){const E=JSON.parse(g).filter(F=>F.status==="delivered"&&!V.some(_=>_.partNumber===F.part_number));I(E)}})()},[v,V]);const ae=r=>{r.preventDefault();const g=V.find(c=>c.partNumber.toLowerCase()===t.partNumber.toLowerCase());if(g&&w)w(t.partNumber,t.quantity),T({title:"Part Quantity Updated",description:`Added ${t.quantity} units to existing ${g.partName}`});else{const c={carModel:t.carModel,partName:t.partName,partNumber:t.partNumber,quantity:t.quantity,location:{shelf:t.shelf,column:t.column,row:t.row,room:t.room,floor:h},supplier:t.supplier,vehicleType:t.vehicleType,category:t.category,vin:t.vin,pdiStatus:t.pdiStatus,pdiNotes:t.pdiNotes};l(c)}U(),j()},oe=()=>{if(!C)return;const r=V.find(c=>c.partNumber.toLowerCase()===C.part_number.toLowerCase());if(r&&w)w(C.part_number,C.quantity),T({title:"Part Quantity Updated",description:`Added ${C.quantity} units to existing ${r.partName}`});else{const c={carModel:t.carModel||"Generic",partName:C.part_name,partNumber:C.part_number,quantity:C.quantity,location:{shelf:t.shelf,column:t.column,row:t.row,room:t.room||"Main Garage",floor:h},supplier:C.supplier,vehicleType:t.vehicleType,category:(C.category==="ev_erev","part"),vin:t.vin,pdiStatus:t.pdiStatus,pdiNotes:t.pdiNotes};l(c)}const g=m.filter(c=>c.id!==C.id);localStorage.setItem("orderedParts",JSON.stringify([...JSON.parse(localStorage.getItem("orderedParts")||"[]").filter(c=>c.id!==C.id)])),I(g),U(),B(null),j()},se=()=>{if(!t.partName||!t.partNumber||!t.supplier||!t.quantity){T({title:"Error",description:"Please fill in all required fields (Part Name, Part Number, Supplier, Quantity)",variant:"destructive"});return}const r={id:Date.now().toString(),part_name:t.partName,part_number:t.partNumber,quantity:t.quantity,supplier:t.supplier,order_reference:`ORD-${Date.now().toString().slice(-6)}`,order_date:new Date().toISOString(),status:"ordered",category:t.vehicleType==="EV"||t.vehicleType==="REV"?"ev_erev":"normal_engine",notes:t.pdiNotes,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},g=JSON.parse(localStorage.getItem("orderedParts")||"[]");localStorage.setItem("orderedParts",JSON.stringify([...g,r])),T({title:"Order Created",description:`Order for ${t.partName} (${t.partNumber}) has been created successfully.`}),U(),j()},U=()=>{W({carModel:"",partName:"",partNumber:"",quantity:1,shelf:"",column:"",row:"",room:"",supplier:"DF",vehicleType:"EV",category:h==="Garage"?"part":"accessory",vin:"",pdiStatus:"pending",pdiNotes:""})},f=(r,g)=>{W(c=>({...c,[r]:g}))},o=x.useCallback(async()=>{var r,g;try{s(!0),console.log("ðŸŽ¥ Attempting to start camera..."),await new Promise(n=>setTimeout(n,50)),console.log("Initial video element check:",{videoRefExists:!!d.current,activeTab:i,isCameraLoading:D,isCameraActive:b,dialogOpen:v,isMounted:q.current}),i!=="camera"&&(console.log("Switching to OCR Scanner tab..."),k("camera"),await new Promise(n=>setTimeout(n,300))),d.current||(console.log("Video element not ready, waiting 500ms..."),await new Promise(n=>setTimeout(n,500)),d.current||(console.log("Video element still not ready, waiting additional 500ms..."),await new Promise(n=>setTimeout(n,500)),d.current||(console.error("Video element still not available after delays"),console.log("DOM state check:",{activeTab:i,videoElement:document.querySelector("video[ref]"),videoElementsInDOM:document.querySelectorAll("video").length,tabContent:((g=(r=document.querySelector('[data-state="active"]'))==null?void 0:r.innerHTML)==null?void 0:g.includes("video"))||!1}))));const c=new Promise((n,A)=>{setTimeout(()=>A(new Error("Camera initialization timeout")),1e4)}),E=window.location.protocol==="https:"||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";if(console.log("ðŸ”’ Security context:",{protocol:window.location.protocol,hostname:window.location.hostname,isSecure:E}),!E)throw new Error("Camera requires HTTPS or localhost. Current protocol: "+window.location.protocol);if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API not supported in this browser");let F=[];try{console.log("Enumerating devices..."),F=await Promise.race([navigator.mediaDevices.enumerateDevices(),c]);const n=F.filter(A=>A.kind==="videoinput");if(console.log("ðŸ“¹ Available video devices:",n.length),console.log("ðŸ“¹ Device details:",n.map(A=>({label:A.label,deviceId:A.deviceId}))),n.length===0)throw new Error("No camera devices found on this system")}catch(n){console.warn("Could not enumerate devices:",n)}const _=[{video:{facingMode:"environment",width:{ideal:1280,max:1920},height:{ideal:720,max:1080}}},{video:{facingMode:"environment",width:{ideal:640,max:1280},height:{ideal:480,max:720}}},{video:{facingMode:"user",width:{ideal:640,max:1280},height:{ideal:480,max:720}}},{video:{width:{ideal:640,max:1280},height:{ideal:480,max:720}}},{video:!0}];let O=null,ce=null;for(let n=0;n<_.length;n++){const A=_[n];try{console.log(`Trying constraint set ${n+1}/${_.length}:`,A),O=await Promise.race([navigator.mediaDevices.getUserMedia(A),c]),ce=A,console.log("Camera stream obtained with constraints:",A);break}catch(L){if(console.warn(`Constraint set ${n+1} failed:`,L instanceof Error?L.name:"Unknown",L instanceof Error?L.message:String(L)),L instanceof DOMException&&L.name==="NotAllowedError")throw L;continue}}if(!O)throw new Error("Failed to get camera stream with any constraints. Please check camera permissions and try again.");if(console.log("ðŸŽ¥ Camera setup completed with constraints:",ce),console.log("ðŸ”— About to assign stream to video element..."),console.log("ðŸ“º Video element exists:",!!d.current),console.log("ðŸŽ¥ Stream exists:",!!O),console.log("ðŸ“¹ Stream active:",O.active),M.current=O,!q.current||!d.current){console.error("Video element ref is null or component unmounted - cannot assign stream"),console.log("Debug info:",{isMounted:q.current,videoRefExists:!!d.current,activeTab:i,dialogOpen:v}),O&&O.getTracks().forEach(n=>n.stop()),s(!1),T({title:"Camera Error",description:"Video element not found. Please ensure you are on the OCR Scanner tab and try again.",variant:"destructive"});return}console.log("ðŸ“º Setting up video element...");const a=d.current;a.srcObject=null,setTimeout(()=>{console.log("setTimeout executing - assigning stream to video element..."),console.log("ðŸ“º Video ref still exists:",!!d.current),console.log("ðŸŽ¥ Stream still exists:",!!O),console.log("ðŸ”— Assigning stream to video element..."),console.log("ðŸŽ¥ Stream details:",{active:O.active,id:O.id,tracks:O.getTracks().length,videoTracks:O.getVideoTracks().length}),console.log("ðŸ“º Assigning stream to video.srcObject..."),a.srcObject=O,console.log("Stream assigned, setting properties..."),a.muted=!0,a.playsInline=!0,a.autoplay=!0,console.log("âš™ï¸ Basic properties set, now setting styles..."),a.style.display="block",a.style.width="100%",a.style.height="100%",a.style.minHeight="300px",a.style.backgroundColor="#000",a.style.objectFit="cover",console.log("Styles applied to video element"),console.log("ðŸ“º Video element properties:",{srcObject:!!a.srcObject,readyState:a.readyState,networkState:a.networkState,paused:a.paused,muted:a.muted,playsInline:a.playsInline,autoplay:a.autoplay});const n=()=>{console.log("ðŸ“º Video metadata loaded"),console.log(`ðŸ“ Video dimensions: ${a.videoWidth}x${a.videoHeight}`),console.log("VIDEO Video ready state:",a.readyState),console.log("Video current time:",a.currentTime),console.log("ðŸ–¥ï¸ Video element size:",{clientWidth:a.clientWidth,clientHeight:a.clientHeight,offsetWidth:a.offsetWidth,offsetHeight:a.offsetHeight}),a.style.display="block",a.style.opacity="1",a.style.visibility="visible",console.log("â–¶ï¸ Attempting to play video..."),a.play().then(()=>{var z,X;console.log("Video playing successfully"),console.log("ðŸŽ¥ Stream active:",(z=M.current)==null?void 0:z.active),console.log("ðŸ“¹ Video tracks:",(X=M.current)==null?void 0:X.getVideoTracks().map(le=>({label:le.label,enabled:le.enabled,readyState:le.readyState}))),S(!0),s(!1)}).catch(z=>{console.error("Video play error:",z),console.log("Trying alternative play approach..."),S(!0),s(!1),setTimeout(()=>{a&&M.current&&(console.log("Retry play attempt..."),a.play().then(()=>{console.log("Video playing after retry")}).catch(X=>{console.error("Video play retry failed:",X),console.log("ðŸ“º Final video state:",{readyState:a.readyState,networkState:a.networkState,paused:a.paused,currentTime:a.currentTime,duration:a.duration,videoWidth:a.videoWidth,videoHeight:a.videoHeight})}))},1e3)})},A=()=>{console.log("Video can play - forcing play now"),a.paused&&a.play().catch(console.error)},L=()=>{console.log("Video load started")},G=()=>{console.log("Video data loaded"),console.log("ðŸ“º Video element after data load:",{videoWidth:a.videoWidth,videoHeight:a.videoHeight,duration:a.duration,readyState:a.readyState})},Z=()=>{console.log("PROGRESS Video loading progress")},J=()=>{console.log("â–¶ï¸ Video play event fired"),S(!0),s(!1)},Y=()=>{console.log("VIDEO Video playing event fired"),S(!0),s(!1)},K=z=>{console.error("Video element error:",z),console.error("Video error details:",{error:a.error,networkState:a.networkState,readyState:a.readyState}),s(!1),T({title:"Video Error",description:"Video element error occurred. Check console for details.",variant:"destructive"})};a.addEventListener("loadedmetadata",n),a.addEventListener("canplay",A),a.addEventListener("loadstart",L),a.addEventListener("loadeddata",G),a.addEventListener("progress",Z),a.addEventListener("play",J),a.addEventListener("playing",Y),a.addEventListener("error",K)},100),setTimeout(()=>{var n,A,L,G,Z,J,Y,K,z;D&&!b&&(console.warn("Video loading timeout, forcing activation"),console.log("Final timeout debug:",{hasStream:!!M.current,streamActive:(n=M.current)==null?void 0:n.active,videoSrcObject:!!((A=d.current)!=null&&A.srcObject),videoReadyState:(L=d.current)==null?void 0:L.readyState,videoPaused:(G=d.current)==null?void 0:G.paused,videoCurrentTime:(Z=d.current)==null?void 0:Z.currentTime,videoDimensions:`${(J=d.current)==null?void 0:J.videoWidth}x${(Y=d.current)==null?void 0:Y.videoHeight}`,elementVisible:((K=d.current)==null?void 0:K.style.display)!=="none",elementOpacity:(z=d.current)==null?void 0:z.style.opacity}),S(!0),s(!1))},8e3);const de=O.getVideoTracks();if(de.length>0){const n=de[0];console.log("ðŸ“¹ Video track details:",{label:n.label,kind:n.kind,enabled:n.enabled,muted:n.muted,readyState:n.readyState,settings:n.getSettings(),capabilities:n.getCapabilities?n.getCapabilities():"not supported"})}}catch(c){s(!1),console.error("Camera error:",c);let E="Could not access camera. ",F="Camera Error";if(c instanceof DOMException)switch(c.name){case"NotAllowedError":F="Camera Permission Denied",E="Please allow camera access in your browser settings and refresh the page.";break;case"NotFoundError":F="No Camera Found",E="No camera devices were found on this device.";break;case"NotSupportedError":F="Camera Not Supported",E="Camera is not supported in this browser or device.";break;case"NotReadableError":F="Camera Not Available",E="Camera is already in use by another application or there was a hardware error.";break;case"OverconstrainedError":F="Camera Configuration Error",E="The requested camera settings are not supported by your device.";break;case"SecurityError":F="Security Error",E="Camera access blocked due to security restrictions.";break;default:E=`Camera error: ${c.name}. Please check camera permissions and ensure you are using HTTPS.`}else c instanceof Error?c.message.includes("timeout")?(F="Camera Timeout",E="Camera initialization timed out. Please check your camera permissions and try again."):E=c.message:E="Unknown camera error. Please check camera permissions and ensure you are using HTTPS.";T({title:F,description:E,variant:"destructive"})}},[D,b]),y=x.useCallback(()=>{M.current&&(M.current.getTracks().forEach(r=>r.stop()),M.current=null),d.current&&(d.current.srcObject=null),S(!1),s(!1)},[]);x.useEffect(()=>(q.current=!0,!v&&b&&y(),()=>{q.current=!1}),[v,b,y]);const p=x.useCallback(async()=>{if(!d.current||!Q.current)return;const r=Q.current,g=r.getContext("2d");g&&(r.width=d.current.videoWidth,r.height=d.current.videoHeight,g.drawImage(d.current,0,0),r.toDataURL(),setTimeout(()=>{const c=`PT-${Date.now().toString().slice(-6)}`,E=V.find(F=>F.partNumber.toLowerCase()===c.toLowerCase());E?w&&(w(c,1),T({title:"Part Found & Updated",description:`Added 1 unit to existing ${E.partName}`})):(W(F=>({...F,partNumber:c})),k("manual"),T({title:"Part Number Scanned",description:`Please complete the part information for ${c}`})),y()},1500),T({title:"Processing...",description:"Scanning part number from image..."}))},[V,w,y]),$={"Floor 1":["Display Storage","Customer Area","Waiting Room Storage"],"Floor 2":["Premium Display","Executive Storage","VIP Lounge Storage"],Garage:["Engine Parts Room","Maintenance Bay","Accessories Room","Tool Storage","Waste Management"]};return e.jsx(he,{open:v,onOpenChange:j,children:e.jsxs(ge,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(xe,{children:[e.jsxs(ve,{children:["Add Part to ",h," Inventory"]}),e.jsxs(be,{children:["Add new parts to the ",h.toLowerCase()," inventory using manual entry, camera scanning, or from delivered orders."]})]}),e.jsxs(je,{value:i,onValueChange:k,className:"w-full",children:[e.jsxs(Ne,{className:"grid w-full grid-cols-4",children:[e.jsxs(ee,{value:"manual",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Manual Entry"]}),e.jsxs(ee,{value:"camera",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"OCR Scanner"]}),e.jsxs(ee,{value:"ordered",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"From Orders (",m.length,")"]}),e.jsxs(ee,{value:"order",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Order New Part"]})]}),e.jsx(re,{value:"manual",className:"space-y-4",children:e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"carModel",children:"Car Model"}),e.jsx(N,{id:"carModel",value:t.carModel,onChange:r=>f("carModel",r.target.value),placeholder:"e.g., Tesla Model 3",required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"vehicleType",children:"Vehicle Type"}),e.jsxs("select",{id:"vehicleType",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.vehicleType,onChange:r=>f("vehicleType",r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select vehicle type"}),e.jsx("option",{value:"EV",children:"Electric Vehicle (EV)"}),e.jsx("option",{value:"REV",children:"Range Extended EV (REV)"}),e.jsx("option",{value:"ICEV",children:"Internal Combustion (ICEV)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"partName",children:"Part Name"}),e.jsx(N,{id:"partName",value:t.partName,onChange:r=>f("partName",r.target.value),placeholder:"e.g., Air Filter",required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"partNumber",children:"Part Number"}),e.jsx(N,{id:"partNumber",value:t.partNumber,onChange:r=>f("partNumber",r.target.value),placeholder:"e.g., VF-2024-AF-001",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"quantity",children:"Quantity"}),e.jsx(N,{id:"quantity",type:"number",min:"1",value:t.quantity,onChange:r=>f("quantity",parseInt(r.target.value)),required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"supplier",children:"Supplier"}),e.jsxs("select",{id:"supplier",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.supplier,onChange:r=>f("supplier",r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select supplier"}),e.jsx("option",{value:"DF",children:"Dong Feng (DF)"}),e.jsx("option",{value:"AZ",children:"AutoZone (AZ)"}),e.jsx("option",{value:"BMW",children:"BMW Parts"}),e.jsx("option",{value:"TESLA",children:"Tesla Parts"}),e.jsx("option",{value:"BYD",children:"BYD Parts"}),e.jsx("option",{value:"MERCEDES",children:"Mercedes Parts"}),e.jsx("option",{value:"GENERIC",children:"Generic Parts"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"room",children:"Room"}),e.jsxs("select",{id:"room",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.room,onChange:r=>f("room",r.target.value),children:[e.jsx("option",{value:"",children:"Select room"}),$[h].map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"shelf",children:"Shelf"}),e.jsx(N,{id:"shelf",value:t.shelf,onChange:r=>f("shelf",r.target.value),placeholder:"P1, P2..."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"column",children:"Column"}),e.jsx(N,{id:"column",value:t.column,onChange:r=>f("column",r.target.value),placeholder:"1, 2, 3..."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"row",children:"Row"}),e.jsx(N,{id:"row",value:t.row,onChange:r=>f("row",r.target.value),placeholder:"1, 2, 3..."})]})]}),e.jsxs(te,{children:[e.jsx(P,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),e.jsx(P,{type:"submit",children:"Add Part"})]})]})}),e.jsx(re,{value:"camera",className:"space-y-4",children:e.jsxs("div",{className:"mt-6",children:[!b&&!D?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8",children:[e.jsx(ne,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"OCR Part Number Scanner"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Use your camera to automatically scan and detect part numbers"}),e.jsxs(P,{onClick:o,className:"flex items-center gap-2 bg-monza-yellow hover:bg-monza-yellow/90 text-monza-black font-semibold",children:[e.jsx(ne,{className:"h-4 w-4"}),"Start Camera"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements:"})," Camera requires HTTPS and permissions"]}),e.jsxs("p",{children:["MOBILE ",e.jsx("strong",{children:"Mobile:"})," Will try to use back camera for scanning"]}),e.jsxs("p",{children:["ðŸ”’ ",e.jsx("strong",{children:"Privacy:"})," Camera data stays on your device"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tip:"})," Ensure good lighting for best results"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden mx-auto max-w-lg",children:[e.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,controls:!1,className:"w-full h-full min-h-[300px] max-h-[500px] object-cover cursor-pointer block",style:{display:"block",backgroundColor:"#000",minHeight:"300px",maxHeight:"500px"},onClick:()=>{d.current&&(console.log("MOBILE Manual play attempt"),d.current.play().then(()=>{console.log("Manual play successful")}).catch(r=>{console.error("Manual play failed:",r)}))}}),D&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-80 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-monza-yellow border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Starting camera..."}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"Please allow camera access when prompted"}),e.jsx(P,{onClick:y,variant:"outline",size:"sm",className:"mt-4 text-xs bg-white/10 border-white/20 text-white hover:bg-white/20",children:"Cancel"})]})}),b&&!D&&e.jsx("div",{className:"absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded z-10",children:"ðŸ“¹ Camera Active"}),b&&!D&&e.jsx("div",{className:"absolute inset-4 border-2 border-monza-yellow border-dashed rounded-lg flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-black/70 text-white px-4 py-2 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm font-medium",children:"Position part number here"}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Keep text clear and centered"})]})}),b&&!D&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-8 left-8 w-6 h-6 border-l-2 border-t-2 border-monza-yellow"}),e.jsx("div",{className:"absolute top-8 right-8 w-6 h-6 border-r-2 border-t-2 border-monza-yellow"}),e.jsx("div",{className:"absolute bottom-8 left-8 w-6 h-6 border-l-2 border-b-2 border-monza-yellow"}),e.jsx("div",{className:"absolute bottom-8 right-8 w-6 h-6 border-r-2 border-b-2 border-monza-yellow"})]})]}),b&&!D&&e.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[e.jsxs(P,{onClick:p,className:"flex items-center gap-2 bg-monza-yellow hover:bg-monza-yellow/90 text-monza-black font-semibold",children:[e.jsx(ke,{className:"h-4 w-4"}),"Scan Part Number"]}),e.jsx(P,{onClick:()=>{if(console.log("Manual video refresh"),d.current&&M.current){const r=d.current;r.srcObject=null,setTimeout(()=>{r.srcObject=M.current,r.play().then(()=>{console.log("Video refresh successful")}).catch(console.error)},100)}},variant:"outline",size:"sm",className:"flex items-center gap-1 text-xs",children:"Refresh Video"}),e.jsx(P,{onClick:()=>{if(console.log("ðŸ”¬ Debug video element state"),d.current){const r=d.current;console.log("ðŸ“º Current video state:",{srcObject:!!r.srcObject,readyState:r.readyState,networkState:r.networkState,paused:r.paused,currentTime:r.currentTime,duration:r.duration,videoWidth:r.videoWidth,videoHeight:r.videoHeight,clientWidth:r.clientWidth,clientHeight:r.clientHeight,offsetWidth:r.offsetWidth,offsetHeight:r.offsetHeight,style:{display:r.style.display,opacity:r.style.opacity,visibility:r.style.visibility,width:r.style.width,height:r.style.height}}),M.current&&console.log("ðŸŽ¥ Current stream state:",{active:M.current.active,id:M.current.id,tracks:M.current.getTracks().map(g=>({kind:g.kind,label:g.label,enabled:g.enabled,readyState:g.readyState}))}),r.paused&&(console.log("VIDEO Forcing manual play"),r.play().then(()=>{console.log("Manual play successful")}).catch(g=>{console.error("Manual play failed:",g)}))}},variant:"outline",size:"sm",className:"flex items-center gap-1 text-xs",children:"ðŸ”¬ Debug"}),e.jsxs(P,{onClick:y,variant:"outline",className:"flex items-center gap-2 border-monza-gray text-monza-gray hover:bg-monza-gray/10",children:[e.jsx(we,{className:"h-4 w-4"}),"Stop Camera"]})]})]}),e.jsx("canvas",{ref:Q,className:"hidden"})]})}),e.jsx(re,{value:"ordered",className:"space-y-4",children:m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ue,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No delivered parts available"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivered parts from orders will appear here"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Select Delivered Part to Add to Inventory"}),e.jsx("div",{className:"grid gap-2 max-h-64 overflow-y-auto",children:m.map(r=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${(C==null?void 0:C.id)===r.id?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>B(r),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.part_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",r.part_number]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",r.quantity," | ",r.supplier]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:r.category==="voyah"?"Voyah":"ICEV"}),r.price&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",r.price]})]})]})},r.id))})]}),C&&e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h4",{className:"font-medium",children:"Complete Inventory Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"carModel",children:"Car Model"}),e.jsx(N,{id:"carModel",value:t.carModel,onChange:r=>f("carModel",r.target.value),placeholder:"e.g., Voyah Dream 2024"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"room",children:"Storage Room"}),e.jsxs("select",{id:"room",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.room,onChange:r=>f("room",r.target.value),children:[e.jsx("option",{value:"",children:"Select room"}),$[h].map(r=>e.jsx("option",{value:r,children:r},r))]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"shelf",children:"Shelf"}),e.jsx(N,{id:"shelf",value:t.shelf,onChange:r=>f("shelf",r.target.value),placeholder:"P1, P2..."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"column",children:"Column"}),e.jsx(N,{id:"column",value:t.column,onChange:r=>f("column",r.target.value),placeholder:"1, 2, 3..."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"row",children:"Row"}),e.jsx(N,{id:"row",value:t.row,onChange:r=>f("row",r.target.value),placeholder:"1, 2, 3..."})]})]}),e.jsxs(te,{children:[e.jsx(P,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),e.jsx(P,{onClick:oe,children:"Add to Inventory"})]})]})]})}),e.jsx(re,{value:"order",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Order New Part"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Order parts that are not currently in inventory. This will create a new order that can be tracked."})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),se()},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderPartName",children:"Part Name *"}),e.jsx(N,{id:"orderPartName",value:t.partName,onChange:r=>f("partName",r.target.value),placeholder:"e.g., Air Filter, Brake Pads",required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderPartNumber",children:"Part Number *"}),e.jsx(N,{id:"orderPartNumber",value:t.partNumber,onChange:r=>f("partNumber",r.target.value),placeholder:"e.g., VF-2024-AF-001",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderCarModel",children:"Compatible Car Model"}),e.jsx(N,{id:"orderCarModel",value:t.carModel,onChange:r=>f("carModel",r.target.value),placeholder:"e.g., Tesla Model 3, Voyah Dream"})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderVehicleType",children:"Vehicle Type"}),e.jsxs("select",{id:"orderVehicleType",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.vehicleType,onChange:r=>f("vehicleType",r.target.value),children:[e.jsx("option",{value:"",children:"Select vehicle type"}),e.jsx("option",{value:"EV",children:"Electric Vehicle (EV)"}),e.jsx("option",{value:"REV",children:"Range Extended EV (REV)"}),e.jsx("option",{value:"ICEV",children:"Internal Combustion (ICEV)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderQuantity",children:"Quantity *"}),e.jsx(N,{id:"orderQuantity",type:"number",min:"1",value:t.quantity,onChange:r=>f("quantity",parseInt(r.target.value)),required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderSupplier",children:"Supplier *"}),e.jsxs("select",{id:"orderSupplier",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.supplier,onChange:r=>f("supplier",r.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select supplier"}),e.jsx("option",{value:"DF",children:"Dong Feng (DF)"}),e.jsx("option",{value:"AZ",children:"AutoZone (AZ)"}),e.jsx("option",{value:"BMW",children:"BMW Parts"}),e.jsx("option",{value:"TESLA",children:"Tesla Parts"}),e.jsx("option",{value:"BYD",children:"BYD Parts"}),e.jsx("option",{value:"MERCEDES",children:"Mercedes Parts"}),e.jsx("option",{value:"GENERIC",children:"Generic Parts"})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"orderCategory",children:"Category"}),e.jsxs("select",{id:"orderCategory",className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.category,onChange:r=>f("category",r.target.value),children:[e.jsx("option",{value:"",children:"Select category"}),e.jsx("option",{value:"part",children:"Engine Part"}),e.jsx("option",{value:"accessory",children:"Accessory"}),e.jsx("option",{value:"tool",children:"Tool"}),e.jsx("option",{value:"consumable",children:"Consumable"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"orderNotes",children:"Order Notes"}),e.jsx(Se,{id:"orderNotes",value:t.pdiNotes,onChange:r=>f("pdiNotes",r.target.value),placeholder:"Additional notes about the order, urgency, special requirements...",rows:3})]}),e.jsxs(te,{children:[e.jsx(P,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),e.jsx(P,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Create Order"})]})]})]})})]})]})})},Ae=({isOpen:v,onClose:j,item:l,onSave:w,floor:V})=>{var D;const[h,i]=x.useState({});x.useEffect(()=>{var s;l&&i({carModel:l.carModel,partName:l.partName,partNumber:l.partNumber,quantity:l.quantity,location:{room:((s=l.location)==null?void 0:s.room)||""},supplier:l.supplier,vehicleType:l.vehicleType,category:l.category})},[l]);const k=()=>{h&&(w(h),j())},b=(s,m)=>{i(I=>({...I,location:{...I.location,[s]:m}}))};if(!l)return null;const S=V==="Floor 2"?["Premium Display","Executive Storage","VIP Lounge Storage"]:["Main Storage","Quick Access","Overflow"];return e.jsx(he,{open:v,onOpenChange:j,children:e.jsxs(ge,{className:"sm:max-w-[600px] dialog-content",children:[e.jsx(xe,{children:e.jsx(ve,{children:"Edit Inventory Item"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"carModel",className:"text-right",children:"Car Model"}),e.jsx(N,{id:"carModel",value:h.carModel||"",onChange:s=>i(m=>({...m,carModel:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"partName",className:"text-right",children:"Part Name"}),e.jsx(N,{id:"partName",value:h.partName||"",onChange:s=>i(m=>({...m,partName:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"partNumber",className:"text-right",children:"Part Number"}),e.jsx(N,{id:"partNumber",value:h.partNumber||"",onChange:s=>i(m=>({...m,partNumber:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"quantity",className:"text-right",children:"Quantity"}),e.jsx(N,{id:"quantity",type:"number",value:h.quantity||0,onChange:s=>i(m=>({...m,quantity:Ce(s.target.value,0)})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"room",className:"text-right",children:"Room"}),e.jsxs("select",{id:"room",className:"col-span-3 border rounded px-2 py-1",value:((D=h.location)==null?void 0:D.room)||"",onChange:s=>b("room",s.target.value),style:{background:"#fff",color:"#000",borderColor:"#757575"},children:[e.jsx("option",{value:"",children:"Select room"}),S.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"supplier",className:"text-right",children:"Supplier"}),e.jsx(N,{id:"supplier",value:h.supplier||"",onChange:s=>i(m=>({...m,supplier:s.target.value})),className:"col-span-3",placeholder:"e.g., DF, AZ, ..."})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"vehicleType",className:"text-right",children:"Vehicle Type"}),e.jsxs("select",{id:"vehicleType",className:"col-span-3 border rounded px-2 py-1",value:h.vehicleType||"",onChange:s=>i(m=>({...m,vehicleType:s.target.value})),style:{background:"#fff",color:"#000",borderColor:"#757575"},children:[e.jsx("option",{value:"EV",children:"Electric Vehicle (EV)"}),e.jsx("option",{value:"REV",children:"Range Extended EV (REV)"}),e.jsx("option",{value:"ICEV",children:"Internal Combustion (ICEV)"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(u,{htmlFor:"category",className:"text-right",children:"Category"}),e.jsx(N,{id:"category",className:"col-span-3",value:h.category||"",onChange:s=>i(m=>({...m,category:s.target.value})),placeholder:"Enter category (e.g., part, accessory)"})]})]}),e.jsxs(te,{children:[e.jsx(P,{type:"button",variant:"outline",style:{borderColor:"#757575",color:"#424242"},onClick:j,children:"Cancel"}),e.jsx(P,{type:"button",style:{background:"#FFCB05",color:"#000",border:"none"},onClick:k,children:"Save Changes"})]})]})})},Oe=(v,j={key:"",direction:null})=>{const[l,w]=x.useState(j),V=i=>{w(k=>k.key!==i?i==="batteryPercentage"?{key:i,direction:"desc"}:{key:i,direction:"asc"}:i==="batteryPercentage"?k.direction==="desc"?{key:i,direction:"asc"}:k.direction==="asc"?{key:i,direction:null}:{key:i,direction:"desc"}:k.direction==="asc"?{key:i,direction:"desc"}:k.direction==="desc"?{key:i,direction:null}:{key:i,direction:"asc"})};return{sortedData:x.useMemo(()=>!l.key||!l.direction?v:[...v].sort((i,k)=>{const b=pe(i,l.key),S=pe(k,l.key);if(l.key==="customDuty"){const m=b==="paid"?1:0,I=S==="paid"?1:0;return l.direction==="asc"?m-I:I-m}if(l.key.includes("Date")||l.key.includes("date")){const m=b?new Date(b).getTime():0,I=S?new Date(S).getTime():0;return l.direction==="asc"?m-I:I-m}if(typeof b=="number"&&typeof S=="number")return l.direction==="asc"?b-S:S-b;if(l.key==="batteryPercentage"){const m=b??-1,I=S??-1;return l.direction==="asc"?m-I:I-m}const D=String(b||"").toLowerCase(),s=String(S||"").toLowerCase();return l.direction==="asc"?D.localeCompare(s):s.localeCompare(D)}),[v,l]),sortState:l,handleSort:V}},pe=(v,j)=>j.split(".").reduce((l,w)=>l==null?void 0:l[w],v),Le=()=>{const[v,j]=x.useState({carModel:"",partName:"",room:""});return{filters:v,updateFilter:(V,h)=>{j(i=>({...i,[V]:h}))},filterInventory:V=>V.filter(h=>(v.carModel===""||h.carModel===v.carModel)&&(v.partName===""||h.partName.toLowerCase().includes(v.partName.toLowerCase()))&&(v.room===""||h.location.room===v.room))}},Re=[{id:"f2-1",carModel:"Voyah Dream 2024",partName:"Premium Leather Seat",partNumber:"VD-2024-PLS-001",quantity:4,location:{shelf:"P1",column:"1",row:"2",room:"Premium Display",floor:"Floor 2"},lastUpdated:"2025-05-20T14:30:00",supplier:"DF",vehicleType:"EV",category:"accessory",vin:"VD2024PLS001",pdiStatus:"completed"},{id:"f2-2",carModel:"Voyah Courage 2025",partName:"Dashboard Display",partNumber:"VC-2025-DD-003",quantity:2,location:{shelf:"P2",column:"2",row:"1",room:"Executive Storage",floor:"Floor 2"},lastUpdated:"2025-05-18T11:45:00",supplier:"AutoZone",vehicleType:"EV",category:"part",vin:"VC2025DD003",pdiStatus:"completed"},{id:"f2-3",carModel:"MHero 917 2025",partName:"Carbon Fiber Panel",partNumber:"MH-2025-CFP-007",quantity:3,location:{shelf:"P3",column:"1",row:"3",room:"VIP Lounge Storage",floor:"Floor 2"},lastUpdated:"2025-05-16T16:20:00",supplier:"Toyota Parts Co",vehicleType:"EV",category:"part",vin:"MH2025CFP007",pdiStatus:"completed"}],$e=()=>{const v=Ee(),[j,l]=x.useState(Re),[w,V]=x.useState(""),[h,i]=x.useState("All Models"),[k,b]=x.useState("All Suppliers"),[S,D]=x.useState(!1),[s,m]=x.useState(null),[I,C]=x.useState(!1),{filterInventory:B}=Le();x.useEffect(()=>{const y=new URLSearchParams(v.search).get("vin");y&&(V(y),setTimeout(()=>{const p=j.find($=>{var r,g,c;return((r=$.vin)==null?void 0:r.toLowerCase().includes(y.toLowerCase()))||((g=$.partNumber)==null?void 0:g.toLowerCase().includes(y.toLowerCase()))||((c=$.carModel)==null?void 0:c.toLowerCase().includes(y.toLowerCase()))});p?T({title:"Item Found in Floor 2",description:`Showing ${p.partName} for ${p.carModel} (${p.partNumber})`,duration:5e3}):T({title:"Item Not Found",description:`No item found with VIN/Part: ${y} in Floor 2 Inventory`,variant:"destructive",duration:5e3})},500))},[v.search,j]);const d=["All Suppliers",...Array.from(new Set(j.map(o=>o.supplier||"DF")))],M=B(j).filter(o=>{var r,g;const y=w===""||o.partName.toLowerCase().includes(w.toLowerCase())||o.partNumber.toLowerCase().includes(w.toLowerCase())||((r=o.location.room)==null?void 0:r.toLowerCase().includes(w.toLowerCase()))||((g=o.supplier)==null?void 0:g.toLowerCase().includes(w.toLowerCase())),p=h==="All Models"||o.carModel===h,$=k==="All Suppliers"||o.supplier===k;return y&&p&&$}),{sortedData:q}=Oe(M),t=async()=>{try{const o=q.map(p=>({"Car Model":p.carModel,"Part Name":p.partName,"Part Number":p.partNumber,Quantity:p.quantity,Supplier:p.supplier||"DF",Room:p.location.room,Floor:p.location.floor,Location:`${p.location.shelf}-${p.location.column}-${p.location.row}`,Category:p.category,VIN:p.vin||"N/A","PDI Status":p.pdiStatus,"Last Updated":me.formatDateTime(p.lastUpdated)})),y=await Me.exportToExcel(o,{fileName:"floor2_inventory",sheetName:"Floor 2 Inventory",includeTimestamp:!0,uploadToSupabase:!0});y.success?T({title:"Excel Export Successful",description:y.message}):T({title:"Export Failed",description:y.message,variant:"destructive"})}catch{T({title:"Export Error",description:"Failed to export Floor 2 inventory to Excel. Please try again.",variant:"destructive"})}},W=()=>{T({title:"Excel Import",description:"Please select an Excel file to import Floor 2 data."})},ae=()=>{D(!0)},oe=o=>{const y={...o,id:`f2-${Date.now()}`,lastUpdated:new Date().toISOString()};l(p=>[...p,y]),T({title:"Part Added",description:`${y.partName} has been added to Floor 2 inventory.`})},se=o=>{m(o),C(!0)},U=o=>{s&&(l(y=>y.map(p=>p.id===s.id?{...p,...o,lastUpdated:new Date().toISOString()}:p)),T({title:"Part Updated",description:`${s.partName} has been updated successfully.`}))},f=o=>{l(y=>y.filter(p=>p.id!==o)),T({title:"Part Removed",description:"Part has been removed from Floor 2 inventory."})};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Floor 2 Inventory"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage premium parts and accessories for Showroom Floor 2"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(P,{variant:"outline",onClick:t,children:[e.jsx(Pe,{className:"mr-1 h-4 w-4"}),"Export to Excel"]}),e.jsxs(P,{variant:"outline",onClick:W,children:[e.jsx(Te,{className:"mr-1 h-4 w-4"}),"Import from Excel"]}),e.jsxs(P,{variant:"default",onClick:ae,children:[e.jsx(ye,{className:"mr-1 h-4 w-4"}),"Add New Part"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-2 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(N,{placeholder:"Search Floor 2 parts, rooms, suppliers...",className:"pl-8",value:w,onChange:o=>V(o.target.value)})]}),e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:h,onChange:o=>i(o.target.value),children:[e.jsx("option",{value:"All Models",children:"All Models"}),e.jsx("option",{value:"Voyah Dream 2024",children:"Voyah Dream 2024"}),e.jsx("option",{value:"Voyah Courage 2025",children:"Voyah Courage 2025"}),e.jsx("option",{value:"MHero 917 2025",children:"MHero 917 2025"})]}),e.jsx("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:k,onChange:o=>b(o.target.value),children:d.map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsx("div",{className:"bg-white rounded-lg border shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(De,{children:[e.jsx(Fe,{children:e.jsxs(ie,{children:[e.jsx(H,{children:"Car Model"}),e.jsx(H,{children:"Part Name"}),e.jsx(H,{children:"Part Number"}),e.jsx(H,{children:"Quantity"}),e.jsx(H,{children:"Supplier"}),e.jsx(H,{children:"Room"}),e.jsx(H,{children:"Location"}),e.jsx(H,{children:"Last Updated"}),e.jsx(H,{children:"Actions"})]})}),e.jsx(Ve,{children:q.length>0?q.map(o=>e.jsxs(ie,{className:"hover:bg-muted/50",children:[e.jsx(R,{className:"font-medium",children:o.carModel}),e.jsx(R,{children:o.partName}),e.jsx(R,{className:"font-mono text-sm",children:o.partNumber}),e.jsx(R,{children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-monza-yellow/20 text-monza-black border border-monza-yellow/40",children:o.quantity})}),e.jsx(R,{children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-monza-gray/10 text-monza-gray border border-monza-gray/20",children:o.supplier||"DF"})}),e.jsx(R,{children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-monza-yellow/10 text-monza-black border border-monza-yellow/30",children:o.location.room})}),e.jsx(R,{className:"font-mono text-sm",children:`${o.location.shelf}-${o.location.column}-${o.location.row}`}),e.jsx(R,{className:"text-sm text-muted-foreground",children:me.formatDateTime(o.lastUpdated)}),e.jsx(R,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>se(o),children:"Edit"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>f(o.id),className:"text-red-600 hover:text-red-700",children:"Remove"})]})})]},o.id)):e.jsx(ie,{children:e.jsx(R,{colSpan:9,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:"No Floor 2 inventory items found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No results match your search criteria."})]})})})})]})})}),e.jsx(Ie,{isOpen:S,onClose:()=>D(!1),onAddPart:oe,floor:"Floor 2"}),e.jsx(Ae,{isOpen:I,onClose:()=>C(!1),item:s,onSave:U,floor:"Floor 2"})]})};export{$e as default};
