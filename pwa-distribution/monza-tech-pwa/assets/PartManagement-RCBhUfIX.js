import{r as m,j as e,D as z,a as Z,b as G,c as X,L as o,I as c,bP as k,aN as I,ac as Y,h as p,bL as _,b3 as ee,aK as te,Q as ae,aq as se,b0 as re,k as ne,l as le,m as f,n as u,o as ie,p as d,bM as oe,bE as ce,t as y}from"./index-D4jk50_k.js";const de=({isOpen:j,onClose:g,part:l,onSave:v})=>{const[r,i]=m.useState({});m.useEffect(()=>{l&&i({partNumber:l.partNumber,name:l.name,category:l.category,subcategory:l.subcategory,brand:l.brand,model:l.model,price:l.price,cost:l.cost,quantity:l.quantity,minQuantity:l.minQuantity,location:l.location,supplier:l.supplier})},[l]);const N=()=>{r&&(v(r),g())};return l?e.jsx(z,{open:j,onOpenChange:g,children:e.jsxs(Z,{className:"sm:max-w-[600px] dialog-content",children:[e.jsx(G,{children:e.jsx(X,{children:"Edit Part"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"partNumber",className:"text-right",children:"Part Number"}),e.jsx(c,{id:"partNumber",value:r.partNumber||"",onChange:s=>i(a=>({...a,partNumber:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"name",className:"text-right",children:"Part Name"}),e.jsx(c,{id:"name",value:r.name||"",onChange:s=>i(a=>({...a,name:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"category",className:"text-right",children:"Category"}),e.jsx(c,{id:"category",value:r.category||"",onChange:s=>i(a=>({...a,category:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"subcategory",className:"text-right",children:"Subcategory"}),e.jsx(c,{id:"subcategory",value:r.subcategory||"",onChange:s=>i(a=>({...a,subcategory:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"brand",className:"text-right",children:"Brand"}),e.jsx(c,{id:"brand",value:r.brand||"",onChange:s=>i(a=>({...a,brand:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"model",className:"text-right",children:"Model"}),e.jsx(c,{id:"model",value:r.model||"",onChange:s=>i(a=>({...a,model:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"price",className:"text-right",children:"Price"}),e.jsx(c,{id:"price",type:"number",step:"0.01",value:r.price||0,onChange:s=>i(a=>({...a,price:k(s.target.value,0)})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"cost",className:"text-right",children:"Cost"}),e.jsx(c,{id:"cost",type:"number",step:"0.01",value:r.cost||0,onChange:s=>i(a=>({...a,cost:k(s.target.value,0)})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"quantity",className:"text-right",children:"Quantity"}),e.jsx(c,{id:"quantity",type:"number",value:r.quantity||0,onChange:s=>i(a=>({...a,quantity:I(s.target.value,0)})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"minQuantity",className:"text-right",children:"Min Quantity"}),e.jsx(c,{id:"minQuantity",type:"number",value:r.minQuantity||0,onChange:s=>i(a=>({...a,minQuantity:I(s.target.value,0)})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"location",className:"text-right",children:"Location"}),e.jsx(c,{id:"location",value:r.location||"",onChange:s=>i(a=>({...a,location:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"supplier",className:"text-right",children:"Supplier"}),e.jsx(c,{id:"supplier",value:r.supplier||"",onChange:s=>i(a=>({...a,supplier:s.target.value})),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{className:"text-right text-sm text-muted-foreground",children:"Status"}),e.jsx("div",{className:"col-span-3 text-sm text-muted-foreground",children:"Status is automatically determined based on quantity"})]})]}),e.jsxs(Y,{children:[e.jsx(p,{type:"button",variant:"outline",style:{borderColor:"#757575",color:"#424242"},onClick:g,children:"Cancel"}),e.jsx(p,{type:"button",style:{background:"#FFCB05",color:"#000",border:"none"},onClick:N,children:"Save Changes"})]})]})}):null},ue=()=>{const[j,g]=m.useState([]),[l,v]=m.useState(!0),[r,i]=m.useState(""),[N,s]=m.useState("all"),[a,L]=m.useState("all"),[C,Q]=m.useState("All Suppliers"),[q,E]=m.useState(!1),[b,A]=m.useState(null),{requestCamera:T}=_();m.useEffect(()=>{O()},[]);const P=(t,n=0)=>t===0?"Out of Stock":t<=n?"Low Stock":"In Stock",F=()=>[{id:"p1",partNumber:"VD-2024-BRK-001",name:"Brake Pads Front Set",category:"EV",subcategory:"Brakes",brand:"Brembo",price:250,cost:180,quantity:15,minQuantity:5,location:"A1-B2",supplier:"DF",lastUpdated:"2025-01-20T14:30:00"},{id:"p2",partNumber:"VC-2025-FLT-002",name:"Air Filter",category:"EV",subcategory:"Filters",brand:"Mann",price:45,cost:30,quantity:8,minQuantity:10,location:"B2-C1",supplier:"AZ",lastUpdated:"2025-01-20T12:15:00"},{id:"p3",partNumber:"MH-2025-LED-003",name:"LED Headlight Assembly",category:"ICEV",subcategory:"Lighting",brand:"Osram",price:420,cost:320,quantity:6,minQuantity:3,location:"C1-D3",supplier:"DF",lastUpdated:"2025-01-20T09:45:00"},{id:"p4",partNumber:"VD-2024-WPR-004",name:"Windshield Wipers",category:"EV",subcategory:"Accessories",brand:"Bosch",price:65,cost:45,quantity:0,minQuantity:8,location:"D3-E1",supplier:"AZ",lastUpdated:"2025-01-19T16:20:00"},{id:"p5",partNumber:"VC-2025-SPK-005",name:"Spark Plugs Set",category:"ICEV",subcategory:"Engine",brand:"NGK",price:85,cost:60,quantity:12,minQuantity:6,location:"E1-F2",supplier:"DF",lastUpdated:"2025-01-20T11:30:00"}].map(n=>({...n,status:P(n.quantity,n.minQuantity)})),O=()=>{v(!0);try{const t=localStorage.getItem("partsInventory");if(t){const x=JSON.parse(t).map(h=>({...h,status:P(h.quantity,h.minQuantity||0)}));g(x),localStorage.setItem("partsInventory",JSON.stringify(x))}else{const n=F();g(n),localStorage.setItem("partsInventory",JSON.stringify(n))}}catch(t){console.error("Error loading parts data:",t);const n=F();g(n)}finally{v(!1)}},D=j.filter(t=>{const n=r===""||t.name.toLowerCase().includes(r.toLowerCase())||t.partNumber.toLowerCase().includes(r.toLowerCase())||t.category.toLowerCase().includes(r.toLowerCase())||t.supplier.toLowerCase().includes(r.toLowerCase()),x=N==="all"||t.category===N,h=a==="all"||t.status===a,S=C==="All Suppliers"||t.supplier===C;return n&&x&&h&&S}),V=["All Suppliers",...Array.from(new Set(j.map(t=>t.supplier)))],U=()=>{y({title:"Export to Excel",description:"Parts inventory exported successfully."})},B=()=>{y({title:"Excel Import",description:"Please select an Excel file to import parts data."})},R=()=>{y({title:"Add New Part",description:"Add new part dialog would open here."})},M=t=>{A(t),E(!0)},H=t=>{if(b){const n=t.quantity!==void 0?t.quantity:b.quantity,x=t.minQuantity!==void 0?t.minQuantity:b.minQuantity||0,h=P(n,x),S=j.map(w=>w.id===b.id?{...w,...t,status:h,lastUpdated:new Date().toISOString()}:w);g(S),localStorage.setItem("partsInventory",JSON.stringify(S)),y({title:"Part Updated",description:`${b.name} has been updated successfully. Status: ${h}`})}},J=t=>{g(n=>n.filter(x=>x.id!==t)),localStorage.setItem("partsInventory",JSON.stringify(j.filter(n=>n.id!==t))),y({title:"Part Removed",description:"Part has been removed from inventory."})},K=async()=>{try{await T({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}),y({title:"ðŸ“· Scanner Ready",description:"Point camera at part QR code or barcode"})}catch(t){console.error("Camera access error:",t),y({title:"Camera Error",description:"Could not access camera. Please check permissions.",variant:"destructive"})}},$=t=>new Date(t).toLocaleString(),W=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Parts Inventory"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage parts and accessories inventory"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{variant:"outline",onClick:U,children:[e.jsx(ee,{className:"mr-1 h-4 w-4"}),"Export to Excel"]}),e.jsxs(p,{variant:"outline",onClick:B,children:[e.jsx(te,{className:"mr-1 h-4 w-4"}),"Import from Excel"]}),e.jsxs(p,{variant:"outline",onClick:K,children:[e.jsx(ae,{className:"mr-1 h-4 w-4"}),"Scan Part"]}),e.jsxs(p,{variant:"default",onClick:R,children:[e.jsx(se,{className:"mr-1 h-4 w-4"}),"Add New Part"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-2 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(c,{placeholder:"Search parts, categories, suppliers...",className:"pl-8",value:r,onChange:t=>i(t.target.value)})]}),e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:N,onChange:t=>s(t.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"EV",children:"EV"}),e.jsx("option",{value:"EREV",children:"EREV"}),e.jsx("option",{value:"ICEV",children:"ICEV"})]}),e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:a,onChange:t=>L(t.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"In Stock",children:"In Stock"}),e.jsx("option",{value:"Low Stock",children:"Low Stock"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"}),e.jsx("option",{value:"Discontinued",children:"Discontinued"})]}),e.jsx("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:C,onChange:t=>Q(t.target.value),children:V.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("div",{className:"bg-white rounded-lg border shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ne,{children:[e.jsx(le,{children:e.jsxs(f,{children:[e.jsx(u,{children:"Part Name"}),e.jsx(u,{children:"Part Number"}),e.jsx(u,{children:"Category"}),e.jsx(u,{children:"Quantity"}),e.jsx(u,{children:"Price"}),e.jsx(u,{children:"Supplier"}),e.jsx(u,{children:"Location"}),e.jsx(u,{children:"Status"}),e.jsx(u,{children:"Last Updated"}),e.jsx(u,{children:"Actions"})]})}),e.jsx(ie,{children:l?e.jsx(f,{children:e.jsx(d,{colSpan:10,className:"text-center py-8",children:"Loading parts inventory..."})}):D.length>0?D.map(t=>e.jsxs(f,{className:"hover:bg-muted/50",children:[e.jsx(d,{className:"font-medium",children:t.name}),e.jsx(d,{className:"font-mono text-sm",children:t.partNumber}),e.jsx(d,{children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:t.category})}),e.jsx(d,{children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.quantity===0?"bg-red-100 text-red-800 border border-red-200":t.quantity<=(t.minQuantity||0)?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"}`,children:t.quantity})}),e.jsx(d,{className:"font-mono",children:W(t.price)}),e.jsx(d,{children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 border border-gray-200",children:t.supplier})}),e.jsx(d,{className:"font-mono text-sm",children:t.location}),e.jsx(d,{children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.status==="In Stock"?"bg-green-100 text-green-800 border border-green-200":t.status==="Low Stock"?"bg-yellow-100 text-yellow-800 border border-yellow-200":t.status==="Out of Stock"?"bg-red-100 text-red-800 border border-red-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:t.status})}),e.jsx(d,{className:"text-sm text-muted-foreground",children:$(t.lastUpdated)}),e.jsx(d,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>M(t),children:e.jsx(oe,{className:"h-3 w-3"})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>J(t.id),className:"text-red-600 hover:text-red-700",children:e.jsx(ce,{className:"h-3 w-3"})})]})})]},t.id)):e.jsx(f,{children:e.jsx(d,{colSpan:10,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:"No parts found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No results match your search criteria."})]})})})})]})})}),e.jsx(de,{isOpen:q,onClose:()=>E(!1),part:b,onSave:H})]})};export{ue as default};
