import{r as u,j as e,bL as O,a as h,Q as P,aq as E,b as M,c as F,d as T,f as $,g as B,h as Y,i as y,k as o,l as R,m as d,cS as G,aG as L,V as U,D as H,q as _,v as q,w as J,L as N,I as j,aN as Q,aB as f,t as i}from"./index-CnqA2hW7.js";const c=s=>({...s,vin:s.vin||s.vinNumber,vinNumber:s.vinNumber,vehicleCategory:s.vehicleCategory||s.category||"EV",category:s.category||s.vehicleCategory||"EV",status:s.status||"arrived",batteryPercentage:s.batteryPercentage||(s.vehicleCategory==="EV"||s.category==="EV"?50:void 0),hasDamages:s.hasDamages||!1,photos:s.photos||[],damages:s.damages||[]});c({id:"1",vinNumber:"1234567890ABCDEFG",model:"Mercedes-Benz S-Class",year:2024,color:"Obsidian Black",arrivalDate:new Date().toISOString(),brand:"Mercedes-Benz",vehicleCategory:"EV",batteryPercentage:85}),c({id:"2",vinNumber:"9876543210ZYXWVUT",model:"Porsche 911",year:2023,color:"Guards Red",arrivalDate:new Date().toISOString(),brand:"Porsche",vehicleCategory:"ICEV"});const X=()=>{const[s,m]=u.useState([]),[p,C]=u.useState(!1),[D,b]=u.useState(!1),[l,v]=u.useState({vinNumber:"",model:"",year:new Date().getFullYear(),color:"",arrivalDate:new Date().toISOString()});u.useEffect(()=>{const a=[c({id:"1",vinNumber:"1234567890ABCDEFG",model:"Mercedes-Benz S-Class",year:2024,color:"Obsidian Black",arrivalDate:new Date().toISOString()}),c({id:"2",vinNumber:"9876543210ZYXWVUT",model:"Porsche 911",year:2023,color:"Guards Red",arrivalDate:new Date().toISOString()})];m(a)},[]);const S=a=>{const r=f("orderedCars",[]),n=r.find(t=>t.vin_number===a);if(C(!1),n){const t=r.filter(w=>w.vin_number!==a);localStorage.setItem("orderedCars",JSON.stringify(t));const z=c({id:`arrival-${Date.now()}`,vinNumber:a,model:n.model||`Vehicle ${a.slice(-4)}`,year:n.year||new Date().getFullYear(),color:n.color||"Unknown",arrivalDate:new Date().toISOString(),brand:n.brand||"Unknown",category:n.category||"EV"});m(w=>[...w,z]),i({title:"Car Moved to Arrivals",description:`${n.model||"Vehicle"} (VIN: ${a}) moved from Ordered Cars to New Arrivals`});return}const x=s.find(t=>t.vinNumber===a||t.vin===a);if(x){i({title:"Car Already Exists",description:`${x.model} is already in New Arrivals`,variant:"destructive"});return}const g=c({id:`new-arrival-${Date.now()}`,vinNumber:a,model:`Vehicle ${a.slice(-4)}`,year:new Date().getFullYear(),color:"Unknown",arrivalDate:new Date().toISOString()});m(t=>[...t,g]),i({title:"New Car Added",description:`Vehicle with VIN ${a} added to New Arrivals`})},I=()=>{if(!l.vinNumber||!l.model||!l.color){i({title:"Missing Information",description:"Please fill in VIN, model, and color",variant:"destructive"});return}if(s.find(n=>n.vinNumber===l.vinNumber||n.vin===l.vinNumber)){i({title:"VIN Already Exists",description:"A car with this VIN is already in New Arrivals",variant:"destructive"});return}const r=c({id:`new-arrival-manual-${Date.now()}`,...l});m(n=>[...n,r]),b(!1),v({vinNumber:"",model:"",year:new Date().getFullYear(),color:"",arrivalDate:new Date().toISOString()}),i({title:"Car Added",description:`${l.model} added to New Arrivals`})},V=a=>{m(r=>r.filter(n=>n.id!==a)),i({title:"Car Removed",description:"Car removed from New Arrivals"})},k=a=>{const r=s.find(g=>g.id===a);if(!r)return;const n={id:`inv-${Date.now()}`,vinNumber:r.vin||r.vinNumber,model:r.model,year:r.year,color:r.color,status:"in_stock",batteryPercentage:r.batteryPercentage,category:r.category||"EV",arrivalDate:r.arrivalDate,notes:r.notes,photos:r.photos,damages:r.damages},x=f("carInventory",[]);x.push(n),localStorage.setItem("carInventory",JSON.stringify(x)),m(g=>g.filter(t=>t.id!==a)),i({title:"Car Moved to Inventory",description:`${r.model} has been moved to Car Inventory`})},A=a=>a?"success":"warning";return e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-monza-yellow p-3 rounded-lg",children:e.jsx(O,{className:"h-8 w-8 text-monza-black"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-monza-black",children:"New Car Arrivals"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Newly arrived vehicles awaiting processing"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",onClick:()=>C(!0),className:"flex items-center gap-2 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(P,{className:"h-4 w-4"}),"Scan VIN"]}),e.jsxs(h,{onClick:()=>b(!0),className:"flex items-center gap-2 bg-monza-yellow text-monza-black hover:bg-monza-yellow/90",children:[e.jsx(E,{className:"h-4 w-4"}),"Add Car Manually"]})]})]}),e.jsxs(M,{className:"border border-gray-200 shadow-sm",children:[e.jsx(F,{className:"bg-gray-50 border-b",children:e.jsxs(T,{className:"text-monza-black",children:["New Car Arrivals (",s.length,")"]})}),e.jsx($,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(B,{children:[e.jsx(Y,{children:e.jsxs(y,{className:"bg-gray-50",children:[e.jsx(o,{className:"font-semibold text-monza-black",children:"VIN"}),e.jsx(o,{className:"font-semibold text-monza-black",children:"Model"}),e.jsx(o,{className:"font-semibold text-monza-black",children:"Year"}),e.jsx(o,{className:"font-semibold text-monza-black",children:"Color"}),e.jsx(o,{className:"font-semibold text-monza-black",children:"PDI Status"}),e.jsx(o,{className:"font-semibold text-monza-black",children:"Arrival Date"}),e.jsx(o,{className:"font-semibold text-monza-black text-right",children:"Actions"})]})}),e.jsx(R,{children:s.map(a=>e.jsxs(y,{className:"hover:bg-monza-yellow/5",children:[e.jsx(d,{className:"font-mono text-sm",children:a.vin||a.vinNumber}),e.jsx(d,{className:"font-medium text-monza-black",children:a.model}),e.jsx(d,{children:a.year}),e.jsx(d,{children:a.color}),e.jsx(d,{children:e.jsx("div",{className:"cursor-pointer",children:e.jsx(G,{variant:A(a.pdiCompleted),children:a.pdiCompleted?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1 text-lg",children:"☺"})," Complete"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1 text-lg",children:"☹"})," Pending"]})})})}),e.jsx(d,{children:new Date(a.arrivalDate).toLocaleDateString()}),e.jsx(d,{children:e.jsxs("div",{className:"flex gap-1 justify-end",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>k(a.id),className:"bg-green-50 hover:bg-green-100 border-green-200 text-green-700",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Move to Inventory"]}),e.jsx(h,{variant:"destructive",size:"sm",onClick:()=>V(a.id),children:"Remove"})]})})]},a.id))})]})})})]}),e.jsx(U,{isOpen:p,onClose:()=>C(!1),onVinScanned:S}),e.jsx(H,{open:D,onOpenChange:b,children:e.jsxs(_,{className:"sm:max-w-[600px]",children:[e.jsx(q,{children:e.jsx(J,{children:"Add Car to New Arrivals"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"vin",children:"VIN Number"}),e.jsx(j,{id:"vin",value:l.vinNumber,onChange:a=>v(r=>({...r,vinNumber:a.target.value})),placeholder:"17-character VIN",maxLength:17})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"model",children:"Model"}),e.jsx(j,{id:"model",value:l.model,onChange:a=>v(r=>({...r,model:a.target.value})),placeholder:"Car model"})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"year",children:"Year"}),e.jsx(j,{id:"year",type:"number",value:l.year,onChange:a=>v(r=>({...r,year:Q(a.target.value,2024)}))})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"color",children:"Color"}),e.jsx(j,{id:"color",value:l.color,onChange:a=>v(r=>({...r,color:a.target.value})),placeholder:"Car color"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(h,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(h,{onClick:I,className:"bg-monza-yellow hover:bg-monza-yellow/90 text-monza-black",children:"Add Car"})]})]})})]})};export{X as default};
