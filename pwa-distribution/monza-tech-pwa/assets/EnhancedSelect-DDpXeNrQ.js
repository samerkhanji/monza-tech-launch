import{r as o,j as n,bC as m,at as U,au as S}from"./index-CnqA2hW7.js";const z=({value:k,onValueChange:b,options:g,placeholder:L="Select an option",disabled:v=!1,className:T,triggerClassName:D,contentClassName:O,itemClassName:R,maxHeight:W=300,searchable:h=!1,multiple:p=!1,values:d=[],onValuesChange:w})=>{const[r,u]=o.useState(!1),[E,a]=o.useState(""),[f,c]=o.useState(-1),y=o.useRef(null),i=o.useRef(null),j=o.useRef(null),l=g.filter(e=>h?e.label.toLowerCase().includes(E.toLowerCase()):!0),A=(p?g.filter(e=>d.includes(e.value)):g.filter(e=>e.value===k)).map(e=>e.label).join(", ");o.useEffect(()=>{const e=t=>{if(r)switch(t.key){case"ArrowDown":t.preventDefault(),c(s=>s<l.length-1?s+1:0);break;case"ArrowUp":t.preventDefault(),c(s=>s>0?s-1:l.length-1);break;case"Enter":if(t.preventDefault(),f>=0&&f<l.length){const s=l[f];s.disabled||N(s.value)}break;case"Escape":t.preventDefault(),u(!1),a(""),c(-1);break;case"Tab":u(!1),a(""),c(-1);break}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,l,f]),o.useEffect(()=>{const e=s=>{if(!r||!i.current)return;const x=i.current,H=x.scrollTop===0,I=x.scrollTop+x.clientHeight>=x.scrollHeight;(s.deltaY<0&&H||s.deltaY>0&&I)&&s.preventDefault()},t=i.current;if(t)return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)},[r]),o.useEffect(()=>{r&&h&&j.current&&setTimeout(()=>{var e;return(e=j.current)==null?void 0:e.focus()},0)},[r,h]),o.useEffect(()=>{const e=t=>{y.current&&!y.current.contains(t.target)&&i.current&&!i.current.contains(t.target)&&(u(!1),a(""),c(-1))};if(r)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]);const N=e=>{if(p){const t=d.includes(e)?d.filter(s=>s!==e):[...d,e];w==null||w(t)}else b==null||b(e),u(!1),a(""),c(-1)},C=()=>{v||(u(!r),r||(a(""),c(-1)))};return n.jsxs("div",{className:m("relative",T),children:[n.jsxs("button",{ref:y,type:"button",onClick:C,disabled:v,className:m("flex h-10 w-full items-center justify-between rounded-none border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",D),style:{userSelect:"none",WebkitUserSelect:"none",cursor:v?"not-allowed":"pointer"},children:[n.jsx("span",{className:"truncate",children:A||L}),n.jsx(U,{className:m("h-4 w-4 opacity-50 transition-transform duration-200",r&&"rotate-180")})]}),r&&n.jsxs("div",{ref:i,className:m("absolute top-full left-0 right-0 z-50 mt-1 max-h-96 min-w-[8rem] overflow-hidden rounded-none border bg-white text-popover-foreground shadow-md",O),style:{maxHeight:`${W}px`,scrollBehavior:"smooth",overscrollBehavior:"contain",scrollSnapType:"y proximity",WebkitOverflowScrolling:"touch",transform:"translateZ(0)",willChange:"transform",backgroundColor:"white"},children:[h&&n.jsx("div",{className:"p-2 border-b border-border",children:n.jsx("input",{ref:j,type:"text",value:E,onChange:e=>a(e.target.value),placeholder:"Search options...",className:"w-full px-2 py-1 text-sm border border-input rounded-none focus:outline-none focus:ring-2 focus:ring-ring",style:{userSelect:"none",WebkitUserSelect:"none"}})}),n.jsx("div",{className:"p-1",children:l.length===0?n.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No options found"}):l.map((e,t)=>n.jsxs("div",{onClick:()=>!e.disabled&&N(e.value),className:m("relative flex w-full cursor-default select-none items-center rounded-none py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",f===t&&"bg-accent text-accent-foreground",e.disabled&&"opacity-50 cursor-not-allowed",!e.disabled&&"cursor-pointer hover:bg-accent hover:text-accent-foreground",R),style:{userSelect:"none",WebkitUserSelect:"none",transition:"background-color 0.15s ease, color 0.15s ease"},children:[p&&n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.includes(e.value)&&n.jsx(S,{className:"h-4 w-4"})}),!p&&n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:k===e.value&&n.jsx(S,{className:"h-4 w-4"})}),n.jsx("span",{className:"truncate",children:e.label})]},e.value))})]})]})};export{z as E};
