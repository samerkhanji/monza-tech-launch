import{r as d,j as e,L as g,p as E,a as p,ar as Q,X,D as J,q as Z,v as ee,w as se,I as $,a5 as L,a6 as O,a7 as W,a8 as I,a9 as y,a3 as q,bF as Y,A as te,aa as re,b3 as ae,aq as ie,b as P,bU as k,B as h,bG as le,t as R}from"./index-BKWZsjPE.js";import{C as ne}from"./calendar-BYXPkm5W.js";import"./endOfMonth-DzIBTWZ1.js";import"./subDays-D0Quc2dh.js";import"./addDays-DFhwiWrS.js";import"./chevron-left-CwLHv2Ng.js";const de=({label:n,value:o,onChange:b,required:i=!1,showTime:u=!0})=>{const[x,j]=d.useState(!1),[c,l]=d.useState(o),[v,t]=d.useState("12:00"),[a,N]=d.useState(new Date),D=d.useRef(null),C=d.useRef(null),w=n.toLowerCase().includes("reservation");d.useEffect(()=>{o&&(l(o),t(`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`))},[o]),d.useEffect(()=>{const r=m=>{D.current&&!D.current.contains(m.target)&&j(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]),d.useEffect(()=>{const r=m=>{m.key==="Escape"&&x&&j(!1)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[x]);const T=r=>new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),s=r=>new Date(r.getFullYear(),r.getMonth(),1).getDay(),f=r=>{const m=new Date(a.getFullYear(),a.getMonth(),r);l(m)},S=r=>{t(r)},z=()=>{if(c){const[r,m]=v.split(":").map(Number),B=new Date(c);B.setHours(r,m,0,0),b(B)}j(!1)},H=()=>{l(void 0),t("12:00"),b(void 0)},F=r=>r.toLocaleDateString()+" at "+r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),U=T(a),V=s(a),K=Array.from({length:U},(r,m)=>m+1),_=Array.from({length:V},(r,m)=>m),M=new Date,G=r=>M.getDate()===r&&M.getMonth()===a.getMonth()&&M.getFullYear()===a.getFullYear(),A=r=>c&&c.getDate()===r&&c.getMonth()===a.getMonth()&&c.getFullYear()===a.getFullYear();return e.jsxs("div",{className:`relative space-y-3 p-4 ${w?"bg-blue-50 border-blue-500":"bg-green-50 border-green-500"} border-2 rounded-lg`,ref:D,children:[e.jsxs(g,{className:`text-sm font-bold ${w?"text-blue-800":"text-green-800"} flex items-center gap-2`,children:[e.jsx(E,{className:"h-4 w-4"}),n," ",i&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs(p,{type:"button",onClick:()=>j(!x),className:`w-full px-4 py-3 border-2 ${w?"border-blue-300 hover:border-blue-500 focus:border-blue-600 focus:ring-blue-200":"border-green-300 hover:border-green-500 focus:border-green-600 focus:ring-green-200"} rounded-lg bg-white text-gray-900 text-base font-medium cursor-pointer focus:ring-2 transition-all flex items-center justify-between`,style:{minHeight:"48px",fontSize:"16px"},children:[e.jsx("span",{children:c?F(c):`Select ${n}`}),e.jsx(Q,{className:"h-5 w-5"})]})}),x&&e.jsxs("div",{ref:C,className:"absolute top-full left-0 right-0 z-[9999] bg-white border-2 border-gray-300 rounded-lg shadow-xl p-4 mt-2 min-w-[300px] max-h-[400px] overflow-y-auto",style:{position:"absolute",top:"100%",left:"0",right:"0",zIndex:9999,backgroundColor:"white",border:"2px solid #d1d5db",borderRadius:"8px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"16px",marginTop:"8px",minWidth:"300px",maxHeight:"400px",overflowY:"auto"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(p,{type:"button",onClick:()=>N(new Date(a.getFullYear(),a.getMonth()-1)),variant:"outline",size:"sm",children:"←"}),e.jsx("span",{className:"font-semibold",children:a.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx(p,{type:"button",onClick:()=>N(new Date(a.getFullYear(),a.getMonth()+1)),variant:"outline",size:"sm",children:"→"})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Su","Mo","Tu","We","Th","Fr","Sa"].map(r=>e.jsx("div",{className:"text-center text-sm font-medium text-gray-500 p-1",children:r},r)),_.map((r,m)=>e.jsx("div",{className:"p-1"},`empty-${m}`)),K.map(r=>e.jsx(p,{type:"button",onClick:()=>f(r),variant:A(r)?"default":"ghost",className:`p-1 h-8 w-8 text-sm ${G(r)?"ring-2 ring-blue-500":""} ${A(r)?"bg-blue-500 text-white":"hover:bg-gray-100"}`,children:r},r))]}),u&&e.jsxs("div",{className:"mb-4",children:[e.jsx(g,{className:"text-sm font-medium mb-2 block",children:"Time"}),e.jsx("input",{type:"time",value:v,onChange:r=>S(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:z,className:"flex-1",children:"Confirm"}),e.jsx(p,{onClick:H,variant:"outline",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})]})]}),c&&e.jsxs("div",{className:`p-3 ${w?"bg-blue-100 border-blue-300 text-blue-800":"bg-green-100 border-green-300 text-green-800"} border-2 rounded-lg`,children:[e.jsxs("p",{className:"text-sm font-semibold mb-1",children:["✅ SELECTED ",n.toUpperCase(),":"]}),e.jsx("p",{className:`text-lg font-bold ${w?"text-blue-900":"text-green-900"}`,children:F(c)})]})]})},oe=["Khalil","Mark","Tamara","Ahmed","Sarah","Omar"],ce=["Technical","Mechanical","Electrical","Customer Service","Organization","Attention to Detail","Problem Solving","Communication","Leadership","Training"],me=({open:n,onOpenChange:o,onEventAdded:b})=>{const[i,u]=d.useState({title:"",description:"",priority:"medium",workType:"project",estimatedDuration:"",assignedEmployees:[],requiredSkills:[]}),[x,j]=d.useState(),c=t=>{if(t.preventDefault(),!i.title||!x)return;const a={id:Date.now().toString(),title:i.title,date:x,createdBy:"Current User",assignedEmployees:i.assignedEmployees,description:i.description||void 0,priority:i.priority,status:"scheduled",workType:i.workType,requiredSkills:i.requiredSkills.length>0?i.requiredSkills:void 0,estimatedDuration:i.estimatedDuration?parseInt(i.estimatedDuration):void 0};b(a),u({title:"",description:"",priority:"medium",workType:"project",estimatedDuration:"",assignedEmployees:[],requiredSkills:[]}),j(void 0),o(!1)},l=t=>{u(a=>({...a,assignedEmployees:a.assignedEmployees.includes(t)?a.assignedEmployees.filter(N=>N!==t):[...a.assignedEmployees,t]}))},v=t=>{u(a=>({...a,requiredSkills:a.requiredSkills.includes(t)?a.requiredSkills.filter(N=>N!==t):[...a.requiredSkills,t]}))};return e.jsx(J,{open:n,onOpenChange:o,children:e.jsxs(Z,{className:"max-w-2xl max-h-[90vh] overflow-visible",children:[e.jsx(ee,{children:e.jsx(se,{children:"Schedule New Work"})}),e.jsxs("form",{onSubmit:c,className:"space-y-4 overflow-visible",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(g,{htmlFor:"title",children:"Work Title *"}),e.jsx($,{id:"title",value:i.title,onChange:t=>u(a=>({...a,title:t.target.value})),placeholder:"Enter work title...",required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"workType",children:"Work Type"}),e.jsxs(L,{value:i.workType,onValueChange:t=>u(a=>({...a,workType:t})),children:[e.jsx(O,{children:e.jsx(W,{})}),e.jsxs(I,{children:[e.jsx(y,{value:"meeting",children:"Meeting"}),e.jsx(y,{value:"project",children:"Project"}),e.jsx(y,{value:"training",children:"Training"}),e.jsx(y,{value:"maintenance",children:"Maintenance"}),e.jsx(y,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"priority",children:"Priority"}),e.jsxs(L,{value:i.priority,onValueChange:t=>u(a=>({...a,priority:t})),children:[e.jsx(O,{children:e.jsx(W,{})}),e.jsxs(I,{children:[e.jsx(y,{value:"low",children:"Low Priority"}),e.jsx(y,{value:"medium",children:"Medium Priority"}),e.jsx(y,{value:"high",children:"High Priority"})]})]})]})]}),e.jsx("div",{className:"relative overflow-visible",children:e.jsx(de,{label:"Event Date & Time",value:x,onChange:j,required:!0,showTime:!0})}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"duration",children:"Estimated Duration (hours)"}),e.jsx($,{id:"duration",type:"number",min:"0.5",step:"0.5",value:i.estimatedDuration,onChange:t=>u(a=>({...a,estimatedDuration:t.target.value})),placeholder:"e.g., 2.5"})]}),e.jsxs("div",{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Assign Employees"]}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 p-3 border rounded-md",children:oe.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:t,checked:i.assignedEmployees.includes(t),onCheckedChange:()=>l(t)}),e.jsx(g,{htmlFor:t,className:"text-sm cursor-pointer",children:t})]},t))}),i.assignedEmployees.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-sm text-green-600",children:[e.jsx(te,{className:"h-3 w-3"}),e.jsx("span",{children:"Selected employees will be notified automatically"})]})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Required Skills (Optional)"}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 p-3 border rounded-md max-h-32 overflow-y-auto",children:ce.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:t,checked:i.requiredSkills.includes(t),onCheckedChange:()=>v(t)}),e.jsx(g,{htmlFor:t,className:"text-sm cursor-pointer",children:t})]},t))})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(re,{id:"description",value:i.description,onChange:t=>u(a=>({...a,description:t.target.value})),placeholder:"Add any additional details or instructions...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(p,{type:"submit",disabled:!i.title||!x,children:"Schedule Work & Notify"})]})]})]})})},ue=[{id:"1",title:"Team Training - New Equipment",date:new Date(2025,4,21,9,0),createdBy:"Manager",assignedEmployees:["Khalil","Mark","Tamara"],description:"Training session on new diagnostic equipment",priority:"high",status:"scheduled",workType:"training",requiredSkills:["Technical"],estimatedDuration:3},{id:"2",title:"Monthly Performance Review",date:new Date(2025,4,22,14,0),createdBy:"HR Manager",assignedEmployees:["Khalil"],description:"Individual performance review session",priority:"medium",status:"scheduled",workType:"meeting",estimatedDuration:1},{id:"3",title:"Inventory Audit",date:new Date(2025,4,23,10,0),createdBy:"Operations Manager",assignedEmployees:["Mark","Tamara"],description:"Quarterly inventory audit of all floors",priority:"medium",status:"scheduled",workType:"project",requiredSkills:["Organization","Attention to Detail"],estimatedDuration:4}],be=()=>{const[n,o]=d.useState(new Date),[b,i]=d.useState(ue),[u,x]=d.useState(!1),j=new Date,l=b.filter(s=>s.date>j&&s.status==="scheduled").sort((s,f)=>s.date.getTime()-f.date.getTime())[0],v=n?b.filter(s=>s.date.getDate()===n.getDate()&&s.date.getMonth()===n.getMonth()&&s.date.getFullYear()===n.getFullYear()):[],t=b.filter(s=>s.status==="scheduled").map(s=>s.date),a=()=>{x(!0)},N=s=>{i(f=>[...f,s]),s.assignedEmployees.length>0&&R({title:"Event Created & Notifications Sent",description:`${s.title} has been scheduled and all assigned employees have been notified.`})},D=()=>{R({title:"Calendar Exported",description:"Business calendar data exported to Excel successfully."})},C=()=>{l&&o(l.date)},w=s=>{switch(s){case"high":return e.jsx(h,{className:"bg-red-100 text-red-800",children:"High Priority"});case"medium":return e.jsx(h,{className:"bg-yellow-100 text-yellow-800",children:"Medium Priority"});case"low":return e.jsx(h,{className:"bg-green-100 text-green-800",children:"Low Priority"});default:return e.jsx(h,{variant:"outline",children:s})}},T=s=>{switch(s){case"completed":return e.jsx(h,{className:"bg-green-100 text-green-800",children:"Completed"});case"in-progress":return e.jsx(h,{className:"bg-blue-100 text-blue-800",children:"In Progress"});case"canceled":return e.jsx(h,{className:"bg-red-100 text-red-800",children:"Canceled"});default:return e.jsx(h,{className:"bg-gray-100 text-gray-800",children:"Scheduled"})}};return e.jsxs("div",{className:"container p-4 mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Business Calendar"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{variant:"outline",onClick:D,className:"h-9 text-sm",children:[e.jsx(ae,{className:"mr-1 h-4 w-4"}),"Export"]}),e.jsxs(p,{variant:"default",onClick:a,className:"h-9 text-sm",children:[e.jsx(ie,{className:"mr-1 h-4 w-4"}),"Schedule Work"]})]})]}),l&&e.jsx(P,{className:"p-4 mb-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(E,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Next Scheduled Work"}),e.jsx("p",{className:"text-blue-700 font-medium",children:l.title}),e.jsxs("p",{className:"text-sm text-blue-600",children:[k(l.date,"PPPP")," at ",k(l.date,"h:mm a")]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(q,{className:"h-3 w-3 text-blue-600"}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Assigned to: ",l.assignedEmployees.join(", ")]})]})]})]}),e.jsx(p,{variant:"outline",size:"sm",onClick:C,className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:"View Details"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-2",children:[e.jsx(ne,{mode:"single",selected:n,onSelect:o,className:"rounded-md mx-auto pointer-events-auto",modifiers:{hasEvent:t,nextEvent:l?[l.date]:[]},modifiersStyles:{hasEvent:{backgroundColor:"#fef3c7",color:"#92400e",fontWeight:"bold"},nextEvent:{backgroundColor:"#dbeafe",color:"#1e40af",fontWeight:"bold",border:"2px solid #3b82f6"}}}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:n?k(n,"PPPP"):"No date selected"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-200 rounded border"}),e.jsx("span",{children:"Has Work"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-200 rounded border-2 border-blue-500"}),e.jsx("span",{children:"Next Work"})]})]})]})]})}),e.jsx(P,{className:"p-3 lg:col-span-8 shadow-sm rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h2",{className:"text-lg font-semibold border-b pb-2 border-gray-200",children:["Scheduled Work for ",n?k(n,"PPPP"):"Selected Date"]}),v.length>0?e.jsx("div",{className:"space-y-2 overflow-y-auto max-h-[500px] pr-1",children:v.map(s=>e.jsx(P,{className:`p-3 shadow-sm border-l-4 rounded-md ${s.priority==="high"?"border-l-red-500":s.priority==="medium"?"border-l-yellow-500":"border-l-green-500"} ${s.id===(l==null?void 0:l.id)?"ring-2 ring-blue-300 bg-blue-50":""}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("h3",{className:"font-medium text-sm flex items-center gap-2",children:[s.title,s.id===(l==null?void 0:l.id)&&e.jsx(h,{variant:"outline",className:"text-xs bg-blue-100 text-blue-700 border-blue-300",children:"Next Work"})]}),e.jsxs("div",{className:"flex gap-1",children:[w(s.priority),T(s.status)]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-3 w-3 text-muted-foreground mr-1"}),e.jsx("span",{children:k(s.date,"h:mm a")}),s.estimatedDuration&&e.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",s.estimatedDuration,"h)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-muted-foreground mr-1",children:"Created by:"}),e.jsx("span",{className:"font-medium",children:s.createdBy})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Assigned to:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.assignedEmployees.map((f,S)=>e.jsx(h,{variant:"outline",className:"text-xs h-5",children:f},S))})]}),s.assignedEmployees.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx(le,{className:"h-3 w-3"}),e.jsx("span",{children:"Notified"})]})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground border-t pt-2",children:s.description}),s.requiredSkills&&s.requiredSkills.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Required skills:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.requiredSkills.map((f,S)=>e.jsx(h,{variant:"secondary",className:"text-xs h-5",children:f},S))})]})]})},s.id))}):e.jsx("div",{className:"flex items-center justify-center py-10 text-muted-foreground bg-gray-50 rounded-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"mx-auto h-6 w-6 text-muted-foreground/60 mb-1"}),e.jsx("p",{className:"text-sm",children:"No work scheduled for this date."})]})})]})})]}),e.jsx(me,{open:u,onOpenChange:x,onEventAdded:N})]})};export{be as default};
