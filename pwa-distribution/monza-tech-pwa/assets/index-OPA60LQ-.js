var ge=Object.defineProperty;var me=(c,a,s)=>a in c?ge(c,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[a]=s;var A=(c,a,s)=>me(c,typeof a!="symbol"?a+"":a,s);import{R as I,s as f,$ as xe,r as u,t as x,j as e,h,bG as we,B as G,aq as fe,a3 as k,b0 as ye,I as N,aw as je,D as O,a as T,b as $,c as L,a5 as ve,a6 as be,a7 as Se,a8 as Ne,a9 as z,aa as Ce,C as _e,f as qe,au as De}from"./index-D4jk50_k.js";import{A as W,c as Z,a as X,b as Ie,M as Ee}from"./avatar-DeaKJecm.js";import{S as B}from"./scroll-area-Cm1brlpU.js";import{i as Re}from"./networkConfig-BcI5U78d.js";import{C as Me}from"./crown-BWEAYJ9G.js";import{I as Ue}from"./image-Cu5RXs7u.js";import{S as Ae}from"./send-DerxgUvG.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=I("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=I("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=I("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=I("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),m=c=>{try{const a=localStorage.getItem(c);return a?JSON.parse(a):[]}catch(a){return console.error(`Error reading localStorage for ${c}:`,a),[]}},w=(c,a)=>{try{localStorage.setItem(c,JSON.stringify(a))}catch(s){console.error(`Error writing localStorage for ${c}:`,s)}},D=class D{constructor(){A(this,"currentUser",null)}static getInstance(){return this.instance||(this.instance=new D),this.instance}setCurrentUser(a){this.currentUser=a}async createDirectChat(a,s,r,o){const n=`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={id:n,name:`Chat with ${s}`,type:"direct",participants:[{userId:this.currentUser.id,userName:this.currentUser.name,userRole:this.currentUser.role,userEmail:this.currentUser.email,joinedAt:new Date().toISOString(),isOnline:!0},{userId:a,userName:s,userRole:r,userEmail:o,joinedAt:new Date().toISOString(),isOnline:!1}],unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0};try{await f.from("audit_logs").insert({table_name:"audit_logs",record_id:n,action:"INSERT",new_data:i,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:new Date().toISOString()})}catch(p){console.warn("Supabase insert failed, using localStorage fallback:",p)}const l=m("chats");return l.push(i),w("chats",l),i}async createGroupInviteRequest(a,s,r,o="private"){const n=`group_request_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={id:n,groupName:a,groupDescription:s,requestedBy:this.currentUser.id,requestedByRole:this.currentUser.role,participants:r,status:"pending",createdAt:new Date().toISOString()};try{await f.from("audit_logs").insert({table_name:"audit_logs",record_id:n,action:"INSERT",new_data:i,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:new Date().toISOString()})}catch(p){console.warn("Supabase insert failed, using localStorage fallback:",p)}const l=m("group_invite_requests");return l.push(i),w("group_invite_requests",l),await this.notifyOwnersOfGroupRequest(i),i}async approveGroupRequest(a,s){try{try{await f.from("audit_logs").update({new_data:{status:"approved",approvedBy:s,approvedAt:new Date().toISOString()}}).eq("table_name","group_invite_requests").eq("record_id",a)}catch(l){console.warn("Supabase update failed, using localStorage fallback:",l)}const r=m("group_invite_requests"),o=r.findIndex(l=>l.id===a);if(o===-1)throw new Error("Group request not found");const n=r[o];n.status="approved",n.approvedBy=s,n.approvedAt=new Date().toISOString(),w("group_invite_requests",r);const i=await this.createGroupChat(n);return await this.notifyGroupParticipants(n,i),i}catch(r){return console.error("Error approving group request:",r),null}}async denyGroupRequest(a,s,r){try{try{await f.from("audit_logs").update({new_data:{status:"denied",deniedBy:s,deniedAt:new Date().toISOString(),reason:r}}).eq("table_name","group_invite_requests").eq("record_id",a)}catch(l){console.warn("Supabase update failed, using localStorage fallback:",l)}const o=m("group_invite_requests"),n=o.findIndex(l=>l.id===a);if(n===-1)throw new Error("Group request not found");const i=o[n];return i.status="denied",i.deniedBy=s,i.deniedAt=new Date().toISOString(),i.reason=r,w("group_invite_requests",o),await this.notifyGroupRequestDenied(i),!0}catch(o){return console.error("Error denying group request:",o),!1}}async createGroupChat(a){const s=`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={groupType:"private",description:a.groupDescription,allowMemberInvites:!0,requireAdminApproval:!0,pinnedMessages:[]},o={id:s,name:a.groupName,type:"group",participants:a.participants.map(i=>({userId:i,userName:"User",userRole:"employee",userEmail:"user@example.com",joinedAt:new Date().toISOString(),isAdmin:i===a.requestedBy,canAddMembers:i===a.requestedBy,canRemoveMembers:i===a.requestedBy,canSendMessages:!0})),unreadCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,groupSettings:r};try{await f.from("audit_logs").insert({table_name:"audit_logs",record_id:s,action:"INSERT",new_data:o,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:new Date().toISOString()})}catch(i){console.warn("Supabase insert failed, using localStorage fallback:",i)}const n=m("chats");return n.push(o),w("chats",n),o}async sendMessage(a,s,r="text",o){const n=`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={id:n,chatId:a,senderId:this.currentUser.id,senderName:this.currentUser.name,senderRole:this.currentUser.role,content:s,messageType:r,timestamp:new Date().toISOString(),readBy:[this.currentUser.id],replyTo:o};try{await f.from("audit_logs").insert({table_name:"audit_logs",record_id:n,action:"INSERT",new_data:i,user_id:this.currentUser.id,user_email:this.currentUser.email,user_role:this.currentUser.role,ip_address:"127.0.0.1",user_agent:"MonzaTech-Messaging",timestamp:new Date().toISOString()})}catch(p){console.warn("Supabase insert failed, using localStorage fallback:",p)}const l=m("messages");return l.push(i),w("messages",l),await this.updateChatLastMessage(a,i),i}async getChatMessages(a,s=50,r=0){try{try{const{data:n,error:i}=await f.from("audit_logs").select("*").eq("table_name","audit_logs").eq("new_data->chatId",a).order("timestamp",{ascending:!1}).range(r,r+s-1);if(!i&&n)return n.map(l=>l.new_data).filter(Boolean).reverse()}catch(n){console.warn("Supabase query failed, using localStorage fallback:",n)}return m("messages").filter(n=>n.chatId===a).sort((n,i)=>new Date(n.timestamp).getTime()-new Date(i.timestamp).getTime()).slice(r,r+s)}catch(o){return console.error("Error getting chat messages:",o),[]}}async getUserChats(){try{try{const{data:s,error:r}=await f.from("audit_logs").select("*").eq("table_name","audit_logs");if(!r&&s)return s.map(o=>o.new_data).filter(o=>o.participants.some(n=>n.userId===this.currentUser.id)).sort((o,n)=>new Date(n.updatedAt).getTime()-new Date(o.updatedAt).getTime())}catch(s){console.warn("Supabase query failed, using localStorage fallback:",s)}return m("chats").filter(s=>s.participants.some(r=>r.userId===this.currentUser.id)).sort((s,r)=>new Date(r.updatedAt).getTime()-new Date(s.updatedAt).getTime())}catch(a){return console.error("Error getting user chats:",a),[]}}async getPendingGroupRequests(){try{try{const{data:s,error:r}=await f.from("audit_logs").select("*").eq("table_name","audit_logs");if(!r&&s)return s.map(o=>o.new_data).filter(o=>o.status==="pending").sort((o,n)=>new Date(n.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(s){console.warn("Supabase query failed, using localStorage fallback:",s)}return m("group_invite_requests").filter(s=>s.status==="pending").sort((s,r)=>new Date(r.createdAt).getTime()-new Date(s.createdAt).getTime())}catch(a){return console.error("Error getting pending group requests:",a),[]}}async markMessageAsRead(a){try{const s=m("messages"),r=s.findIndex(o=>o.id===a);if(r!==-1){const o=s[r];o.readBy.includes(this.currentUser.id)||(o.readBy.push(this.currentUser.id),w("messages",s))}}catch(s){console.error("Error marking message as read:",s)}}async updateChatLastMessage(a,s){try{const r=m("chats"),o=r.findIndex(n=>n.id===a);if(o!==-1){const n=r[o];n.lastMessage=s,n.updatedAt=new Date().toISOString(),n.participants.forEach(i=>{i.userId!==this.currentUser.id&&(n.unreadCount=(n.unreadCount||0)+1)}),w("chats",r)}}catch(r){console.error("Error updating chat last message:",r)}}async notifyOwnersOfGroupRequest(a){console.log(`Group request notification sent to owners: ${a.groupName}`)}async notifyGroupParticipants(a,s){console.log(`Group created notification sent to participants: ${s.name}`)}async notifyGroupRequestDenied(a){console.log(`Group request denied notification sent to: ${a.requestedBy}`)}async addMemberToGroup(a,s,r,o,n){try{const i=m("chats"),l=i.findIndex(b=>b.id===a);if(l===-1)throw new Error("Chat not found");const p=i[l],v=p.participants.find(b=>b.userId===this.currentUser.id);if(!(v!=null&&v.canAddMembers)&&this.currentUser.role!=="owner")throw new Error("You do not have permission to add members to this group");if(p.participants.some(b=>b.userId===s))throw new Error("User is already a member of this group");return p.participants.push({userId:s,userName:r,userRole:o,userEmail:n,joinedAt:new Date().toISOString(),canAddMembers:!1,canRemoveMembers:!1,canSendMessages:!0}),p.updatedAt=new Date().toISOString(),w("chats",i),!0}catch(i){return console.error("Error adding member to group:",i),!1}}async removeMemberFromGroup(a,s){try{const r=m("chats"),o=r.findIndex(l=>l.id===a);if(o===-1)throw new Error("Chat not found");const n=r[o],i=n.participants.find(l=>l.userId===this.currentUser.id);if(!(i!=null&&i.canRemoveMembers)&&this.currentUser.role!=="owner")throw new Error("You do not have permission to remove members from this group");return n.participants=n.participants.filter(l=>l.userId!==s),n.updatedAt=new Date().toISOString(),w("chats",r),!0}catch(r){return console.error("Error removing member from group:",r),!1}}};A(D,"instance");let F=D;const y=F.getInstance(),He=()=>{var K;const{user:c}=xe(),[a,s]=u.useState([]),[r,o]=u.useState(null),[n,i]=u.useState([]),[l,p]=u.useState(""),[v,b]=u.useState(""),[ee,P]=u.useState(!0),[te,E]=u.useState(!1),[se,R]=u.useState(!1),[re,V]=u.useState(!1),[_,M]=u.useState([]),[S,U]=u.useState({groupName:"",groupDescription:"",participants:[]}),Y=u.useRef(null),q=c?Re(c.role):!1;u.useEffect(()=>{c&&(y.setCurrentUser(c),ae(),q&&ne())},[c,q]),u.useEffect(()=>{var t;(t=Y.current)==null||t.scrollIntoView({behavior:"smooth"})},[n]);const ae=async()=>{try{P(!0);const t=await y.getUserChats();s(t)}catch(t){console.error("Error loading chats:",t),x({title:"Error",description:"Failed to load chats",variant:"destructive"})}finally{P(!1)}},ne=async()=>{try{const t=await y.getPendingGroupRequests();M(t)}catch(t){console.error("Error loading group requests:",t)}},ie=async t=>{try{const d=await y.getChatMessages(t);i(d)}catch(d){console.error("Error loading messages:",d),x({title:"Error",description:"Failed to load messages",variant:"destructive"})}},oe=async t=>{o(t),await ie(t.id)},H=async()=>{if(!(!l.trim()||!r))try{const t=await y.sendMessage(r.id,l.trim());i(d=>[...d,t]),p(""),s(d=>d.map(g=>g.id===r.id?{...g,lastMessage:t,updatedAt:new Date().toISOString()}:g))}catch(t){console.error("Error sending message:",t),x({title:"Error",description:"Failed to send message",variant:"destructive"})}},ce=async(t,d,g,j)=>{try{const C=await y.createDirectChat(t,d,g,j);s(pe=>[C,...pe]),E(!1),x({title:"Chat Created",description:`Direct chat created with ${d}`})}catch(C){console.error("Error creating chat:",C),x({title:"Error",description:"Failed to create chat",variant:"destructive"})}},le=async()=>{if(!S.groupName.trim()||S.participants.length===0){x({title:"Validation Error",description:"Please provide group name and select participants",variant:"destructive"});return}try{const t=await y.createGroupInviteRequest(S.groupName,S.groupDescription,S.participants);R(!1),U({groupName:"",groupDescription:"",participants:[]}),x({title:"Group Request Sent",description:"Your group creation request has been sent to owners for approval"})}catch(t){console.error("Error creating group request:",t),x({title:"Error",description:"Failed to create group request",variant:"destructive"})}},de=async t=>{try{const d=await y.approveGroupRequest(t,(c==null?void 0:c.id)||"");d&&(s(g=>[d,...g]),M(g=>g.filter(j=>j.id!==t)),x({title:"Group Approved",description:`Group "${d.name}" has been created`}))}catch(d){console.error("Error approving group request:",d),x({title:"Error",description:"Failed to approve group request",variant:"destructive"})}},ue=async(t,d)=>{try{await y.denyGroupRequest(t,(c==null?void 0:c.id)||"",d)&&(M(j=>j.filter(C=>C.id!==t)),x({title:"Group Request Denied",description:"Group request has been denied"}))}catch(g){console.error("Error denying group request:",g),x({title:"Error",description:"Failed to deny group request",variant:"destructive"})}},J=a.filter(t=>{var d;return t.name.toLowerCase().includes(v.toLowerCase())||((d=t.lastMessage)==null?void 0:d.content.toLowerCase().includes(v.toLowerCase()))}),Q=t=>{const d=new Date(t),j=(new Date().getTime()-d.getTime())/(1e3*60*60);return j<24?d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):j<48?"Yesterday":d.toLocaleDateString()},he=t=>t.readBy.length>1?e.jsx(Ge,{className:"w-4 h-4 text-blue-500"}):t.senderId===(c==null?void 0:c.id)?e.jsx(De,{className:"w-4 h-4 text-gray-400"}):null;return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Messaging Center"}),e.jsxs("div",{className:"flex gap-2",children:[q&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>V(!0),className:"relative",children:[e.jsx(we,{className:"w-4 h-4"}),_.length>0&&e.jsx(G,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs",children:_.length})]}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>E(!0),children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>R(!0),children:e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(N,{placeholder:"Search chats...",value:v,onChange:t=>b(t.target.value),className:"pl-10"})]})]}),e.jsx(B,{className:"flex-1",children:ee?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading chats..."}):J.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No chats found"}):J.map(t=>{var d;return e.jsx("div",{onClick:()=>oe(t),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${(r==null?void 0:r.id)===t.id?"bg-blue-50 border-blue-200":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(W,{className:"h-10 w-10",children:[e.jsx(Z,{src:""}),e.jsx(X,{className:"bg-blue-100 text-blue-600",children:t.type==="group"?e.jsx(k,{className:"w-5 h-5"}):t.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:t.name}),t.lastMessage&&e.jsx("span",{className:"text-xs text-gray-500",children:Q(t.lastMessage.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:((d=t.lastMessage)==null?void 0:d.content)||"No messages yet"}),t.unreadCount>0&&e.jsx(G,{className:"ml-2 bg-blue-500 text-white text-xs",children:t.unreadCount})]})]})]})},t.id)})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(W,{className:"h-10 w-10",children:[e.jsx(Z,{src:""}),e.jsx(X,{className:"bg-blue-100 text-blue-600",children:r.type==="group"?e.jsx(k,{className:"w-5 h-5"}):r.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500",children:r.type==="group"?`${r.participants.length} members`:((K=r.participants.find(t=>t.userId!==(c==null?void 0:c.id)))==null?void 0:K.userRole)||"User"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})}),e.jsx(B,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[n.map(t=>e.jsx("div",{className:`flex ${t.senderId===(c==null?void 0:c.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${t.senderId===(c==null?void 0:c.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs opacity-75",children:t.senderName}),t.senderRole==="owner"&&e.jsx(Me,{className:"w-3 h-3 text-yellow-400"})]}),e.jsx("p",{className:"text-sm",children:t.content}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs opacity-75",children:Q(t.timestamp)}),he(t)]})]})},t.id)),e.jsx("div",{ref:Y})]})}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(N,{value:l,onChange:t=>p(t.target.value),onKeyPress:t=>t.key==="Enter"&&H(),placeholder:"Type a message...",className:"flex-1"}),e.jsx(h,{onClick:H,disabled:!l.trim(),children:e.jsx(Ae,{className:"w-4 h-4"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ee,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Welcome to Messaging Center"}),e.jsx("p",{className:"text-gray-500",children:"Select a chat to start messaging"})]})})}),e.jsx(O,{open:te,onOpenChange:E,children:e.jsxs(T,{children:[e.jsx($,{children:e.jsx(L,{children:"Start New Chat"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{id:"userId",placeholder:"User ID"}),e.jsx(N,{id:"userName",placeholder:"User Name"}),e.jsx(N,{id:"userEmail",placeholder:"User Email"}),e.jsxs(ve,{children:[e.jsx(be,{id:"userRole",children:e.jsx(Se,{placeholder:"User Role"})}),e.jsxs(Ne,{children:[e.jsx(z,{value:"employee",children:"Employee"}),e.jsx(z,{value:"manager",children:"Manager"}),e.jsx(z,{value:"owner",children:"Owner"})]})]}),e.jsx(h,{onClick:()=>ce("user1","John Doe","employee","john@example.com"),children:"Create Chat"})]})]})}),e.jsx(O,{open:se,onOpenChange:R,children:e.jsxs(T,{children:[e.jsx($,{children:e.jsx(L,{children:"Create Group Request"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{placeholder:"Group Name",value:S.groupName,onChange:t=>U(d=>({...d,groupName:t.target.value}))}),e.jsx(Ce,{placeholder:"Group Description",value:S.groupDescription,onChange:t=>U(d=>({...d,groupDescription:t.target.value}))}),e.jsx(N,{id:"participantIds",placeholder:"Participant IDs (comma-separated)"}),e.jsx(h,{onClick:le,children:"Send Group Request"})]})]})}),q&&e.jsx(O,{open:re,onOpenChange:V,children:e.jsxs(T,{className:"max-w-2xl",children:[e.jsx($,{children:e.jsx(L,{children:"Pending Group Requests"})}),e.jsx(B,{className:"max-h-96",children:_.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No pending group requests"}):e.jsx("div",{className:"space-y-4",children:_.map(t=>e.jsx(_e,{children:e.jsxs(qe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:t.groupName}),e.jsx(G,{variant:"secondary",children:"Pending"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.groupDescription}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["Requested by: ",t.requestedBy," • ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",onClick:()=>de(t.id),children:"Approve"}),e.jsx(h,{size:"sm",variant:"outline",onClick:()=>ue(t.id,"Denied by owner"),children:"Deny"})]})]})},t.id))})})]})})]})};export{He as default};
