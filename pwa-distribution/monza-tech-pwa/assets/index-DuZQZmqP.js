var Te=Object.defineProperty;var Ce=(y,s,t)=>s in y?Te(y,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[s]=t;var me=(y,s,t)=>Ce(y,typeof s!="symbol"?s+"":s,t);import{r as p,j as e,D as te,a as re,b as ie,c as ne,L as d,I as m,d as f,bP as F,am as Ne,Y as be,Z as we,_ as R,aA as de,e as w,f as $,g as M,i as T,a5 as W,a6 as Y,a7 as X,a8 as ee,a9 as v,aa as ge,bR as ae,B,A as Se,a4 as pe,C as De,b3 as Pe,aK as Le,aq as Ae,aG as ye,b0 as Fe,k as Ee,l as Ve,m as fe,n as L,o as Oe,p as A,w as Re,ad as Be,az as He,t as G,M as qe,ak as Ie,aF as $e,a1 as Me}from"./index-CrIDvSVN.js";import{C as se}from"./calculator-8fwHmHYj.js";import{T as je}from"./trending-down-TL9u1_QJ.js";import{S as Ue}from"./square-pen-Cu5lUal4.js";class ke{constructor(){me(this,"tools",[]);me(this,"usageSessions",[]);this.loadData(),this.initializeSampleData()}loadData(){try{const s=localStorage.getItem("toolsEquipment"),t=localStorage.getItem("toolsUsageSessions");s&&(this.tools=JSON.parse(s)),t&&(this.usageSessions=JSON.parse(t))}catch(s){console.error("Error loading tools data:",s)}}saveData(){try{localStorage.setItem("toolsEquipment",JSON.stringify(this.tools)),localStorage.setItem("toolsUsageSessions",JSON.stringify(this.usageSessions))}catch(s){console.error("Error saving tools data:",s)}}initializeSampleData(){if(this.tools.length===0){const s=[{id:"tool-001",name:"Professional Diagnostic Scanner",type:"equipment",category:"Diagnostic Equipment",purchasePrice:3500,currentValue:2800,purchaseDate:"2023-01-15",supplier:"Auto Diagnostic Pro",location:"garage",description:"Advanced OBD-II scanner for all car models",usageHours:245,lastUsed:"2025-01-10",depreciationRate:20,condition:"excellent",assignedTo:"Ahmed Hassan",maintenanceHistory:[],purchasedBy:"Manager",notes:"Essential for garage operations",serialNumber:"ADP-2023-001",warrantyExpiry:"2026-01-15",isActive:!0,createdAt:"2023-01-15T10:00:00Z",updatedAt:"2025-01-10T14:30:00Z"},{id:"tool-002",name:"Hydraulic Car Lift",type:"equipment",category:"Lifting Equipment",purchasePrice:8500,currentValue:6800,purchaseDate:"2022-08-20",supplier:"Garage Equipment Ltd",location:"garage",description:"Two-post hydraulic lift, 4000kg capacity",usageHours:1200,lastUsed:"2025-01-09",depreciationRate:10,condition:"good",assignedTo:null,maintenanceHistory:[{id:"maint-001",date:"2024-12-01",type:"maintenance",description:"Regular hydraulic oil change",cost:150,performedBy:"Service Technician",notes:"All systems operating normally"}],purchasedBy:"Owner",notes:"Main lift for heavy repairs",serialNumber:"GEL-2022-HL4000",warrantyExpiry:"2027-08-20",isActive:!0,createdAt:"2022-08-20T09:00:00Z",updatedAt:"2024-12-01T16:00:00Z"},{id:"tool-003",name:"Customer Display Screen",type:"equipment",category:"Customer Experience",purchasePrice:1200,currentValue:840,purchaseDate:"2023-11-01",supplier:"Digital Display Solutions",location:"showroom",description:'55" 4K display for customer presentations',usageHours:2800,lastUsed:"2025-01-10",depreciationRate:25,condition:"good",assignedTo:"Sales Team",maintenanceHistory:[],purchasedBy:"Sales Manager",notes:"Used for car feature presentations",serialNumber:"DDS-55-4K-2023",warrantyExpiry:"2026-11-01",isActive:!0,createdAt:"2023-11-01T14:00:00Z",updatedAt:"2025-01-10T17:00:00Z"}];this.tools=s,this.saveData()}}calculateDepreciation(s){const t=new Date(s.purchaseDate),a=(new Date().getTime()-t.getTime())/(365.25*24*60*60*1e3),l=s.purchasePrice*(s.depreciationRate/100),o=l*a,h=Math.max(s.purchasePrice-o,s.purchasePrice*.1);return{originalValue:s.purchasePrice,currentValue:Math.round(h*100)/100,depreciatedAmount:Math.round((s.purchasePrice-h)*100)/100,yearsOwned:Math.round(a*10)/10,annualDepreciation:Math.round(l*100)/100,depreciationRate:s.depreciationRate}}updateAllDepreciationValues(){this.tools=this.tools.map(s=>{const t=this.calculateDepreciation(s);return{...s,currentValue:t.currentValue,updatedAt:new Date().toISOString()}}),this.saveData()}addTool(s){const t={...s,id:`tool-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentValue:s.purchasePrice,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.tools.push(t),this.saveData(),t}updateTool(s,t){const n=this.tools.findIndex(a=>a.id===s);return n===-1?null:(this.tools[n]={...this.tools[n],...t,updatedAt:new Date().toISOString()},this.saveData(),this.tools[n])}deleteTool(s){const t=this.tools.findIndex(n=>n.id===s);return t===-1?!1:(this.tools.splice(t,1),this.saveData(),!0)}sellTool(s,t){const n=this.tools.findIndex(a=>a.id===s);return n===-1?null:(this.tools[n]={...this.tools[n],isActive:!1,saleInfo:{...t,saleDate:new Date().toISOString()},updatedAt:new Date().toISOString()},this.saveData(),this.tools[n])}getActiveTools(){return this.tools.filter(s=>s.isActive)}getSoldTools(){return this.tools.filter(s=>!s.isActive&&s.saleInfo)}getAllTools(){return[...this.tools]}getToolsByLocation(s){return this.tools.filter(t=>t.location===s)}getToolsByType(s){return this.tools.filter(t=>t.type===s)}startUsageSession(s,t,n,a=""){const l={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,toolId:s,startTime:new Date().toISOString(),endTime:null,usedBy:t,project:n,notes:a,hours:0};return this.usageSessions.push(l),this.saveData(),l}endUsageSession(s){const t=this.usageSessions.find(o=>o.id===s);if(!t||t.endTime)return null;const n=new Date().toISOString(),a=(new Date(n).getTime()-new Date(t.startTime).getTime())/(1e3*60*60);t.endTime=n,t.hours=Math.round(a*10)/10;const l=this.tools.find(o=>o.id===t.toolId);return l&&(l.usageHours+=t.hours,l.lastUsed=n,l.updatedAt=n),this.saveData(),t}getToolUsageSessions(s){return this.usageSessions.filter(t=>t.toolId===s)}addMaintenanceRecord(s,t){const n=this.tools.find(l=>l.id===s);if(!n)return null;const a={...t,id:`maint-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};return n.maintenanceHistory.push(a),n.updatedAt=new Date().toISOString(),this.saveData(),a}getToolsSummary(){this.updateAllDepreciationValues();const s=this.tools.filter(u=>u.isActive),t=s.reduce((u,b)=>u+b.purchasePrice,0),n=s.reduce((u,b)=>u+b.currentValue,0),a={},l={},o={};s.forEach(u=>{a[u.location]=(a[u.location]||0)+1,l[u.type]=(l[u.type]||0)+1,o[u.condition]=(o[u.condition]||0)+1});const h=s.filter(u=>u.condition==="poor"||u.condition==="needs_repair"||u.usageHours>500&&u.type==="equipment"||u.usageHours>200&&u.type==="tool");return{totalTools:s.length,totalValue:Math.round(t*100)/100,totalCurrentValue:Math.round(n*100)/100,totalDepreciation:Math.round((t-n)*100)/100,byLocation:a,byType:l,byCondition:o,needingMaintenance:h}}exportData(){const s={tools:this.tools,usageSessions:this.usageSessions,exportDate:new Date().toISOString(),version:"1.0"};return JSON.stringify(s,null,2)}importData(s){try{const t=JSON.parse(s);return t.tools&&Array.isArray(t.tools)&&(this.tools=t.tools),t.usageSessions&&Array.isArray(t.usageSessions)&&(this.usageSessions=t.usageSessions),this.saveData(),!0}catch(t){return console.error("Error importing tools data:",t),!1}}searchTools(s){const t=s.toLowerCase().trim();return t?this.tools.filter(n=>n.name.toLowerCase().includes(t)||n.category.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)||n.supplier.toLowerCase().includes(t)||n.assignedTo&&n.assignedTo.toLowerCase().includes(t)||n.serialNumber&&n.serialNumber.toLowerCase().includes(t)):this.tools}}const O=new ke,ze=({isOpen:y,onClose:s,onSave:t})=>{const[n,a]=p.useState({name:"",type:"tool",category:"",purchasePrice:"",location:"garage",description:"",purchasedBy:""}),l=o=>{if(o.preventDefault(),!n.name||!n.category||!n.purchasePrice){alert("Please fill in required fields");return}const h={...n,purchasePrice:F(n.purchasePrice,0),purchaseDate:new Date().toISOString().split("T")[0],supplier:"",usageHours:0,lastUsed:null,depreciationRate:20,condition:"excellent",assignedTo:null,maintenanceHistory:[],notes:"",isActive:!0};t(h),s()};return e.jsx(te,{open:y,onOpenChange:s,children:e.jsxs(re,{className:"max-w-lg",children:[e.jsx(ie,{children:e.jsx(ne,{children:"Add New Tool/Equipment"})}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Name *"}),e.jsx(m,{id:"name",value:n.name,onChange:o=>a(h=>({...h,name:o.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",children:"Type"}),e.jsxs("select",{id:"type",className:"h-10 w-full rounded-md border px-3",value:n.type,onChange:o=>a(h=>({...h,type:o.target.value})),children:[e.jsx("option",{value:"tool",children:"Tool"}),e.jsx("option",{value:"equipment",children:"Equipment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"category",children:"Category *"}),e.jsx(m,{id:"category",value:n.category,onChange:o=>a(h=>({...h,category:o.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"location",children:"Location"}),e.jsxs("select",{id:"location",className:"h-10 w-full rounded-md border px-3",value:n.location,onChange:o=>a(h=>({...h,location:o.target.value})),children:[e.jsx("option",{value:"garage",children:"Garage"}),e.jsx("option",{value:"showroom",children:"Showroom"}),e.jsx("option",{value:"events",children:"Events"}),e.jsx("option",{value:"office",children:"Office"}),e.jsx("option",{value:"storage",children:"Storage"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"purchasePrice",children:"Purchase Price ($) *"}),e.jsx(m,{id:"purchasePrice",type:"number",step:"0.01",value:n.purchasePrice,onChange:o=>a(h=>({...h,purchasePrice:o.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"purchasedBy",children:"Purchased By"}),e.jsx(m,{id:"purchasedBy",value:n.purchasedBy,onChange:o=>a(h=>({...h,purchasedBy:o.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(m,{id:"description",value:n.description,onChange:o=>a(h=>({...h,description:o.target.value}))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(f,{type:"submit",children:"Add Tool"})]})]})]})})},_e=({isOpen:y,tool:s,onClose:t,onSave:n})=>{var b;const[a,l]=p.useState({name:"",type:"tool",category:"",purchasePrice:"",location:"garage",description:"",purchasedBy:"",supplier:"",usageHours:"",depreciationRate:"",condition:"excellent",assignedTo:"",notes:"",serialNumber:"",warrantyExpiry:"",purchaseDate:""});p.useEffect(()=>{var r,i,x,N;s&&l({name:s.name||"",type:s.type||"tool",category:s.category||"",purchasePrice:((r=s.purchasePrice)==null?void 0:r.toString())||"",location:s.location||"garage",description:s.description||"",purchasedBy:s.purchasedBy||"",supplier:s.supplier||"",usageHours:((i=s.usageHours)==null?void 0:i.toString())||"0",depreciationRate:((x=s.depreciationRate)==null?void 0:x.toString())||"20",condition:s.condition||"excellent",assignedTo:s.assignedTo||"",notes:s.notes||"",serialNumber:s.serialNumber||"",warrantyExpiry:s.warrantyExpiry||"",purchaseDate:((N=s.purchaseDate)==null?void 0:N.split("T")[0])||""})},[s]);const o=r=>{if(r.preventDefault(),!a.name||!a.category||!a.purchasePrice){alert("Please fill in required fields");return}const i={name:a.name,type:a.type,category:a.category,purchasePrice:F(a.purchasePrice,0),location:a.location,description:a.description,purchasedBy:a.purchasedBy,supplier:a.supplier,usageHours:F(a.usageHours,0),depreciationRate:F(a.depreciationRate,20),condition:a.condition,assignedTo:a.assignedTo||null,notes:a.notes,serialNumber:a.serialNumber||void 0,warrantyExpiry:a.warrantyExpiry||void 0,purchaseDate:a.purchaseDate};n(i),t()},h=()=>{var r,i,x,N;s&&l({name:s.name||"",type:s.type||"tool",category:s.category||"",purchasePrice:((r=s.purchasePrice)==null?void 0:r.toString())||"",location:s.location||"garage",description:s.description||"",purchasedBy:s.purchasedBy||"",supplier:s.supplier||"",usageHours:((i=s.usageHours)==null?void 0:i.toString())||"0",depreciationRate:((x=s.depreciationRate)==null?void 0:x.toString())||"20",condition:s.condition||"excellent",assignedTo:s.assignedTo||"",notes:s.notes||"",serialNumber:s.serialNumber||"",warrantyExpiry:s.warrantyExpiry||"",purchaseDate:((N=s.purchaseDate)==null?void 0:N.split("T")[0])||""})},u=r=>{switch(r){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"needs_repair":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s?e.jsx(te,{open:y,onOpenChange:t,children:e.jsxs(re,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5 text-blue-600"}),"Edit Tool: ",s.name]})}),e.jsxs(be,{defaultValue:"basic",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-3",children:[e.jsx(R,{value:"basic",children:"Basic Information"}),e.jsx(R,{value:"financial",children:"Financial & Usage"}),e.jsx(R,{value:"details",children:"Additional Details"})]}),e.jsxs("form",{onSubmit:o,children:[e.jsx(de,{value:"basic",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx($,{children:e.jsx(M,{className:"text-lg",children:"Basic Information"})}),e.jsxs(T,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Name *"}),e.jsx(m,{id:"name",value:a.name,onChange:r=>l(i=>({...i,name:r.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",children:"Type"}),e.jsxs(W,{value:a.type,onValueChange:r=>l(i=>({...i,type:r})),children:[e.jsx(Y,{id:"type",children:e.jsx(X,{})}),e.jsxs(ee,{children:[e.jsx(v,{value:"tool",children:"Tool"}),e.jsx(v,{value:"equipment",children:"Equipment"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"category",children:"Category *"}),e.jsx(m,{id:"category",value:a.category,onChange:r=>l(i=>({...i,category:r.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"location",children:"Location"}),e.jsxs(W,{value:a.location,onValueChange:r=>l(i=>({...i,location:r})),children:[e.jsx(Y,{id:"location",children:e.jsx(X,{})}),e.jsxs(ee,{children:[e.jsx(v,{value:"garage",children:"Garage"}),e.jsx(v,{value:"showroom",children:"Showroom"}),e.jsx(v,{value:"events",children:"Events"}),e.jsx(v,{value:"office",children:"Office"}),e.jsx(v,{value:"storage",children:"Storage"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"condition",children:"Condition"}),e.jsxs(W,{value:a.condition,onValueChange:r=>l(i=>({...i,condition:r})),children:[e.jsx(Y,{id:"condition",children:e.jsx(X,{})}),e.jsxs(ee,{children:[e.jsx(v,{value:"excellent",children:"Excellent"}),e.jsx(v,{value:"good",children:"Good"}),e.jsx(v,{value:"fair",children:"Fair"}),e.jsx(v,{value:"poor",children:"Poor"}),e.jsx(v,{value:"needs_repair",children:"Needs Repair"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"assignedTo",children:"Assigned To"}),e.jsx(m,{id:"assignedTo",value:a.assignedTo,onChange:r=>l(i=>({...i,assignedTo:r.target.value})),placeholder:"Employee name"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(ge,{id:"description",value:a.description,onChange:r=>l(i=>({...i,description:r.target.value})),rows:3})]})]})]})}),e.jsx(de,{value:"financial",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx($,{children:e.jsx(M,{className:"text-lg",children:"Financial & Usage Information"})}),e.jsxs(T,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"purchasePrice",children:"Purchase Price ($) *"}),e.jsx(m,{id:"purchasePrice",type:"number",step:"0.01",value:a.purchasePrice,onChange:r=>l(i=>({...i,purchasePrice:r.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"purchaseDate",children:"Purchase Date"}),e.jsx(m,{id:"purchaseDate",type:"date",value:a.purchaseDate,onChange:r=>l(i=>({...i,purchaseDate:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"depreciationRate",children:"Depreciation Rate (% per year)"}),e.jsx(m,{id:"depreciationRate",type:"number",step:"0.1",value:a.depreciationRate,onChange:r=>l(i=>({...i,depreciationRate:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"usageHours",children:"Usage Hours"}),e.jsx(m,{id:"usageHours",type:"number",step:"0.1",value:a.usageHours,onChange:r=>l(i=>({...i,usageHours:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"supplier",children:"Supplier"}),e.jsx(m,{id:"supplier",value:a.supplier,onChange:r=>l(i=>({...i,supplier:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"purchasedBy",children:"Purchased By"}),e.jsx(m,{id:"purchasedBy",value:a.purchasedBy,onChange:r=>l(i=>({...i,purchasedBy:r.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Current Status"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Value:"}),e.jsxs("p",{className:"font-medium",children:["$",(b=s.currentValue)==null?void 0:b.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Used:"}),e.jsx("p",{className:"font-medium",children:s.lastUsed?new Date(s.lastUsed).toLocaleDateString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Condition:"}),e.jsx(B,{className:u(s.condition),children:s.condition.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx(B,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"})]})]})]})]})]})}),e.jsx(de,{value:"details",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx($,{children:e.jsx(M,{className:"text-lg",children:"Additional Details"})}),e.jsxs(T,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"serialNumber",children:"Serial Number"}),e.jsx(m,{id:"serialNumber",value:a.serialNumber,onChange:r=>l(i=>({...i,serialNumber:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"warrantyExpiry",children:"Warranty Expiry"}),e.jsx(m,{id:"warrantyExpiry",type:"date",value:a.warrantyExpiry,onChange:r=>l(i=>({...i,warrantyExpiry:r.target.value}))})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(d,{htmlFor:"notes",children:"Notes"}),e.jsx(ge,{id:"notes",value:a.notes,onChange:r=>l(i=>({...i,notes:r.target.value})),rows:4,placeholder:"Additional notes, maintenance reminders, special instructions..."})]}),s.maintenanceHistory&&s.maintenanceHistory.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Recent Maintenance History"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.maintenanceHistory.slice(-3).map((r,i)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:r.description}),e.jsxs("p",{className:"text-xs text-gray-600",children:[new Date(r.date).toLocaleDateString()," • $",r.cost," • ",r.performedBy]})]}),e.jsx(B,{variant:"outline",className:"text-xs",children:r.type})]})},i))})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Created: ",new Date(s.createdAt).toLocaleDateString()," • Last Updated: ",new Date(s.updatedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:h,children:"Reset"}),e.jsx(f,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(f,{type:"submit",children:"Save Changes"})]})]})]})]})]})}):null},Ge=({isOpen:y,tool:s,onClose:t})=>{var n,a;return s?e.jsx(te,{open:y,onOpenChange:t,children:e.jsxs(re,{className:"max-w-2xl",children:[e.jsx(ie,{children:e.jsx(ne,{children:s.name})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Type"}),e.jsx(B,{variant:"outline",children:s.type})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Category"}),e.jsx("p",{children:s.category})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Location"}),e.jsx("p",{className:"capitalize",children:s.location})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Condition"}),e.jsx(B,{children:s.condition})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Purchase Price"}),e.jsxs("p",{children:["$",(n=s.purchasePrice)==null?void 0:n.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Current Value"}),e.jsxs("p",{children:["$",(a=s.currentValue)==null?void 0:a.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Usage Hours"}),e.jsxs("p",{children:[s.usageHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Assigned To"}),e.jsx("p",{children:s.assignedTo||"Unassigned"})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Description"}),e.jsx("p",{children:s.description})]}),s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Notes"}),e.jsx("p",{children:s.notes})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{onClick:t,children:"Close"})})]})]})}):null},Ze=({isOpen:y,onClose:s})=>{const[t,n]=p.useState(""),[a,l]=p.useState(""),[o,h]=p.useState("straight-line"),[u,b]=p.useState("5"),[r,i]=p.useState("0"),[x,N]=p.useState("good"),[E,U]=p.useState("0"),C=t&&a?(()=>{const g=F(t,0),D=F(r,0),k=F(u,5),H=F(E,0),Z=new Date(a),J=(new Date().getTime()-Z.getTime())/(1e3*60*60*24*365.25);let S=g,K=0,q=0;if(o==="straight-line")K=(g-D)/k,q=Math.min(K*J,g-D),S=Math.max(g-q,D);else if(o==="declining-balance"){const Q=2/k;for(let _=0;_<J;_++){const oe=Math.min(S*Q,S-D);S-=oe,q+=oe}}else if(o==="usage-based"){const Q=k*2e3,_=(g-D)/Q;q=Math.min(H*_,g-D),S=Math.max(g-q,D)}const ue={excellent:1.1,good:1,fair:.8,poor:.6,needs_repair:.4}[x]||1;return S*=ue,{originalValue:g,currentValue:Math.max(S,0),totalDepreciation:g-Math.max(S,0),annualDepreciation:K,depreciationRate:k>0?(g-Math.max(S,0))/g*100:0,yearsElapsed:Math.max(J,0)}})():null,ce=()=>{n(""),l(""),h("straight-line"),b("5"),i("0"),N("good"),U("0")};return e.jsx(te,{open:y,onOpenChange:s,children:e.jsxs(re,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-purple-600"}),"Depreciation Calculator"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx($,{children:e.jsx(M,{className:"text-lg",children:"Tool/Equipment Information"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"purchasePrice",children:"Purchase Price ($) *"}),e.jsx(m,{id:"purchasePrice",type:"number",placeholder:"e.g., 5000",value:t,onChange:g=>n(g.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"purchaseDate",children:"Purchase Date *"}),e.jsx(m,{id:"purchaseDate",type:"date",value:a,onChange:g=>l(g.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"depreciationMethod",children:"Depreciation Method"}),e.jsxs(W,{value:o,onValueChange:h,children:[e.jsx(Y,{id:"depreciationMethod",children:e.jsx(X,{})}),e.jsxs(ee,{children:[e.jsx(v,{value:"straight-line",children:"Straight Line"}),e.jsx(v,{value:"declining-balance",children:"Declining Balance"}),e.jsx(v,{value:"usage-based",children:"Usage Based"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"usefulLife",children:"Useful Life (years)"}),e.jsx(m,{id:"usefulLife",type:"number",placeholder:"e.g., 5",value:u,onChange:g=>b(g.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"salvageValue",children:"Salvage Value ($)"}),e.jsx(m,{id:"salvageValue",type:"number",placeholder:"e.g., 500",value:r,onChange:g=>i(g.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"condition",children:"Current Condition"}),e.jsxs(W,{value:x,onValueChange:N,children:[e.jsx(Y,{id:"condition",children:e.jsx(X,{})}),e.jsxs(ee,{children:[e.jsx(v,{value:"excellent",children:"Excellent"}),e.jsx(v,{value:"good",children:"Good"}),e.jsx(v,{value:"fair",children:"Fair"}),e.jsx(v,{value:"poor",children:"Poor"}),e.jsx(v,{value:"needs_repair",children:"Needs Repair"})]})]})]}),o==="usage-based"&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"usageHours",children:"Usage Hours"}),e.jsx(m,{id:"usageHours",type:"number",placeholder:"e.g., 1500",value:E,onChange:g=>U(g.target.value)})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsx(f,{variant:"outline",onClick:ce,className:"flex-1",children:"Reset"})})]})]}),e.jsxs(w,{children:[e.jsx($,{children:e.jsx(M,{className:"text-lg",children:"Depreciation Results"})}),e.jsx(T,{children:C?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Original Value"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:["$",C.originalValue.toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Current Value"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["$",Math.round(C.currentValue).toLocaleString()]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Total Depreciation"})]}),e.jsxs("p",{className:"text-2xl font-bold text-red-800",children:["$",Math.round(C.totalDepreciation).toLocaleString()]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Depreciation Rate"})]}),e.jsxs("p",{className:"text-2xl font-bold text-orange-800",children:[C.depreciationRate.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Additional Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Years Elapsed:"}),e.jsxs("span",{className:"font-medium",children:[C.yearsElapsed.toFixed(1)," years"]})]}),o==="straight-line"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Annual Depreciation:"}),e.jsxs("span",{className:"font-medium",children:["$",Math.round(C.annualDepreciation).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Depreciation Method:"}),e.jsx("span",{className:"font-medium capitalize",children:o.replace("-"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Condition Adjustment:"}),e.jsx("span",{className:"font-medium capitalize",children:x})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," This calculation is an estimate based on standard depreciation methods. Actual market value may vary based on demand, maintenance, and other factors."]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Enter purchase price and date to calculate depreciation"})]})})]})]}),e.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t",children:e.jsx(f,{variant:"outline",onClick:s,children:"Close"})})]})})},Je=({isOpen:y,tool:s,onClose:t,onSell:n})=>{const[a,l]=p.useState({salePrice:"",soldTo:"",soldBy:"",saleReason:"upgrade",saleNotes:""}),o=i=>{if(i.preventDefault(),!a.salePrice||!a.soldTo||!a.soldBy){alert("Please fill in all required fields");return}const x=F(a.salePrice,0);if(isNaN(x)||x<=0){alert("Please enter a valid sale price");return}n({salePrice:x,soldTo:a.soldTo,soldBy:a.soldBy,saleReason:a.saleReason,saleNotes:a.saleNotes||void 0}),l({salePrice:"",soldTo:"",soldBy:"",saleReason:"upgrade",saleNotes:""}),t()},h=()=>{var i;l({salePrice:((i=s==null?void 0:s.currentValue)==null?void 0:i.toString())||"",soldTo:"",soldBy:"",saleReason:"upgrade",saleNotes:""})},u=i=>{switch(i){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";case"poor":return"bg-orange-100 text-orange-800";case"needs_repair":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},r=(()=>{if(!a.salePrice||!s)return null;const i=F(a.salePrice,0),x=s.currentValue,N=s.purchasePrice;return{salePrice:i,currentValue:x,originalPrice:N,profitFromCurrent:i-x,profitFromOriginal:i-N,profitPercentage:(i-N)/N*100}})();return s?e.jsx(te,{open:y,onOpenChange:t,children:e.jsxs(re,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),"Sell Tool: ",s.name]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx($,{children:e.jsx(M,{className:"text-lg",children:"Tool Information"})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Original Price:"}),e.jsxs("p",{className:"font-medium",children:["$",s.purchasePrice.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Value:"}),e.jsxs("p",{className:"font-medium",children:["$",s.currentValue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Condition:"}),e.jsx(B,{className:u(s.condition),children:s.condition.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Usage Hours:"}),e.jsxs("p",{className:"font-medium",children:[s.usageHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("p",{className:"font-medium capitalize",children:s.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Assigned To:"}),e.jsx("p",{className:"font-medium",children:s.assignedTo||"Unassigned"})]})]})})]}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"salePrice",children:"Sale Price ($) *"}),e.jsx(m,{id:"salePrice",type:"number",step:"0.01",min:"0",value:a.salePrice,onChange:i=>l(x=>({...x,salePrice:i.target.value})),placeholder:`Current value: $${s.currentValue.toLocaleString()}`,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"soldTo",children:"Sold To *"}),e.jsx(m,{id:"soldTo",value:a.soldTo,onChange:i=>l(x=>({...x,soldTo:i.target.value})),placeholder:"Buyer name or company",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"soldBy",children:"Sold By *"}),e.jsx(m,{id:"soldBy",value:a.soldBy,onChange:i=>l(x=>({...x,soldBy:i.target.value})),placeholder:"Employee who handled the sale",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"saleReason",children:"Reason for Sale"}),e.jsx(m,{id:"saleReason",value:a.saleReason,onChange:i=>l(x=>({...x,saleReason:i.target.value})),placeholder:"Enter the reason for selling this tool",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"saleNotes",children:"Sale Notes (Optional)"}),e.jsx(ge,{id:"saleNotes",value:a.saleNotes,onChange:i=>l(x=>({...x,saleNotes:i.target.value})),placeholder:"Additional information about the sale...",rows:3})]}),r&&e.jsxs(w,{children:[e.jsx($,{children:e.jsxs(M,{className:"text-lg flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Sale Analysis"]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Sale Price"}),e.jsxs("div",{className:"text-lg font-bold text-blue-800",children:["$",r.salePrice.toLocaleString()]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Current Value"}),e.jsxs("div",{className:"text-lg font-bold text-gray-800",children:["$",r.currentValue.toLocaleString()]})]}),e.jsxs("div",{className:`p-3 rounded-lg ${r.profitFromCurrent>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:`text-sm font-medium ${r.profitFromCurrent>=0?"text-green-600":"text-red-600"}`,children:"vs Current Value"}),e.jsxs("div",{className:`text-lg font-bold flex items-center gap-1 ${r.profitFromCurrent>=0?"text-green-800":"text-red-800"}`,children:[r.profitFromCurrent>=0?e.jsx(pe,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4 rotate-180"}),r.profitFromCurrent>=0?"+":"","$",r.profitFromCurrent.toLocaleString()]})]}),e.jsxs("div",{className:`p-3 rounded-lg ${r.profitFromOriginal>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:`text-sm font-medium ${r.profitFromOriginal>=0?"text-green-600":"text-red-600"}`,children:"Total Profit/Loss"}),e.jsxs("div",{className:`text-lg font-bold ${r.profitFromOriginal>=0?"text-green-800":"text-red-800"}`,children:[r.profitFromOriginal>=0?"+":"","$",r.profitFromOriginal.toLocaleString()]}),e.jsxs("div",{className:`text-xs ${r.profitFromOriginal>=0?"text-green-600":"text-red-600"}`,children:["(",r.profitPercentage>=0?"+":"",r.profitPercentage.toFixed(1),"%)"]})]})]}),r.profitFromOriginal<0&&e.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-semibold",children:[e.jsx(Se,{className:"h-4 w-4"}),"Loss on Sale"]}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"This sale will result in a loss compared to the original purchase price. Consider if this is the best time to sell or if the price can be adjusted."})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(f,{type:"button",variant:"outline",onClick:h,children:"Use Current Value"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsxs(f,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Complete Sale"]})]})]})]})]})]})}):null},es=()=>{const[y,s]=p.useState([]),[t,n]=p.useState([]),[a,l]=p.useState(""),[o,h]=p.useState("all"),[u,b]=p.useState("all"),[r,i]=p.useState("all"),[x,N]=p.useState(!1),[E,U]=p.useState(null),[le,C]=p.useState(null),[ce,g]=p.useState(!1),[D,k]=p.useState("tools"),[H,Z]=p.useState(null);p.useEffect(()=>{z()},[]),p.useEffect(()=>{J()},[y,a,o,u,r]);const z=()=>{const c=O.getAllTools();s(c)},J=()=>{let c=y.filter(j=>{const I=j.name.toLowerCase().includes(a.toLowerCase())||j.type.toLowerCase().includes(a.toLowerCase())||j.category.toLowerCase().includes(a.toLowerCase())||j.serialNumber&&j.serialNumber.toLowerCase().includes(a.toLowerCase())||j.description.toLowerCase().includes(a.toLowerCase())||j.supplier.toLowerCase().includes(a.toLowerCase())||j.location.toLowerCase().includes(a.toLowerCase())||j.assignedTo&&j.assignedTo.toLowerCase().includes(a.toLowerCase())||j.condition.toLowerCase().includes(a.toLowerCase())||j.notes&&j.notes.toLowerCase().includes(a.toLowerCase()),P=o==="all"||j.location===o,he=u==="all"||j.type===u,xe=r==="all"||j.condition===r;return I&&P&&he&&xe});n(c)},S=c=>{O.addTool(c),z(),N(!1),G({title:"Tool Added",description:"New tool has been successfully added to the inventory."})},K=c=>{E&&(O.updateTool(E.id,c),z(),U(null),G({title:"Tool Updated",description:"Tool information has been successfully updated."}))},q=c=>{H&&(O.sellTool(H.id,c),z(),Z(null),G({title:"Tool Sold",description:`${H.name} has been successfully sold for $${c.salePrice.toLocaleString()}.`}))},ue=()=>{const c=O.exportData(),j=new Blob([c],{type:"application/json"}),I=URL.createObjectURL(j),P=document.createElement("a");P.href=I,P.download=`tools-equipment-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(I),G({title:"Export Complete",description:"Tools and equipment data has been exported successfully."})},Q=c=>{var P;const j=(P=c.target.files)==null?void 0:P[0];if(!j)return;const I=new FileReader;I.onload=he=>{var ve;const xe=(ve=he.target)==null?void 0:ve.result;O.importData(xe)?(z(),G({title:"Import Complete",description:"Tools and equipment data has been imported successfully."})):G({title:"Import Failed",description:"Failed to import data. Please check the file format.",variant:"destructive"})},I.readAsText(j)},_=c=>{switch(c){case"excellent":return"bg-green-100 text-green-800 border-green-300";case"good":return"bg-blue-100 text-blue-800 border-blue-300";case"fair":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"poor":return"bg-orange-100 text-orange-800 border-orange-300";case"needs_repair":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},oe=c=>{switch(c){case"garage":return e.jsx(Me,{className:"h-4 w-4"});case"showroom":return e.jsx($e,{className:"h-4 w-4"});case"events":return e.jsx(Ie,{className:"h-4 w-4"});case"office":return e.jsx(Ne,{className:"h-4 w-4"});case"storage":return e.jsx(ye,{className:"h-4 w-4"});default:return e.jsx(qe,{className:"h-4 w-4"})}},V=O.getToolsSummary();return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tools & Equipment Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track tools, equipment, depreciation, and usage across all locations"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(f,{variant:"outline",onClick:()=>g(!0),className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Depreciation Calculator"]}),e.jsxs(f,{variant:"outline",onClick:ue,children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsx("label",{htmlFor:"import-tools",className:"cursor-pointer",children:e.jsx(f,{variant:"outline",asChild:!0,children:e.jsxs("span",{children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Import"]})})}),e.jsx("input",{id:"import-tools",type:"file",accept:".json",className:"hidden",onChange:Q}),e.jsxs(f,{onClick:()=>N(!0),children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"}),"Add Tool/Equipment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(w,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-bold",children:V.totalTools})]}),e.jsx(ye,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(w,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Original Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",V.totalValue.toLocaleString()]})]}),e.jsx(ae,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(w,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",V.totalCurrentValue.toLocaleString()]})]}),e.jsx(je,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(w,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Depreciation"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",V.totalDepreciation.toLocaleString()]})]}),e.jsx(se,{className:"h-8 w-8 text-orange-500"})]})})})]}),e.jsxs(be,{value:D,onValueChange:k,className:"w-full",children:[e.jsxs(we,{children:[e.jsx(R,{value:"tools",children:"All Tools & Equipment"}),e.jsxs(R,{value:"garage",children:["Garage (",V.byLocation.garage||0,")"]}),e.jsxs(R,{value:"showroom",children:["Showroom (",V.byLocation.showroom||0,")"]}),e.jsxs(R,{value:"events",children:["Events (",V.byLocation.events||0,")"]}),e.jsxs(R,{value:"office",children:["Office (",V.byLocation.office||0,")"]})]}),e.jsxs(de,{value:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-2 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:"Search tools...",className:"pl-8",value:a,onChange:c=>l(c.target.value)})]}),e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:o,onChange:c=>h(c.target.value),children:[e.jsx("option",{value:"all",children:"All Locations"}),e.jsx("option",{value:"garage",children:"Garage"}),e.jsx("option",{value:"showroom",children:"Showroom"}),e.jsx("option",{value:"events",children:"Events"}),e.jsx("option",{value:"office",children:"Office"}),e.jsx("option",{value:"storage",children:"Storage"})]}),e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:u,onChange:c=>b(c.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"tool",children:"Tools"}),e.jsx("option",{value:"equipment",children:"Equipment"})]}),e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2",value:r,onChange:c=>i(c.target.value),children:[e.jsx("option",{value:"all",children:"All Conditions"}),e.jsx("option",{value:"excellent",children:"Excellent"}),e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"}),e.jsx("option",{value:"needs_repair",children:"Needs Repair"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.length," items"]})})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ee,{children:[e.jsx(Ve,{children:e.jsxs(fe,{children:[e.jsx(L,{children:"Tool/Equipment"}),e.jsx(L,{children:"Type"}),e.jsx(L,{children:"Category"}),e.jsx(L,{children:"Location"}),e.jsx(L,{children:"Purchase Price"}),e.jsx(L,{children:"Current Value"}),e.jsx(L,{children:"Condition"}),e.jsx(L,{children:"Usage Hours"}),e.jsx(L,{children:"Assigned To"}),e.jsx(L,{children:"Actions"})]})}),e.jsx(Oe,{children:t.map(c=>{const j=O.calculateDepreciation(c);return e.jsxs(fe,{children:[e.jsx(A,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:c.description})]})}),e.jsx(A,{children:e.jsx(B,{variant:"outline",className:"capitalize",children:c.type})}),e.jsx(A,{children:c.category}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[oe(c.location),e.jsx("span",{className:"capitalize",children:c.location})]})}),e.jsxs(A,{children:["$",c.purchasePrice.toLocaleString()]}),e.jsx(A,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["$",j.currentValue.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-red-600",children:["-",j.depreciationRate,"%/year"]})]})}),e.jsx(A,{children:e.jsx(B,{className:_(c.condition),children:c.condition.replace("_"," ")})}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"h-4 w-4 text-muted-foreground"}),c.usageHours,"h"]})}),e.jsx(A,{children:c.assignedTo?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"}),c.assignedTo]}):e.jsx("span",{className:"text-muted-foreground",children:"Unassigned"})}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>C(c),children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>U(c),children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>Z(c),className:"text-green-600 hover:text-green-700",title:"Sell tool",children:e.jsx(ae,{className:"h-4 w-4"})})]})})]},c.id)})})]})})})]})]}),x&&e.jsx(ze,{isOpen:x,onClose:()=>N(!1),onSave:S}),E&&e.jsx(_e,{isOpen:!!E,tool:E,onClose:()=>U(null),onSave:K}),le&&e.jsx(Ge,{isOpen:!!le,tool:le,onClose:()=>C(null)}),ce&&e.jsx(Ze,{isOpen:ce,onClose:()=>g(!1)}),e.jsx(Je,{isOpen:!!H,tool:H,onClose:()=>Z(null),onSell:q})]})};export{es as default};
