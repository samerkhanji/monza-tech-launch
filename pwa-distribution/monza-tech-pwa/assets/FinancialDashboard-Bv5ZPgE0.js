import{R as be,b$ as he,$ as pe,r as N,j as e,D as re,a as ce,b as oe,c as de,i as ae,Y as De,Z as we,_ as q,aA as G,C as c,d as p,e as j,f as o,B as v,h as R,M as Me,ad as Pe,an as Se,c0 as Ue,bR as Fe,a4 as Re,c1 as ke,U as Le,az as Ee,a2 as Te,bW as He,X as $e,bM as Ie,I as M,bP as Ae}from"./index-D4jk50_k.js";import{C as Oe}from"./calculator-Cisxa6nz.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=be("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Be=({isOpen:n,onClose:k,carCode:L})=>{const{getCarByCode:_,getCarRepairHistory:V,getCarFinancialData:z}=he(),{hasPermission:K}=pe(),[J,te]=N.useState("overview"),P=K("view_financial_data"),l=_(L),Y=V(L),Q=z(L);if(!l)return e.jsx(re,{open:n,onOpenChange:k,children:e.jsxs(ce,{children:[e.jsx(oe,{children:e.jsx(de,{children:"Car Not Found"})}),e.jsxs("p",{children:["No data found for car code: ",L]})]})});const C=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),f=t=>({inventory:"bg-blue-100 text-blue-800",garage:"bg-yellow-100 text-yellow-800",scheduled:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",sold:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",$=(t,m)=>{let I={inventory:"/inventory",garage:"/garage-car-inventory",showroom_floor_1:"/showroom-floor-1",showroom_floor_2:"/showroom-floor-2",showroom_inventory:"/showroom-inventory",inventory_floor_2:"/inventory-floor-2",inventory_garage:"/inventory-garage",repairs:"/repairs",scheduled:"/garage-schedule",delivered:"/shipping-eta",sold:"/sales"}[t]||"/inventory";m&&(I+=`?vin=${encodeURIComponent(m)}`),window.open(I,"_blank")};return e.jsx(re,{open:n,onOpenChange:k,children:e.jsxs(ce,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-hidden",children:[e.jsx(oe,{className:"sticky top-0 bg-white z-10 border-b pb-4",children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),l.model," (",l.carCode,")"]})}),e.jsx("div",{className:"overflow-y-auto px-1 car-detail-scroll",style:{maxHeight:"calc(95vh - 120px)",scrollbarWidth:"thin",scrollbarColor:"#CBD5E0 #F7FAFC"},children:e.jsxs(De,{value:J,onValueChange:te,className:"w-full",children:[e.jsxs(we,{className:`grid w-full ${P?"grid-cols-5":"grid-cols-4"} sticky top-0 bg-white z-10 mb-4`,children:[e.jsx(q,{value:"overview",children:"Overview"}),e.jsx(q,{value:"inventory",children:"Inventory"}),e.jsx(q,{value:"garage",children:"Garage"}),P&&e.jsx(q,{value:"financial",children:"Financial"}),e.jsx(q,{value:"history",children:"History"})]}),e.jsx(G,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(c,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Vehicle Information"]})}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Model:"}),e.jsx("span",{className:"font-medium",children:l.model})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Year:"}),e.jsx("span",{className:"font-medium",children:l.year})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Color:"}),e.jsx("span",{className:"font-medium",children:l.color})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Car Code:"}),e.jsx("span",{className:"font-medium font-mono",children:l.carCode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Brand:"}),e.jsx("span",{className:"font-medium",children:l.brand||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Current Location:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:f(l.currentLocation),children:l.currentLocation.replace("_"," ").toUpperCase()}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>$(l.currentLocation,l.carCode),className:"text-xs",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"View"]})]})]})]})]}),l.clientName&&e.jsxs(c,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Client Information"]})}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Name:"}),e.jsx("span",{className:"font-medium",children:l.clientName})]}),l.clientPhone&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phone:"}),e.jsx("span",{className:"font-medium",children:l.clientPhone})]}),l.clientEmail&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Email:"}),e.jsx("span",{className:"font-medium",children:l.clientEmail})]})]})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Status Summary"]})}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Repairs Completed:"}),e.jsx("span",{className:"font-medium",children:Y.length})]}),P&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Financial Records:"}),e.jsx("span",{className:"font-medium",children:Q.length})]}),l.garageData&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Garage Status:"}),e.jsx(v,{children:l.garageData.status.replace("_"," ").toUpperCase()})]}),l.scheduleData&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Scheduled:"}),e.jsx("span",{className:"font-medium",children:l.scheduleData.scheduleDate})]})]})]})]})}),e.jsx(G,{value:"inventory",className:"space-y-4",children:l.inventoryData?e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{children:"Inventory Details"})}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status:"}),e.jsx(v,{className:"ml-2",children:l.inventoryData.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Arrival Date:"}),e.jsx("span",{className:"ml-2",children:l.inventoryData.arrivalDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Current Floor:"}),e.jsx("span",{className:"ml-2",children:l.inventoryData.currentFloor||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Battery:"}),e.jsxs("span",{className:"ml-2",children:[l.inventoryData.batteryPercentage||"N/A","%"]})]}),l.inventoryData.sellingPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Selling Price:"}),e.jsx("span",{className:"ml-2",children:C(l.inventoryData.sellingPrice)})]})]}),l.inventoryData.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:l.inventoryData.notes})]})]})]}):e.jsx(c,{children:e.jsx(o,{className:"py-8 text-center text-gray-500",children:"No inventory data available for this vehicle"})})}),e.jsx(G,{value:"garage",className:"space-y-4",children:l.garageData?e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{children:"Garage/Repair Details"})}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status:"}),e.jsx(v,{className:"ml-2",children:l.garageData.status.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Entry Date:"}),e.jsx("span",{className:"ml-2",children:l.garageData.entryDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Assigned Employee:"}),e.jsx("span",{className:"ml-2",children:l.garageData.assignedEmployee||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Expected Duration:"}),e.jsx("span",{className:"ml-2",children:l.garageData.repairDuration||"N/A"})]})]}),l.garageData.issueDescription&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Issue Description:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:l.garageData.issueDescription})]}),l.garageData.workNotes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Work Notes:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:l.garageData.workNotes})]}),l.garageData.mechanics&&l.garageData.mechanics.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Mechanics:"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:l.garageData.mechanics.map((t,m)=>e.jsx(v,{variant:"outline",children:t},m))})]}),l.garageData.partsUsed&&l.garageData.partsUsed.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Parts Used:"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:l.garageData.partsUsed.map((t,m)=>e.jsx(v,{variant:"outline",children:t},m))})]})]})]}):e.jsx(c,{children:e.jsx(o,{className:"py-8 text-center text-gray-500",children:"No garage/repair data available for this vehicle"})})}),P&&e.jsx(G,{value:"financial",className:"space-y-4",children:Q.length>0?e.jsx("div",{className:"space-y-4",children:Q.map((t,m)=>e.jsxs(c,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Financial Record #",m+1]}),e.jsx(v,{children:t.repairType})]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-red-600",children:"Company Cost:"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:C(t.totalCost)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-green-600",children:"Customer Price:"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:C(t.totalCost+t.profit)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-blue-600",children:"Profit:"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:C(t.profit)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Profit Margin:"}),e.jsxs("p",{className:"text-lg font-bold",children:[t.profitMargin,"%"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Labor:"}),e.jsx("span",{className:"ml-2 font-medium",children:C(t.laborCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Parts:"}),e.jsx("span",{className:"ml-2 font-medium",children:C(t.partsCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Electricity:"}),e.jsx("span",{className:"ml-2 font-medium",children:C(t.electricityCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Labor Hours:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[t.laborHours,"h"]})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[e.jsxs("span",{children:["Repair Date: ",t.startDate]}),t.completionDate&&t.completionDate!==t.startDate&&e.jsxs("span",{children:[" - ",t.completionDate]})]})]})]},m))}):e.jsx(c,{children:e.jsx(o,{className:"py-8 text-center text-gray-500",children:"No financial data available for this vehicle"})})}),e.jsx(G,{value:"history",className:"space-y-4",children:Y.length>0?e.jsx("div",{className:"space-y-4",children:Y.map((t,m)=>e.jsxs(c,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Repair #",m+1]}),e.jsx(v,{children:t.repairType})]})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Technician:"}),e.jsx("span",{className:"ml-2",children:t.technician})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Labor Hours:"}),e.jsxs("span",{className:"ml-2",children:[t.laborHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Date:"}),e.jsx("span",{className:"ml-2",children:t.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Completion Date:"}),e.jsx("span",{className:"ml-2",children:t.completionDate})]})]}),t.partsUsed&&t.partsUsed.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Parts Used:"}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:t.partsUsed.map((S,I)=>e.jsx(v,{variant:"outline",children:S},I))})]}),t.notes&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes:"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t.notes})]}),t.totalCost&&e.jsxs("div",{className:"mt-3 text-right",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Total Cost: "}),e.jsx("span",{className:"font-bold",children:C(t.totalCost)})]})]})]},m))}):e.jsx(c,{children:e.jsx(o,{className:"py-8 text-center text-gray-500",children:"No repair history available for this vehicle"})})})]})}),e.jsx("div",{className:"flex justify-end gap-2 mt-6",children:e.jsx(R,{variant:"outline",onClick:k,children:"Close"})})]})})},s={currency:{exchangeRate:89500},laborRates:{"Mechanical Repairs":{lbp:25e5,usd:28},"Electrical Work":{lbp:3e6,usd:33.5},"Body Work":{lbp:22e5,usd:24.5},Painting:{lbp:28e5,usd:31.3},Detailing:{lbp:18e5,usd:20.1}},operationalCosts:{electricity:{generatorPowerOutputKwh:15,fuelConsumptionPerHour:3.5,fuelPricePerLiterUsd:7,maintenanceCostPerHourUsd:5,depreciationPerHourUsd:4,backupGeneratorFuelUsd:335},rent:{monthly:0},insurance:{usdMonthly:1400},maintenance:{usdMonthly:1060},security:{usdMonthly:2010},cleaning:{usdMonthly:750},elevatorMaintenance:{usdMonthly:600},generatorMaintenance:{usdMonthly:1500}},partsCosts:{localParts:{markupPercentage:45},importedParts:{markupPercentage:85,bankingFees:12}},employeeCosts:{minimumWageUsd:268,averageWageUsd:503}},qe=()=>{const[n,k]=N.useState(null),[L,_]=N.useState(!1),[V,z]=N.useState([]),[K,J]=N.useState(null),[te,P]=N.useState(!1),[l,Y]=N.useState(null),[Q,C]=N.useState({}),[f,$]=N.useState(!1),[t,m]=N.useState({}),{unifiedCars:S,refreshData:I}=he(),{hasPermission:je}=pe(),ue=je("view_financial_data");N.useEffect(()=>{const a=[];S.forEach(h=>{h.financialRecords&&h.financialRecords.length>0&&h.financialRecords.forEach(i=>{a.push({carCode:i.carCode,carModel:i.carModel,customerName:i.customerName,repairType:i.repairType,startDate:i.startDate,completionDate:i.completionDate,laborHours:i.laborHours,laborCost:i.laborCost,partsCost:i.partsCost,electricityCost:i.electricityCost,equipmentCost:i.equipmentCost,overheadCost:i.overheadCost,totalCost:i.totalCost,profit:i.profit,profitMargin:i.profitMargin,currency:i.currency,exchangeRate:i.exchangeRate,partsUsed:i.partsUsed,employeesWorked:i.employeesWorked})})}),a.length===0&&a.push(...xe()),z(a)},[S]);const xe=()=>{const a=[],h=new Date,i=["Ahmad Khalil","Fatima Nassar","Hassan Mourad","Layla Khoury","Omar Sabbagh","Nour Hakim","Karim Fares","Rania Sleiman","Samir Daher","Maya Jaber","Walid Tabbara","Dina Yammine"];let u=S.filter(x=>{var r;return x.currentLocation==="delivered"||((r=x.garageData)==null?void 0:r.status)==="delivered"});if(u.length===0&&(u=S.filter(x=>x.garageData).slice(0,12)),u.length===0)for(let x=0;x<8;x++){const r=new Date(h);r.setDate(r.getDate()-x*5);const g=i[Math.floor(Math.random()*i.length)],Z=Object.keys(s.laborRates),ne=Z[Math.floor(Math.random()*Z.length)],A=["Oil Change & Filter","Brake Pad Replacement","Engine Diagnostic","Transmission Service","AC Repair","Battery Replacement","Tire Replacement","Suspension Repair","Electrical Issue","Radiator Service","Clutch Repair","Exhaust System"],E=A[Math.floor(Math.random()*A.length)],y=1+Math.random()*4,O=s.laborRates[ne],W=y*O.usd,T=Math.random()*1500+300,U=Math.random()>.6;let b;U?(b=T*(1+s.partsCosts.importedParts.markupPercentage/100),b+=Math.random()*200):b=T*(1+s.partsCosts.localParts.markupPercentage/100);const ee=y*s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd,se=y*s.operationalCosts.electricity.maintenanceCostPerHourUsd,le=y*s.operationalCosts.electricity.depreciationPerHourUsd,F=ee+se+le,B=(s.operationalCosts.insurance.usdMonthly+s.operationalCosts.maintenance.usdMonthly+s.operationalCosts.security.usdMonthly+s.operationalCosts.cleaning.usdMonthly+s.operationalCosts.elevatorMaintenance.usdMonthly+s.operationalCosts.generatorMaintenance.usdMonthly)/60,H=W+b+F+B,me=.15+Math.random()*.1,Ce=H*(1+me);a.push({carCode:`CAR-${x.toString().padStart(3,"0")}`,carModel:"Toyota Camry 2018",customerName:g,repairType:E,startDate:r.toISOString().split("T")[0],completionDate:r.toISOString().split("T")[0],laborHours:Number(y.toFixed(1)),laborCost:Math.round(W*100)/100,partsCost:Math.round(b*100)/100,electricityCost:Math.round(F*100)/100,equipmentCost:0,overheadCost:Math.round(B*100)/100,totalCost:Math.round(H*100)/100,profit:Math.round((Ce-H)*100)/100,profitMargin:Number((me*100).toFixed(1)),currency:"USD",exchangeRate:s.currency.exchangeRate,partsUsed:[{name:U?`Imported ${E} components`:`Domestic ${E} parts`,quantity:1,unitCost:Math.round(b),isImported:U,supplier:U?"International Auto Parts":"US Auto Supply"}],employeesWorked:[{name:"Mark Johnson",role:"Lead Mechanic",hours:Number(y.toFixed(1)),hourlyRate:O.usd}]})}return u.forEach((x,r)=>{var ie,B,H;const g=x.clientName||((ie=x.garageData)==null?void 0:ie.customerName)||i[r%i.length],Z=x.model||((B=x.garageData)==null?void 0:B.carModel)||"Unknown Model",ne=x.carCode,A=["Mechanical Repair","Electrical Work","Body Work","Engine Service","Brake Service"],E=A[r%A.length],y=2+Math.random()*4,O=s.laborRates["Mechanical Repairs"],W=y*O.usd,T=200+Math.random()*800,U=y*12,b=50+Math.random()*100,ee=W+T+U+b,se=.2,le=ee*se,F=new Date;F.setDate(F.getDate()-r),a.push({carCode:ne,carModel:Z,customerName:g,repairType:E,startDate:F.toISOString().split("T")[0],completionDate:F.toISOString().split("T")[0],laborHours:Number(y.toFixed(1)),laborCost:Math.round(W*100)/100,partsCost:Math.round(T*100)/100,electricityCost:Math.round(U*100)/100,equipmentCost:0,overheadCost:Math.round(b*100)/100,totalCost:Math.round(ee*100)/100,profit:Math.round(le*100)/100,profitMargin:Number((se*100).toFixed(1)),currency:"USD",exchangeRate:s.currency.exchangeRate,partsUsed:[{name:`${E} components`,quantity:1,unitCost:Math.round(T),isImported:Math.random()>.5,supplier:"Auto Parts Lebanon"}],employeesWorked:[{name:((H=x.garageData)==null?void 0:H.assignedEmployee)||"Technician",role:"Lead Mechanic",hours:Number(y.toFixed(1)),hourlyRate:O.usd}]})}),a.sort((x,r)=>new Date(r.startDate).getTime()-new Date(x.startDate).getTime())},D=V.length>0?V:xe(),X=(()=>{const a=D.reduce((r,g)=>r+g.totalCost+g.profit,0),h=D.reduce((r,g)=>r+g.profit,0),i=D.reduce((r,g)=>r+g.totalCost,0),u=i/D.length,x=D.reduce((r,g)=>r+g.profitMargin,0)/D.length;return{totalRevenue:a,totalProfit:h,totalCosts:i,averageRepairCost:u,averageProfitMargin:x,totalRepairs:D.length}})(),d=(a,h=!0)=>{const i=a;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(i)},ge=a=>{k(a),_(!0)},fe=a=>{J(a),P(!0)};if(!ue)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[e.jsx("div",{className:"p-6 bg-red-50 rounded-full",children:e.jsx(Ue,{className:"h-12 w-12 text-red-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Financial data is only accessible to owners."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please contact your administrator if you need access to financial information."})]})]});const ye=()=>{n&&($(!0),m({laborCost:n.laborCost,partsCost:n.partsCost,electricityCost:n.electricityCost,equipmentCost:n.equipmentCost,overheadCost:n.overheadCost,profit:n.profit,profitMargin:n.profitMargin}))},Ne=()=>{if(n&&t){const a=(t.laborCost||n.laborCost)+(t.partsCost||n.partsCost)+(t.electricityCost||n.electricityCost)+(t.equipmentCost||n.equipmentCost)+(t.overheadCost||n.overheadCost),h=t.totalCost!==void 0?t.totalCost:a,i=t.customerPrice!==void 0?t.customerPrice:h+(t.profit||n.profit),u={...n,...t,totalCost:h,customerPrice:i};z(x=>x.map(r=>r.carCode===n.carCode?u:r)),k(u)}$(!1),m({})},ve=()=>{$(!1),m({})},w=(a,h)=>{const i=Ae(h,0);m(u=>({...u,[a]:i}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Financial Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Lebanese Garage Financial Management (USD Display)"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Currency: USD (89,500 LBP = 1 USD)"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Updated: ",new Date().toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Fe,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer Revenue"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:d(X.totalRevenue)}),e.jsx("p",{className:"text-xs text-gray-500",children:"What customers paid"})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Re,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Profit"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:d(X.totalProfit)})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(ke,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Company Cost"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:d(X.averageRepairCost)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Internal expenses"})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(We,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Profit Margin"}),e.jsxs("p",{className:"text-xl font-bold text-orange-600",children:[X.averageProfitMargin.toFixed(1),"%"]})]})]})})})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Recent Repair Financial Records"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:D.map(a=>e.jsx(c,{className:"border border-gray-200",children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-800",children:[a.carCode," - ",a.carModel]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.customerName}),e.jsx("p",{className:"text-xs text-gray-500",children:a.repairType})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Company Cost"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:d(a.totalCost)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Internal expenses"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Customer Price"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:d(a.totalCost+a.profit)}),e.jsx("p",{className:"text-xs text-gray-500",children:"What customer pays"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:"Profit"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:d(a.profit)}),e.jsxs(v,{className:"bg-green-100 text-green-800",children:[a.profitMargin,"%"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>ge(a),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Financial Details"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>fe(a.carCode),className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Car History"]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Labor Cost"}),e.jsx("p",{className:"font-medium text-red-600",children:d(a.laborCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Parts Cost"}),e.jsx("p",{className:"font-medium text-red-600",children:d(a.partsCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Operations"}),e.jsx("p",{className:"font-medium text-red-600",children:d(a.electricityCost+a.equipmentCost+a.overheadCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Hours"}),e.jsxs("p",{className:"font-medium",children:[a.laborHours,"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Customer Pays"}),e.jsx("p",{className:"font-medium text-green-600",children:d(a.totalCost+a.profit)})]})]})]})},a.carCode))})})]}),e.jsx(re,{open:L,onOpenChange:_,children:e.jsxs(ce,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Financial Breakdown - ",n==null?void 0:n.carCode]}),e.jsxs(Te,{children:["Detailed cost analysis for ",n==null?void 0:n.carModel," repair"]})]}),e.jsx("div",{className:"flex gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsxs(R,{size:"sm",onClick:Ne,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(He,{className:"h-4 w-4"}),"Save Changes"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:ve,className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"Cancel"]})]}):e.jsxs(R,{size:"sm",variant:"outline",onClick:ye,className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Edit All Costs"]})})]})}),n&&e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6 financial-breakdown-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"#CBD5E0 #F7FAFC"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsxs(p,{children:[e.jsx(j,{className:"text-lg",children:"Company Cost Breakdown (USD)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Internal expenses for repair work"})]}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Labor (",n.laborHours,"h):"]}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.laborCost||n.laborCost,onChange:a=>w("laborCost",a.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):e.jsx("span",{className:"font-medium text-red-600",children:d(n.laborCost)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Parts & Materials:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.partsCost||n.partsCost,onChange:a=>w("partsCost",a.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):e.jsx("span",{className:"font-medium text-red-600",children:d(n.partsCost)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Electricity:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.electricityCost||n.electricityCost,onChange:a=>w("electricityCost",a.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):e.jsx("span",{className:"font-medium text-red-600",children:d(n.electricityCost)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Equipment:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.equipmentCost||n.equipmentCost,onChange:a=>w("equipmentCost",a.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):e.jsx("span",{className:"font-medium text-red-600",children:d(n.equipmentCost)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Overhead:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.overheadCost||n.overheadCost,onChange:a=>w("overheadCost",a.target.value),className:"w-24 h-8 text-sm font-medium text-red-600"})]}):e.jsx("span",{className:"font-medium text-red-600",children:d(n.overheadCost)})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold items-center",children:[e.jsx("span",{children:"Total Company Cost:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-red-600",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.totalCost||n.totalCost,onChange:a=>w("totalCost",a.target.value),className:"w-32 h-8 text-sm font-bold text-red-600",placeholder:"0.00",title:"Enter custom total cost or leave blank to auto-calculate"}),e.jsx("span",{className:"text-xs text-gray-500",children:"✏️ Editable"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600",children:d(n.totalCost)}),n.totalCost&&e.jsx("span",{className:"text-xs text-gray-500",title:"This value can be edited",children:"✏️"})]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold items-center",children:[e.jsx("span",{children:"Customer Price:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-green-600",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.customerPrice||n.customerPrice||n.totalCost+n.profit,onChange:a=>w("customerPrice",a.target.value),className:"w-32 h-8 text-sm font-bold text-green-600",placeholder:"0.00",title:"Enter custom customer price or leave blank to auto-calculate"}),e.jsx("span",{className:"text-xs text-gray-500",children:"✏️ Editable"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600",children:d(n.customerPrice||n.totalCost+n.profit)}),e.jsx("span",{className:"text-xs text-gray-500",title:"This value can be edited",children:"✏️"})]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold items-center",children:[e.jsx("span",{children:"Profit:"}),f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"$"}),e.jsx(M,{type:"number",step:"0.01",value:t.profit||n.profit,onChange:a=>w("profit",a.target.value),className:"w-24 h-8 text-sm font-bold text-blue-600"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.profitMargin||n.profitMargin,"%)"]})]}):e.jsx("span",{className:"text-blue-600",children:d(n.profit)})]})]})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-lg",children:"Labor Details (USD)"})}),e.jsx(o,{className:"space-y-3",children:n.employeesWorked.map((a,h)=>e.jsxs("div",{className:"border-l-4 border-blue-200 pl-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsxs("span",{children:[a.hours,"h"]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:a.role}),e.jsxs("span",{children:[d(a.hourlyRate),"/h"]})]}),e.jsxs("div",{className:"text-sm font-medium text-right",children:["Total: ",d(a.hours*a.hourlyRate)]})]},h))})]})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-lg",children:"Parts & Materials Used (USD)"})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:n.partsUsed.map((a,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",a.quantity," • ",a.supplier,a.isImported&&e.jsx(v,{className:"ml-2 bg-orange-100 text-orange-800",children:"Imported"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:d(a.unitCost*a.quantity)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d(a.unitCost)," each"]})]})]},h))})})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-lg",children:"Lebanese Market Factors - 2025 (USD)"})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Labor Rates ($/hour)"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mechanical Repairs:"}),e.jsx("span",{children:s.laborRates["Mechanical Repairs"].usd.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Electrical Work:"}),e.jsx("span",{children:s.laborRates["Electrical Work"].usd.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Body Work:"}),e.jsx("span",{children:s.laborRates["Body Work"].usd.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Painting:"}),e.jsx("span",{children:s.laborRates.Painting.usd.toLocaleString()})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Operational Costs (2025)"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Electricity/kWh:"}),e.jsxs("span",{children:[s.operationalCosts.electricity.generatorPowerOutputKwh.toLocaleString()," kWh"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rent/Month:"}),e.jsxs("span",{children:[(s.operationalCosts.rent.monthly/1e6).toFixed(1),"M USD"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fuel/Liter:"}),e.jsxs("span",{children:[s.operationalCosts.electricity.fuelPricePerLiterUsd.toLocaleString()," USD"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Insurance/Month:"}),e.jsxs("span",{children:[(s.operationalCosts.insurance.usdMonthly/1e3).toFixed(1),"K USD"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Generator Fuel:"}),e.jsxs("span",{children:[s.operationalCosts.electricity.fuelConsumptionPerHour," L/hour"]})]})]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"2025 Lebanese Market Context - Crisis Economic Conditions"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm text-red-700",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Currency:"})," USD (Lebanese crisis context)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Exchange Rate:"})," 1 USD = ",s.currency.exchangeRate.toLocaleString()," LBP"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Minimum Wage:"})," $",s.employeeCosts.minimumWageUsd,"/month"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Average Automotive Wage:"})," $",s.employeeCosts.averageWageUsd,"/month"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Local Parts Markup:"})," ",s.partsCosts.localParts.markupPercentage,"% (limited local production)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Import Parts Markup:"})," ",s.partsCosts.importedParts.markupPercentage,"% (import crisis + banking fees)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Banking Fees:"})," ",s.partsCosts.importedParts.bankingFees,"% (capital controls)"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Electricity Crisis:"})," 0% grid power available"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Generator Dependency:"})," 100% generator-powered facility"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fuel Cost:"})," $",s.operationalCosts.electricity.fuelPricePerLiterUsd,"/liter diesel"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Security Required:"})," Armed security due to situation"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Facility Type:"})," Owner-Operated 4-Floor Building"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Generator Output:"})," ",s.operationalCosts.electricity.generatorPowerOutputKwh," kWh/hour"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Daily Fuel Cost:"})," ~$",(s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd*12).toFixed(0)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Generator Costs (Monthly)"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maintenance:"}),e.jsxs("span",{children:["$",s.operationalCosts.generatorMaintenance.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fuel (Primary):"}),e.jsxs("span",{children:["$",(s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd*12*30).toFixed(0)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Backup Fuel:"}),e.jsxs("span",{children:["$",s.operationalCosts.electricity.backupGeneratorFuelUsd*30]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Monthly:"}),e.jsxs("span",{children:["$",(s.operationalCosts.generatorMaintenance.usdMonthly+s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd*12*30+s.operationalCosts.electricity.backupGeneratorFuelUsd*30).toFixed(0)]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Per Job (60/month):"}),e.jsxs("span",{children:["$",((s.operationalCosts.generatorMaintenance.usdMonthly+s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd*12*30+s.operationalCosts.electricity.backupGeneratorFuelUsd*30)/60).toFixed(0)]})]})]})]})]})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-lg",children:"Lebanese Generator-Powered Operations"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-red-50 p-3 rounded border border-red-200",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"POWER CRISIS IMPACT"}),e.jsxs("div",{className:"text-sm text-red-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Grid Power:"})," 0% available (complete blackout)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Generator Dependency:"})," 100% facility power from diesel generators"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Operating Challenge:"})," Constant fuel shortage + high costs"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Main Generator Output:"}),e.jsxs("span",{children:[s.operationalCosts.electricity.generatorPowerOutputKwh," kWh/hour"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fuel Consumption:"}),e.jsxs("span",{children:[s.operationalCosts.electricity.fuelConsumptionPerHour," L/hour"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Diesel Price:"}),e.jsxs("span",{children:["$",s.operationalCosts.electricity.fuelPricePerLiterUsd,"/liter"]})]}),e.jsxs("div",{className:"flex justify-between text-red-600 font-medium",children:[e.jsx("span",{children:"Hourly Fuel Cost:"}),e.jsxs("span",{children:["$",(s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-red-800 font-bold",children:[e.jsx("span",{children:"Daily Fuel Cost (12h):"}),e.jsxs("span",{children:["$",(s.operationalCosts.electricity.fuelConsumptionPerHour*s.operationalCosts.electricity.fuelPricePerLiterUsd*12).toFixed(0)]})]})]})]})})]}),e.jsxs(c,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-lg",children:"Lebanese Market - Monthly Operational Costs"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Rent (OWNED):"}),e.jsx("span",{children:"$0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Insurance:"}),e.jsxs("span",{children:["$",s.operationalCosts.insurance.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Facility Maintenance:"}),e.jsxs("span",{children:["$",s.operationalCosts.maintenance.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Armed Security:"}),e.jsxs("span",{children:["$",s.operationalCosts.security.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cleaning:"}),e.jsxs("span",{children:["$",s.operationalCosts.cleaning.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Elevator Maintenance:"}),e.jsxs("span",{children:["$",s.operationalCosts.elevatorMaintenance.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Generator Maintenance:"}),e.jsxs("span",{children:["$",s.operationalCosts.generatorMaintenance.usdMonthly]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Monthly (exc. fuel):"}),e.jsxs("span",{children:["$",s.operationalCosts.insurance.usdMonthly+s.operationalCosts.maintenance.usdMonthly+s.operationalCosts.security.usdMonthly+s.operationalCosts.cleaning.usdMonthly+s.operationalCosts.elevatorMaintenance.usdMonthly+s.operationalCosts.generatorMaintenance.usdMonthly]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Per Job (60/month):"}),e.jsxs("span",{children:["$",((s.operationalCosts.insurance.usdMonthly+s.operationalCosts.maintenance.usdMonthly+s.operationalCosts.security.usdMonthly+s.operationalCosts.cleaning.usdMonthly+s.operationalCosts.elevatorMaintenance.usdMonthly+s.operationalCosts.generatorMaintenance.usdMonthly)/60).toFixed(0)]})]}),e.jsxs("div",{className:"text-xs text-red-700 mt-2 p-2 bg-red-50 rounded",children:[e.jsx("strong",{children:"Crisis Premium:"})," All costs significantly higher due to Lebanese economic collapse, security concerns, and generator dependency"]})]})})]})]})]})}),K&&e.jsx(Be,{isOpen:te,onClose:()=>{P(!1),J(null)},carCode:K})]})},ze=()=>e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(qe,{})});export{ze as default};
