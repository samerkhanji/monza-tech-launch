import{r,ao as b,j as e,D as G,a as V,b as H,c as B,aF as v,aG as O,w as z,h as n,ac as R,Q as A,b0 as _,I as Q,C as f,f as C,i as W,d as $,e as q,B as y,g as S,a1 as w,X,M as J}from"./index-D4jk50_k.js";import{C as K}from"./CarHistoryDetailsDialog-Cy4YD_-1.js";import{S as U}from"./square-pen-CdUU5No_.js";import"./scroll-area-Cm1brlpU.js";import"./enhancedRepairHistoryService-Bjt0i2mv.js";import"./test-tube-V-DFEf2y.js";const Y=({isOpen:d,onClose:i,car:a,onMoveCar:m})=>{const[h,g]=r.useState(""),[x,c]=r.useState("");b();const o=[{id:"floor1",label:"Showroom Floor 1",description:"Move to main showroom floor 1",icon:v},{id:"floor2",label:"Showroom Floor 2",description:"Move to luxury showroom floor 2",icon:v},{id:"inventory",label:"Car Inventory",description:"Move to main car inventory storage",icon:O},{id:"garage-schedule",label:"Garage Schedule",description:"Add to garage schedule for service/repair",icon:z}];return e.jsx(G,{open:d,onOpenChange:i,children:e.jsxs(V,{className:"sm:max-w-[400px]",children:[e.jsx(H,{children:e.jsxs(B,{children:["Move Car - ",a==null?void 0:a.model]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"VIN:"})," ",a==null?void 0:a.vinNumber]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Model:"})," ",a==null?void 0:a.model]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Color:"})," ",a==null?void 0:a.color]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Select destination:"}),o.map(l=>e.jsx(n,{variant:"outline",className:"w-full justify-start",onClick:()=>m(l.id),children:l.label},l.id))]})]}),e.jsx(R,{children:e.jsx(n,{variant:"outline",onClick:i,children:"Cancel"})})]})})},ne=()=>{const[d,i]=r.useState([]),[a,m]=r.useState(""),[h,g]=r.useState(!0),[x,c]=r.useState(!1),[o,l]=r.useState(null),[Z,D]=r.useState(!1),[ee,M]=r.useState(null),[I,u]=r.useState(!1),[k,p]=r.useState(null),{toast:P}=b();r.useEffect(()=>{(async()=>{try{g(!0),localStorage.removeItem("garageCars"),localStorage.removeItem("garageInventory"),localStorage.removeItem("garageSchedule"),localStorage.removeItem("garageSchedules"),localStorage.removeItem("inventoryGarage");const t={id:"test-garage-car-1",vinNumber:"TESTVIN12345678901",model:"Voyah FREE",year:2024,color:"White",brand:"Voyah",category:"EV",status:"available",arrivalDate:new Date().toISOString(),batteryPercentage:85,sellingPrice:65e3,customs:"paid",customsAmount:5500,shipmentCode:"TEST-001",garageEntryDate:new Date().toISOString(),garageLocation:"Bay 2",garageStatus:"stored",garageNotes:"Test car for demonstrating move functionality",pdiCompleted:!0,pdiDate:new Date().toISOString(),pdiTechnician:"Tech-001",notes:"Test car",manufacturingDate:"2024-01-15",rangeExtenderNumber:"RE-001",highVoltageBatteryNumber:"HV-001",frontMotorNumber:"FM-001",rearMotorNumber:"RM-001"};i([t]),console.log("Garage Cars: Added test car for move functionality demo")}catch(t){console.error("Error loading garage cars:",t),i([])}finally{g(!1)}})()},[]);const j=d.filter(s=>s.vinNumber.toLowerCase().includes(a.toLowerCase())||s.model.toLowerCase().includes(a.toLowerCase())||s.brand.toLowerCase().includes(a.toLowerCase())),N=s=>{M(s),D(!0)},T=s=>{l(s),c(!0)},E=(s,t)=>{o&&(i(F=>F.filter(L=>L.id!==o.id)),P({title:"Car Moved Successfully",description:`${o.model} has been moved to ${s}.`}),c(!1),l(null))};return h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading garage inventory..."})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Garage Car Inventory"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage cars currently in garage"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(n,{variant:"outline",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Scan VIN"]})})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search by VIN, model, or brand...",value:a,onChange:s=>m(s.target.value),className:"pl-10"})]})}),j.length===0?e.jsx(f,{children:e.jsxs(C,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(W,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Cars in Garage"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:a?"No cars found matching your search criteria.":"There are currently no cars in the garage inventory. Cars will appear here when moved to garage."})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:j.map(s=>e.jsxs(f,{className:"hover:shadow-lg transition-shadow cursor-pointer hover:bg-blue-50",onClick:()=>{p(s),u(!0)},title:"Click to view complete car history",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-lg",children:s.model}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.brand," â€¢ ",s.year]})]}),e.jsx(y,{variant:s.garageStatus==="ready_for_pickup"?"default":"secondary",children:s.garageStatus.replace("_"," ")})]})}),e.jsxs(C,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"VIN:"}),e.jsx("p",{className:"text-muted-foreground font-mono text-xs",children:s.vinNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("p",{className:"text-muted-foreground",children:s.garageLocation})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Battery:"}),e.jsxs("p",{className:"text-muted-foreground",children:[s.batteryPercentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"PDI:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.pdiCompleted?e.jsx(S,{className:"h-3 w-3 text-green-500"}):e.jsx(w,{className:"h-3 w-3 text-orange-500"}),e.jsx("span",{className:"text-xs",children:s.pdiCompleted?"Complete":"Pending"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Customs:"}),e.jsx("div",{className:"inline-flex items-center ml-2",children:e.jsx(y,{variant:s.customs==="paid"?"default":"destructive",className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:t=>{t.stopPropagation(),N(s)},title:"Click to manage customs",children:s.customs==="paid"?e.jsxs(e.Fragment,{children:[" ",e.jsx(S,{className:"h-3 w-3 mr-1"})," paid"]}):e.jsxs(e.Fragment,{children:[" ",e.jsx(X,{className:"h-3 w-3 mr-1"})," ",s.customs||"not paid"]})})})]})]}),s.garageNotes&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("span",{className:"font-medium text-sm",children:"Notes:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.garageNotes})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:t=>{t.stopPropagation()},children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:t=>{t.stopPropagation()},children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"PDI"]}),e.jsx(n,{variant:"outline",size:"sm",className:"flex-1",onClick:t=>{t.stopPropagation(),N(s)},children:"Customs"}),e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:t=>{t.stopPropagation(),T(s)},children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"Move"]})]})]})]},s.id))}),x&&o&&e.jsx(Y,{isOpen:x,onClose:()=>{c(!1),l(null)},car:o,onMoveCar:E}),e.jsx(K,{isOpen:I,onClose:()=>{u(!1),p(null)},car:k})]})};export{ne as default};
