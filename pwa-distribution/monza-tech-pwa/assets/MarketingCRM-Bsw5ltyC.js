import{r as o,j as e,a as x,aq as M,b as _,c as E,d as R,ag as q,f as O,I as r,g as P,h as W,i as N,k as c,l as U,m as d,B,ax as H,p as J,D as z,q as V,v as F,w as G,a2 as Q,L as i,aN as K,aa as X,ac as Y,ad as Z,t as w,M as $,aw as ee,av as se,cW as ae,a3 as ne}from"./index-BjC2zLSq.js";import{G as te}from"./globe-B-J6C5ws.js";const ie=()=>{const[t,j]=o.useState([]),[h,C]=o.useState(""),[p,b]=o.useState("all"),[g,L]=o.useState("all"),[y,m]=o.useState(!1),[a,l]=o.useState({name:"",email:"",phone:"",company:"",source:"website",status:"new",interestedIn:[],notes:"",assignedTo:"Current User",tags:[]});o.useEffect(()=>{D()},[]);const D=()=>{const s=localStorage.getItem("crmLeads");if(s)j(JSON.parse(s));else{const n=[{id:"1",name:"Ahmed Al Mansouri",email:"ahmed@example.com",phone:"+971-50-123-4567",company:"Tech Solutions LLC",source:"website",status:"qualified",interestedIn:["EV/EREV"],budget:15e4,expectedCloseDate:"2024-02-15",notes:"Interested in electric vehicles for company fleet",assignedTo:"Sales Manager",createdAt:new Date().toISOString(),lastContact:new Date(Date.now()-1728e5).toISOString(),nextFollowUp:new Date(Date.now()+864e5).toISOString(),tags:["hot_lead","fleet"]},{id:"2",name:"Sarah Johnson",email:"sarah@email.com",phone:"+971-55-987-6543",source:"referral",status:"new",interestedIn:["Luxury","SUV"],notes:"Referred by existing customer",assignedTo:"Sales Rep",createdAt:new Date().toISOString(),tags:["referral"]}];j(n),localStorage.setItem("crmLeads",JSON.stringify(n))}},f=s=>{j(s),localStorage.setItem("crmLeads",JSON.stringify(s))},I=()=>{if(!a.name||!a.email){w({title:"Error",description:"Name and email are required",variant:"destructive"});return}const s={id:Date.now().toString(),name:a.name,email:a.email,phone:a.phone||"",company:a.company,source:a.source,status:a.status,interestedIn:a.interestedIn,budget:a.budget,expectedCloseDate:a.expectedCloseDate,notes:a.notes,assignedTo:a.assignedTo,createdAt:new Date().toISOString(),tags:a.tags},n=[...t,s];f(n),w({title:"Success",description:"New lead added successfully"}),l({name:"",email:"",phone:"",company:"",source:"website",status:"new",interestedIn:[],notes:"",assignedTo:"Current User",tags:[]}),m(!1)},T=(s,n)=>{const v=t.map(u=>u.id===s?{...u,status:n}:u);f(v),w({title:"Success",description:"Lead status updated"})},k=s=>({website:e.jsx(te,{className:"h-4 w-4"}),referral:e.jsx(ne,{className:"h-4 w-4"}),social:e.jsx(ae,{className:"h-4 w-4"}),email:e.jsx(se,{className:"h-4 w-4"}),phone:e.jsx(ee,{className:"h-4 w-4"}),walk_in:e.jsx($,{className:"h-4 w-4"})})[s]||e.jsx(Z,{className:"h-4 w-4"}),A=t.filter(s=>{var S;const n=!h||s.name.toLowerCase().includes(h.toLowerCase())||s.email.toLowerCase().includes(h.toLowerCase())||((S=s.company)==null?void 0:S.toLowerCase().includes(h.toLowerCase())),v=p==="all"||s.status===p,u=g==="all"||s.source===g;return n&&v&&u});return t.length,t.filter(s=>!["closed_won","closed_lost"].includes(s.status)).length,t.filter(s=>s.status==="qualified").length,t.filter(s=>s.status==="closed_won").length,t.length>0&&Math.round(t.filter(s=>s.status==="closed_won").length/t.length*100),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Customer Relationship Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track leads, client communication, and follow-ups for sales and service"})]}),e.jsxs(x,{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(_,{children:[e.jsxs(E,{children:[e.jsx(R,{children:"Lead Management"}),e.jsx(q,{children:"Manage and track all your sales leads"})]}),e.jsxs(O,{children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{placeholder:"Search leads by name, email, or company...",value:h,onChange:s=>C(s.target.value),className:"w-full"})}),e.jsxs("select",{value:p,onChange:s=>b(s.target.value),className:"h-10 px-3 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"qualified",children:"Qualified"}),e.jsx("option",{value:"proposal",children:"Proposal"}),e.jsx("option",{value:"negotiation",children:"Negotiation"}),e.jsx("option",{value:"closed_won",children:"Closed Won"}),e.jsx("option",{value:"closed_lost",children:"Closed Lost"})]}),e.jsxs("select",{value:g,onChange:s=>L(s.target.value),className:"h-10 px-3 border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Sources"}),e.jsx("option",{value:"website",children:"Website"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"walk_in",children:"Walk-in"})]})]}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(P,{children:[e.jsx(W,{children:e.jsxs(N,{children:[e.jsx(c,{children:"Name"}),e.jsx(c,{children:"Contact"}),e.jsx(c,{children:"Source"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Interest"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(U,{children:A.map(s=>e.jsxs(N,{children:[e.jsx(d,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.company&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.company})]})}),e.jsx(d,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.phone})]})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[k(s.source),e.jsx("span",{className:"capitalize",children:s.source.replace("_"," ")})]})}),e.jsx(d,{children:e.jsxs("select",{value:s.status,onChange:n=>T(s.id,n.target.value),className:"px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"contacted",children:"Contacted"}),e.jsx("option",{value:"qualified",children:"Qualified"}),e.jsx("option",{value:"proposal",children:"Proposal"}),e.jsx("option",{value:"negotiation",children:"Negotiation"}),e.jsx("option",{value:"closed_won",children:"Closed Won"}),e.jsx("option",{value:"closed_lost",children:"Closed Lost"})]})}),e.jsx(d,{children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:s.interestedIn.map(n=>e.jsx(B,{variant:"outline",className:"text-xs",children:n},n))})}),e.jsx(d,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{size:"sm",variant:"outline",children:e.jsx(H,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"outline",children:e.jsx(J,{className:"h-3 w-3"})})]})})]},s.id))})]})})]})]})}),e.jsx(z,{open:y,onOpenChange:m,children:e.jsxs(V,{className:"max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(G,{children:"Add New Lead"}),e.jsx(Q,{children:"Enter the lead information to start tracking"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Name *"}),e.jsx(r,{value:a.name,onChange:s=>l({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Email *"}),e.jsx(r,{type:"email",value:a.email,onChange:s=>l({...a,email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Phone"}),e.jsx(r,{value:a.phone,onChange:s=>l({...a,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Company"}),e.jsx(r,{value:a.company,onChange:s=>l({...a,company:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Source"}),e.jsxs("select",{value:a.source,onChange:s=>l({...a,source:s.target.value}),className:"h-10 w-full px-3 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"website",children:"Website"}),e.jsx("option",{value:"referral",children:"Referral"}),e.jsx("option",{value:"social",children:"Social Media"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"walk_in",children:"Walk-in"})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Budget"}),e.jsx(r,{type:"number",value:a.budget,onChange:s=>l({...a,budget:K(s.target.value,0)})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(i,{children:"Notes"}),e.jsx(X,{value:a.notes,onChange:s=>l({...a,notes:s.target.value}),rows:3})]})]}),e.jsxs(Y,{children:[e.jsx(x,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(x,{onClick:I,children:"Add Lead"})]})]})})]})};export{ie as default};
